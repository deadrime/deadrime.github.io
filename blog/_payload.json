[{"data":1,"prerenderedAt":13195},["ShallowReactive",2],{"blog":3},[4,1556,7489,10426,13064],{"id":5,"title":6,"body":7,"date":1544,"description":1545,"extension":1546,"meta":1547,"navigation":205,"path":1548,"previewImg":1549,"seo":1550,"stem":1551,"topics":1552,"__hash__":1555},"articles/blog/advanced-css.md","Шпаргалка по CSS",{"type":8,"value":9,"toc":1533},"minimark",[10,15,28,33,43,54,58,61,87,90,98,134,150,330,334,337,374,381,397,457,462,553,707,710,801,805,811,820,864,868,1053,1057,1060,1087,1090,1228,1388,1405,1496,1500,1503,1529],[11,12,14],"h2",{"id":13},"array","Единицы измерения",[16,17,18,19,23,24,27],"p",{},"Помимо стандартных ",[20,21,22],"code",{},"px"," и ",[20,25,26],{},"%"," существует 1001 способ задать размер элементам.",[29,30,32],"h3",{"id":31},"font-based","Зависящие от размера шрифта",[16,34,35,38,39,42],{},[20,36,37],{},"em"," - зависит от ",[20,40,41],{},"font-size"," дочернего элемента",[16,44,45,38,48,50,51],{},[20,46,47],{},"rem",[20,49,41],{}," элемента ",[20,52,53],{},"html",[29,55,57],{"id":56},"screen-based","Относительно экрана (viewport-а)",[16,59,60],{},"Появились в первую очередь для мобилок",[62,63,64,71,77],"ul",{},[65,66,67,70],"li",{},[20,68,69],{},"vw"," - viewport width, % от ширины окна браузера.",[65,72,73,76],{},[20,74,75],{},"vh"," - viewport height, % от высоты окна браузера",[65,78,79,82,83,86],{},[20,80,81],{},"vmin",", ",[20,84,85],{},"vmax"," - для мобилок, % от меньшей/большей размерности вьюпорта вне зависимости от ориентации",[16,88,89],{},"Проблемы - не учитываются размеры элементов браузера, например адресная строка в safari или клавиатура",[16,91,92,93,97],{},"Чтобы решить эти проблемы - придумали ",[94,95,96],"del",{},"новый костыль"," модификаторы:",[62,99,100,106,112,118,124],{},[65,101,102,105],{},[20,103,104],{},"svh"," - small viewport height, представляет высоту области просмотра, когда пользовательский интерфейс адресной строки еще не уменьшил свой размер. svh отвечает за то содержимое страницы, которое вы будете видеть, когда интерфейс адресной строки растянут до максимума.",[65,107,108,111],{},[20,109,110],{},"lvh"," - large viewport height, представляет высоту области просмотра после того, как пользовательский интерфейс адресной строки уменьшил свой размер. lvh отвечает за то содержимое страницы, когда пользовательский интерфейс сжат до минимума.",[65,113,114,117],{},[20,115,116],{},"dvh"," - dynamic viewport height - использует любое из значений svh или lvh в зависимости от того, уменьшен ли интерфейс адресной строки. dvh просчитывает переходные состояния между максимальным и минимальным размером UI в браузере.",[65,119,120,123],{},[20,121,122],{},"svw, lvw, dvw"," - такая же история для ширины области просмотра",[65,125,126,129,130,82,132],{},[20,127,128],{},"svmin, lvmin, dvmin"," - аналог ",[20,131,81],{},[20,133,85],{},[16,135,136,137,140,141,140,144,140,147],{},"Однако классическую проблему со скроллбаром новые единицы так и не решили -\n",[20,138,139],{},"100svw"," = ",[20,142,143],{},"100dvw",[20,145,146],{},"100lvw",[20,148,149],{},"100vw",[151,152,154,246,249],"accordion",{"summary":153},"Решение проблемы со скроллбаром",[155,156,161],"pre",{"className":157,"code":158,"language":159,"meta":160,"style":160},"language-css shiki shiki-themes github-light github-dark","html,\nbody {\n  scrollbar-gutter: stable;\n}\n\n/* 100vw не вызовет появление горизонтального скролла */\n.full-width {\n  width: 100vw;\n}\n","css","",[20,162,163,175,184,194,200,207,214,223,241],{"__ignoreMap":160},[164,165,168,171],"span",{"class":166,"line":167},"line",1,[164,169,53],{"class":170},"s9eBZ",[164,172,174],{"class":173},"sVt8B",",\n",[164,176,178,181],{"class":166,"line":177},2,[164,179,180],{"class":170},"body",[164,182,183],{"class":173}," {\n",[164,185,187,191],{"class":166,"line":186},3,[164,188,190],{"class":189},"sj4cs","  scrollbar-gutter",[164,192,193],{"class":173},": stable;\n",[164,195,197],{"class":166,"line":196},4,[164,198,199],{"class":173},"}\n",[164,201,203],{"class":166,"line":202},5,[164,204,206],{"emptyLinePlaceholder":205},true,"\n",[164,208,210],{"class":166,"line":209},6,[164,211,213],{"class":212},"sJ8bj","/* 100vw не вызовет появление горизонтального скролла */\n",[164,215,217,221],{"class":166,"line":216},7,[164,218,220],{"class":219},"sScJk",".full-width",[164,222,183],{"class":173},[164,224,226,229,232,235,238],{"class":166,"line":225},8,[164,227,228],{"class":189},"  width",[164,230,231],{"class":173},": ",[164,233,234],{"class":189},"100",[164,236,69],{"class":237},"szBVR",[164,239,240],{"class":173},";\n",[164,242,244],{"class":166,"line":243},9,[164,245,199],{"class":173},[16,247,248],{},"либо",[155,250,252],{"className":157,"code":251,"language":159,"meta":160,"style":160},"body {\n  margin: 0;\n  container-type: inline-size;\n}\n\n.full-width {\n  width: 100vw; /* fallback for older browsers */\n  width: 100cqw; /* 100cqw учитывет сколлбар */\n}\n",[20,253,254,260,272,280,284,288,294,310,326],{"__ignoreMap":160},[164,255,256,258],{"class":166,"line":167},[164,257,180],{"class":170},[164,259,183],{"class":173},[164,261,262,265,267,270],{"class":166,"line":177},[164,263,264],{"class":189},"  margin",[164,266,231],{"class":173},[164,268,269],{"class":189},"0",[164,271,240],{"class":173},[164,273,274,277],{"class":166,"line":186},[164,275,276],{"class":189},"  container-type",[164,278,279],{"class":173},": inline-size;\n",[164,281,282],{"class":166,"line":196},[164,283,199],{"class":173},[164,285,286],{"class":166,"line":202},[164,287,206],{"emptyLinePlaceholder":205},[164,289,290,292],{"class":166,"line":209},[164,291,220],{"class":219},[164,293,183],{"class":173},[164,295,296,298,300,302,304,307],{"class":166,"line":216},[164,297,228],{"class":189},[164,299,231],{"class":173},[164,301,234],{"class":189},[164,303,69],{"class":237},[164,305,306],{"class":173},"; ",[164,308,309],{"class":212},"/* fallback for older browsers */\n",[164,311,312,314,316,318,321,323],{"class":166,"line":225},[164,313,228],{"class":189},[164,315,231],{"class":173},[164,317,234],{"class":189},[164,319,320],{"class":237},"cqw",[164,322,306],{"class":173},[164,324,325],{"class":212},"/* 100cqw учитывет сколлбар */\n",[164,327,328],{"class":166,"line":243},[164,329,199],{"class":173},[29,331,333],{"id":332},"container-based","Зависящие от размера блока",[16,335,336],{},"Можно использовать единицы измерения, которые будут зависить от размера блока",[62,338,339,344,350,356,362,368],{},[65,340,341,343],{},[20,342,320],{},": 1% of a query container's width",[65,345,346,349],{},[20,347,348],{},"cqh",": 1% of a query container's height",[65,351,352,355],{},[20,353,354],{},"cqi",": 1% of a query container's inline size",[65,357,358,361],{},[20,359,360],{},"cqb",": 1% of a query container's block size",[65,363,364,367],{},[20,365,366],{},"cqmin",": The smaller value of either cqi or cqb",[65,369,370,373],{},[20,371,372],{},"cqmax",": The larger value of either cqi or cqb",[16,375,376,377,380],{},"Чтобы использовать эти единицы измерения, нужно задать ",[20,378,379],{},"container-type"," у родительского контейнера:",[151,382,384,385,392,393],{"summary":383},"Объяснение container-type","  ",[386,387],"img",{"className":388,"src":391},[389,390],"w-full","max-w-lg","https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_logical_properties_and_values/Basic_concepts_of_logical_properties_and_values/mdn-horizontal.png","\n  ",[386,394],{"className":395,"src":396},[389,390],"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_logical_properties_and_values/Basic_concepts_of_logical_properties_and_values/mdn-vertical.png",[155,398,400],{"className":157,"code":399,"language":159,"meta":160,"style":160},".container {\n  container-type: inline-size;\n  container-name: card;\n}\n\n.container-child {\n  width: 100cqw; /* всегда будет того же размера, что и my-container */\n}\n",[20,401,402,409,415,423,427,431,438,453],{"__ignoreMap":160},[164,403,404,407],{"class":166,"line":167},[164,405,406],{"class":219},".container",[164,408,183],{"class":173},[164,410,411,413],{"class":166,"line":177},[164,412,276],{"class":189},[164,414,279],{"class":173},[164,416,417,420],{"class":166,"line":186},[164,418,419],{"class":189},"  container-name",[164,421,422],{"class":173},": card;\n",[164,424,425],{"class":166,"line":196},[164,426,199],{"class":173},[164,428,429],{"class":166,"line":202},[164,430,206],{"emptyLinePlaceholder":205},[164,432,433,436],{"class":166,"line":209},[164,434,435],{"class":219},".container-child",[164,437,183],{"class":173},[164,439,440,442,444,446,448,450],{"class":166,"line":216},[164,441,228],{"class":189},[164,443,231],{"class":173},[164,445,234],{"class":189},[164,447,320],{"class":237},[164,449,306],{"class":173},[164,451,452],{"class":212},"/* всегда будет того же размера, что и my-container */\n",[164,454,455],{"class":166,"line":225},[164,456,199],{"class":173},[16,458,459,461],{},[20,460,320],{}," всегда зависит от ширины контейнера, даже если есть вложенность.",[155,463,466],{"className":464,"code":465,"language":53,"meta":160,"style":160},"language-html shiki shiki-themes github-light github-dark","\u003Cdiv className=\"container\">\n  \u003Cdiv className=\"container-inner\">\n    \u003Cdiv className=\"container-child\">\n      Hi\n    \u003C/div>\n  \u003C/div>\n\u003C/div>\n",[20,467,468,489,505,521,526,535,544],{"__ignoreMap":160},[164,469,470,473,476,479,482,486],{"class":166,"line":167},[164,471,472],{"class":173},"\u003C",[164,474,475],{"class":170},"div",[164,477,478],{"class":219}," className",[164,480,481],{"class":173},"=",[164,483,485],{"class":484},"sZZnC","\"container\"",[164,487,488],{"class":173},">\n",[164,490,491,494,496,498,500,503],{"class":166,"line":177},[164,492,493],{"class":173},"  \u003C",[164,495,475],{"class":170},[164,497,478],{"class":219},[164,499,481],{"class":173},[164,501,502],{"class":484},"\"container-inner\"",[164,504,488],{"class":173},[164,506,507,510,512,514,516,519],{"class":166,"line":186},[164,508,509],{"class":173},"    \u003C",[164,511,475],{"class":170},[164,513,478],{"class":219},[164,515,481],{"class":173},[164,517,518],{"class":484},"\"container-child\"",[164,520,488],{"class":173},[164,522,523],{"class":166,"line":196},[164,524,525],{"class":173},"      Hi\n",[164,527,528,531,533],{"class":166,"line":202},[164,529,530],{"class":173},"    \u003C/",[164,532,475],{"class":170},[164,534,488],{"class":173},[164,536,537,540,542],{"class":166,"line":209},[164,538,539],{"class":173},"  \u003C/",[164,541,475],{"class":170},[164,543,488],{"class":173},[164,545,546,549,551],{"class":166,"line":216},[164,547,548],{"class":173},"\u003C/",[164,550,475],{"class":170},[164,552,488],{"class":173},[155,554,556],{"className":157,"code":555,"language":159,"meta":160,"style":160},".container {\n  width: 400px;\n  height: 400px;\n  background: blueviolet;\n  container-type: inline-size;\n  container-name: card;\n}\n\n.container-inner {\n  width: 300px;\n}\n\n.container-child {\n  width: 100cqw; /* 400px, а не 300px */\n  height: 40px;\n  background: red;\n}\n",[20,557,558,564,577,590,602,608,614,618,622,629,643,648,653,660,676,690,702],{"__ignoreMap":160},[164,559,560,562],{"class":166,"line":167},[164,561,406],{"class":219},[164,563,183],{"class":173},[164,565,566,568,570,573,575],{"class":166,"line":177},[164,567,228],{"class":189},[164,569,231],{"class":173},[164,571,572],{"class":189},"400",[164,574,22],{"class":237},[164,576,240],{"class":173},[164,578,579,582,584,586,588],{"class":166,"line":186},[164,580,581],{"class":189},"  height",[164,583,231],{"class":173},[164,585,572],{"class":189},[164,587,22],{"class":237},[164,589,240],{"class":173},[164,591,592,595,597,600],{"class":166,"line":196},[164,593,594],{"class":189},"  background",[164,596,231],{"class":173},[164,598,599],{"class":189},"blueviolet",[164,601,240],{"class":173},[164,603,604,606],{"class":166,"line":202},[164,605,276],{"class":189},[164,607,279],{"class":173},[164,609,610,612],{"class":166,"line":209},[164,611,419],{"class":189},[164,613,422],{"class":173},[164,615,616],{"class":166,"line":216},[164,617,199],{"class":173},[164,619,620],{"class":166,"line":225},[164,621,206],{"emptyLinePlaceholder":205},[164,623,624,627],{"class":166,"line":243},[164,625,626],{"class":219},".container-inner",[164,628,183],{"class":173},[164,630,632,634,636,639,641],{"class":166,"line":631},10,[164,633,228],{"class":189},[164,635,231],{"class":173},[164,637,638],{"class":189},"300",[164,640,22],{"class":237},[164,642,240],{"class":173},[164,644,646],{"class":166,"line":645},11,[164,647,199],{"class":173},[164,649,651],{"class":166,"line":650},12,[164,652,206],{"emptyLinePlaceholder":205},[164,654,656,658],{"class":166,"line":655},13,[164,657,435],{"class":219},[164,659,183],{"class":173},[164,661,663,665,667,669,671,673],{"class":166,"line":662},14,[164,664,228],{"class":189},[164,666,231],{"class":173},[164,668,234],{"class":189},[164,670,320],{"class":237},[164,672,306],{"class":173},[164,674,675],{"class":212},"/* 400px, а не 300px */\n",[164,677,679,681,683,686,688],{"class":166,"line":678},15,[164,680,581],{"class":189},[164,682,231],{"class":173},[164,684,685],{"class":189},"40",[164,687,22],{"class":237},[164,689,240],{"class":173},[164,691,693,695,697,700],{"class":166,"line":692},16,[164,694,594],{"class":189},[164,696,231],{"class":173},[164,698,699],{"class":189},"red",[164,701,240],{"class":173},[164,703,705],{"class":166,"line":704},17,[164,706,199],{"class":173},[16,708,709],{},"Можно использовать в медиазапросах:",[155,711,713],{"className":157,"code":712,"language":159,"meta":160,"style":160},"@container (min-width: 400px) { /* Если ширина ближайшего контейнера больше 400px */\n  .card h2 {\n    font-size: 2em;\n  }\n}\n\n@container card (min-width: 400px) { /* Если ширина контейнера с именем card больше 400px */\n  .card h2 {\n    font-size: 2em;\n  }\n}\n",[20,714,715,726,736,750,755,759,763,773,781,793,797],{"__ignoreMap":160},[164,716,717,720,723],{"class":166,"line":167},[164,718,719],{"class":237},"@container",[164,721,722],{"class":173}," (min-width: 400px) { ",[164,724,725],{"class":212},"/* Если ширина ближайшего контейнера больше 400px */\n",[164,727,728,731,734],{"class":166,"line":177},[164,729,730],{"class":219},"  .card",[164,732,733],{"class":170}," h2",[164,735,183],{"class":173},[164,737,738,741,743,746,748],{"class":166,"line":186},[164,739,740],{"class":189},"    font-size",[164,742,231],{"class":173},[164,744,745],{"class":189},"2",[164,747,37],{"class":237},[164,749,240],{"class":173},[164,751,752],{"class":166,"line":196},[164,753,754],{"class":173},"  }\n",[164,756,757],{"class":166,"line":202},[164,758,199],{"class":173},[164,760,761],{"class":166,"line":209},[164,762,206],{"emptyLinePlaceholder":205},[164,764,765,767,770],{"class":166,"line":216},[164,766,719],{"class":237},[164,768,769],{"class":173}," card (min-width: 400px) { ",[164,771,772],{"class":212},"/* Если ширина контейнера с именем card больше 400px */\n",[164,774,775,777,779],{"class":166,"line":225},[164,776,730],{"class":219},[164,778,733],{"class":170},[164,780,183],{"class":173},[164,782,783,785,787,789,791],{"class":166,"line":243},[164,784,740],{"class":189},[164,786,231],{"class":173},[164,788,745],{"class":189},[164,790,37],{"class":237},[164,792,240],{"class":173},[164,794,795],{"class":166,"line":631},[164,796,754],{"class":173},[164,798,799],{"class":166,"line":645},[164,800,199],{"class":173},[29,802,804],{"id":803},"aspect-ratio-based","Зависящие от соотношения сторон",[16,806,807,810],{},[20,808,809],{},"aspect-ratio"," - соотношение ширины к высоте, например 1 / 1 - квадрат, а 16 / 9 - прямоугольник",[16,812,813,814,82,817],{},"Можно использовать в медиазапросах, для этого есть ",[20,815,816],{},"min-aspect-ratio",[20,818,819],{},"max-aspect-ratio",[155,821,823],{"className":157,"code":822,"language":159,"meta":160,"style":160},"@media screen and (min-aspect-ratio: 16/10) {\n  /* something for wide screens */\n}\n",[20,824,825,855,860],{"__ignoreMap":160},[164,826,827,830,833,836,839,841,843,846,849,852],{"class":166,"line":167},[164,828,829],{"class":237},"@media",[164,831,832],{"class":189}," screen",[164,834,835],{"class":237}," and",[164,837,838],{"class":173}," (",[164,840,816],{"class":189},[164,842,231],{"class":173},[164,844,845],{"class":189},"16",[164,847,848],{"class":237},"/",[164,850,851],{"class":189},"10",[164,853,854],{"class":173},") {\n",[164,856,857],{"class":166,"line":177},[164,858,859],{"class":212},"  /* something for wide screens */\n",[164,861,862],{"class":166,"line":186},[164,863,199],{"class":173},[11,865,867],{"id":866},"selectors","Селекторы",[155,869,871],{"className":157,"code":870,"language":159,"meta":160,"style":160},"/* По id */\n#foo {}\n\n/* По классу */\n.bar {}\n\n/* По наличию аттрибута */\n.input[type]\n\n/* По значению аттрибута */\n.input[type=\"submit\"]\n\n/* Потомок с классом .bar  внетри элемента с классом .foo */\n.foo .bar {}\n\n/* Элемент с классом .foo И классом .bar */\n.foo.bar {}\n\n/* Непосредственная вложенность - .bar может быть только на первом уровне вложенности */\n.foo > .bar {}\n\n/* Стили для .bar, если он расположен сразу после .foo (сосед) */\n.foo + .bar {}\n\n/* Стили для любого .bar, если он расположен после .foo (но не обязательно сосед)*/\n.foo ~ .bar {}\n",[20,872,873,878,886,890,895,902,906,911,925,929,934,949,953,958,968,972,977,984,989,995,1007,1012,1018,1030,1035,1041],{"__ignoreMap":160},[164,874,875],{"class":166,"line":167},[164,876,877],{"class":212},"/* По id */\n",[164,879,880,883],{"class":166,"line":177},[164,881,882],{"class":219},"#foo",[164,884,885],{"class":173}," {}\n",[164,887,888],{"class":166,"line":186},[164,889,206],{"emptyLinePlaceholder":205},[164,891,892],{"class":166,"line":196},[164,893,894],{"class":212},"/* По классу */\n",[164,896,897,900],{"class":166,"line":202},[164,898,899],{"class":219},".bar",[164,901,885],{"class":173},[164,903,904],{"class":166,"line":209},[164,905,206],{"emptyLinePlaceholder":205},[164,907,908],{"class":166,"line":216},[164,909,910],{"class":212},"/* По наличию аттрибута */\n",[164,912,913,916,919,922],{"class":166,"line":225},[164,914,915],{"class":219},".input",[164,917,918],{"class":173},"[",[164,920,921],{"class":219},"type",[164,923,924],{"class":173},"]\n",[164,926,927],{"class":166,"line":243},[164,928,206],{"emptyLinePlaceholder":205},[164,930,931],{"class":166,"line":631},[164,932,933],{"class":212},"/* По значению аттрибута */\n",[164,935,936,938,940,942,944,947],{"class":166,"line":645},[164,937,915],{"class":219},[164,939,918],{"class":173},[164,941,921],{"class":219},[164,943,481],{"class":237},[164,945,946],{"class":484},"\"submit\"",[164,948,924],{"class":173},[164,950,951],{"class":166,"line":650},[164,952,206],{"emptyLinePlaceholder":205},[164,954,955],{"class":166,"line":655},[164,956,957],{"class":212},"/* Потомок с классом .bar  внетри элемента с классом .foo */\n",[164,959,960,963,966],{"class":166,"line":662},[164,961,962],{"class":219},".foo",[164,964,965],{"class":219}," .bar",[164,967,885],{"class":173},[164,969,970],{"class":166,"line":678},[164,971,206],{"emptyLinePlaceholder":205},[164,973,974],{"class":166,"line":692},[164,975,976],{"class":212},"/* Элемент с классом .foo И классом .bar */\n",[164,978,979,982],{"class":166,"line":704},[164,980,981],{"class":219},".foo.bar",[164,983,885],{"class":173},[164,985,987],{"class":166,"line":986},18,[164,988,206],{"emptyLinePlaceholder":205},[164,990,992],{"class":166,"line":991},19,[164,993,994],{"class":212},"/* Непосредственная вложенность - .bar может быть только на первом уровне вложенности */\n",[164,996,998,1000,1003,1005],{"class":166,"line":997},20,[164,999,962],{"class":219},[164,1001,1002],{"class":237}," >",[164,1004,965],{"class":219},[164,1006,885],{"class":173},[164,1008,1010],{"class":166,"line":1009},21,[164,1011,206],{"emptyLinePlaceholder":205},[164,1013,1015],{"class":166,"line":1014},22,[164,1016,1017],{"class":212},"/* Стили для .bar, если он расположен сразу после .foo (сосед) */\n",[164,1019,1021,1023,1026,1028],{"class":166,"line":1020},23,[164,1022,962],{"class":219},[164,1024,1025],{"class":237}," +",[164,1027,965],{"class":219},[164,1029,885],{"class":173},[164,1031,1033],{"class":166,"line":1032},24,[164,1034,206],{"emptyLinePlaceholder":205},[164,1036,1038],{"class":166,"line":1037},25,[164,1039,1040],{"class":212},"/* Стили для любого .bar, если он расположен после .foo (но не обязательно сосед)*/\n",[164,1042,1044,1046,1049,1051],{"class":166,"line":1043},26,[164,1045,962],{"class":219},[164,1047,1048],{"class":237}," ~",[164,1050,965],{"class":219},[164,1052,885],{"class":173},[11,1054,1056],{"id":1055},"pseudo-classes","Псевдоклассы",[16,1058,1059],{},"Псевдокласс - ключевое слово, добавленное к селектору для уточнения его состояния.",[155,1061,1063],{"className":157,"code":1062,"language":159,"meta":160,"style":160},"selector:pseudo-class {\n  property: value;\n}\n",[20,1064,1065,1075,1083],{"__ignoreMap":160},[164,1066,1067,1070,1073],{"class":166,"line":167},[164,1068,1069],{"class":173},"selector:",[164,1071,1072],{"class":170},"pseudo-class",[164,1074,183],{"class":173},[164,1076,1077,1080],{"class":166,"line":177},[164,1078,1079],{"class":189},"  property",[164,1081,1082],{"class":173},": value;\n",[164,1084,1085],{"class":166,"line":186},[164,1086,199],{"class":173},[16,1088,1089],{},"Самые полезные:",[62,1091,1092,1098,1104,1110,1116,1136,1142,1152,1158,1166,1172,1180,1186,1192,1198,1204,1216,1222],{},[65,1093,1094,1097],{},[20,1095,1096],{},":hover"," - при наведении",[65,1099,1100,1103],{},[20,1101,1102],{},":focus"," - при фокусе (tab)",[65,1105,1106,1109],{},[20,1107,1108],{},":focus-within"," - при фокусе этого элемента или его детей",[65,1111,1112,1115],{},[20,1113,1114],{},":active"," - при активации, например при зажатии ЛКМ",[65,1117,1118,1121,1122,82,1125,1128,1129,1132,1133],{},[20,1119,1120],{},":checked"," - для выбранных ",[20,1123,1124],{},"\u003Cinput type=\"radio\">",[20,1126,1127],{},"\u003Cinput type=\"checkbox\">"," или ",[20,1130,1131],{},"\u003Coption>"," внутри ",[20,1134,1135],{},"\u003Cselect>",[65,1137,1138,1141],{},[20,1139,1140],{},":disabled"," - для кнопок",[65,1143,1144,1147,1148,1151],{},[20,1145,1146],{},":empty"," - когда у элемент пуст (нет children), можно применить ",[20,1149,1150],{},".element:empty { display: none }"," вместо условного рендеринга",[65,1153,1154,1157],{},[20,1155,1156],{},":first-child"," - первый ребенок своего родителя",[65,1159,1160,1163,1164],{},[20,1161,1162],{},":first-of-type"," - первый ребенок такого типа, например первый ",[20,1165,475],{},[65,1167,1168,1171],{},[20,1169,1170],{},":last-child"," - последний ребенок своего родителя",[65,1173,1174,1177,1178],{},[20,1175,1176],{},":last-of-type"," - последний ребенок такого типа, например последний ",[20,1179,475],{},[65,1181,1182,1185],{},[20,1183,1184],{},":nth-child()"," - какой-то конкетный ребенок (1-й, второй, третий, четный, нечетный)",[65,1187,1188,1191],{},[20,1189,1190],{},":nth-of-type()"," - какой-то конкетный элемент такого типа",[65,1193,1194,1197],{},[20,1195,1196],{},":only-child"," - единственный ребенок",[65,1199,1200,1203],{},[20,1201,1202],{},":only-of-type"," - единственный элемент такого типа",[65,1205,1206,82,1209,82,1212,1215],{},[20,1207,1208],{},":valid",[20,1210,1211],{},":optional",[20,1213,1214],{},":required"," - для валидации форм",[65,1217,1218,1221],{},[20,1219,1220],{},":visited"," - для посещенных ссылок, рудимент если честно",[65,1223,1224,1227],{},[20,1225,1226],{},":is()"," - позволяет проще писать сложный CSS",[155,1229,1231],{"className":157,"code":1230,"language":159,"meta":160,"style":160},".card h1,\n.card h2,\n.card h3 {\n  color: black;\n}\n\n.card :is(h1, h2, h3) {\n  color: black;\n}\n\na:hover,\na:focus {\n  color: purple;\n}\n\na:is(:hover, :focus) {\n  color: purple;\n}\n\n",[20,1232,1233,1243,1251,1260,1272,1276,1280,1303,1313,1317,1321,1330,1338,1349,1353,1357,1374,1384],{"__ignoreMap":160},[164,1234,1235,1238,1241],{"class":166,"line":167},[164,1236,1237],{"class":219},".card",[164,1239,1240],{"class":170}," h1",[164,1242,174],{"class":173},[164,1244,1245,1247,1249],{"class":166,"line":177},[164,1246,1237],{"class":219},[164,1248,733],{"class":170},[164,1250,174],{"class":173},[164,1252,1253,1255,1258],{"class":166,"line":186},[164,1254,1237],{"class":219},[164,1256,1257],{"class":170}," h3",[164,1259,183],{"class":173},[164,1261,1262,1265,1267,1270],{"class":166,"line":196},[164,1263,1264],{"class":189},"  color",[164,1266,231],{"class":173},[164,1268,1269],{"class":189},"black",[164,1271,240],{"class":173},[164,1273,1274],{"class":166,"line":202},[164,1275,199],{"class":173},[164,1277,1278],{"class":166,"line":209},[164,1279,206],{"emptyLinePlaceholder":205},[164,1281,1282,1284,1287,1290,1293,1295,1297,1299,1301],{"class":166,"line":216},[164,1283,1237],{"class":219},[164,1285,1286],{"class":219}," :is",[164,1288,1289],{"class":173},"(",[164,1291,1292],{"class":170},"h1",[164,1294,82],{"class":173},[164,1296,11],{"class":170},[164,1298,82],{"class":173},[164,1300,29],{"class":170},[164,1302,854],{"class":173},[164,1304,1305,1307,1309,1311],{"class":166,"line":225},[164,1306,1264],{"class":189},[164,1308,231],{"class":173},[164,1310,1269],{"class":189},[164,1312,240],{"class":173},[164,1314,1315],{"class":166,"line":243},[164,1316,199],{"class":173},[164,1318,1319],{"class":166,"line":631},[164,1320,206],{"emptyLinePlaceholder":205},[164,1322,1323,1326,1328],{"class":166,"line":645},[164,1324,1325],{"class":170},"a",[164,1327,1096],{"class":219},[164,1329,174],{"class":173},[164,1331,1332,1334,1336],{"class":166,"line":650},[164,1333,1325],{"class":170},[164,1335,1102],{"class":219},[164,1337,183],{"class":173},[164,1339,1340,1342,1344,1347],{"class":166,"line":655},[164,1341,1264],{"class":189},[164,1343,231],{"class":173},[164,1345,1346],{"class":189},"purple",[164,1348,240],{"class":173},[164,1350,1351],{"class":166,"line":662},[164,1352,199],{"class":173},[164,1354,1355],{"class":166,"line":678},[164,1356,206],{"emptyLinePlaceholder":205},[164,1358,1359,1361,1364,1366,1368,1370,1372],{"class":166,"line":692},[164,1360,1325],{"class":170},[164,1362,1363],{"class":219},":is",[164,1365,1289],{"class":173},[164,1367,1096],{"class":219},[164,1369,82],{"class":173},[164,1371,1102],{"class":219},[164,1373,854],{"class":173},[164,1375,1376,1378,1380,1382],{"class":166,"line":704},[164,1377,1264],{"class":189},[164,1379,231],{"class":173},[164,1381,1346],{"class":189},[164,1383,240],{"class":173},[164,1385,1386],{"class":166,"line":986},[164,1387,199],{"class":173},[62,1389,1390,1399],{},[65,1391,1392,1395,1396,1398],{},[20,1393,1394],{},":where()"," похож на ",[20,1397,1363],{},", но позволяет убить специфичность, идеально для reset",[65,1400,1401,1404],{},[20,1402,1403],{},":has()"," - позволяет проверить наличие у родителя наличие какого-то селектора внутри и выбрать именно родителя",[155,1406,1408],{"className":157,"code":1407,"language":159,"meta":160,"style":160},"/* Если в форме есть невалидный инпут - красим submit кнопку в красный  */\n.my-form:has(input:invalid) button[type=\"submit\"]{\n  background: red;\n}\n\n/*  Если есть открытая модалка - меняем цвет фона */\nhtml:has(.modal.open) {\n  background: red;\n}\n",[20,1409,1410,1415,1445,1455,1459,1463,1468,1482,1492],{"__ignoreMap":160},[164,1411,1412],{"class":166,"line":167},[164,1413,1414],{"class":212},"/* Если в форме есть невалидный инпут - красим submit кнопку в красный  */\n",[164,1416,1417,1420,1422,1425,1428,1431,1434,1436,1438,1440,1442],{"class":166,"line":177},[164,1418,1419],{"class":219},".my-form:has",[164,1421,1289],{"class":173},[164,1423,1424],{"class":170},"input",[164,1426,1427],{"class":219},":invalid",[164,1429,1430],{"class":173},") ",[164,1432,1433],{"class":170},"button",[164,1435,918],{"class":173},[164,1437,921],{"class":219},[164,1439,481],{"class":237},[164,1441,946],{"class":484},[164,1443,1444],{"class":173},"]{\n",[164,1446,1447,1449,1451,1453],{"class":166,"line":186},[164,1448,594],{"class":189},[164,1450,231],{"class":173},[164,1452,699],{"class":189},[164,1454,240],{"class":173},[164,1456,1457],{"class":166,"line":196},[164,1458,199],{"class":173},[164,1460,1461],{"class":166,"line":202},[164,1462,206],{"emptyLinePlaceholder":205},[164,1464,1465],{"class":166,"line":209},[164,1466,1467],{"class":212},"/*  Если есть открытая модалка - меняем цвет фона */\n",[164,1469,1470,1472,1475,1477,1480],{"class":166,"line":216},[164,1471,53],{"class":170},[164,1473,1474],{"class":219},":has",[164,1476,1289],{"class":173},[164,1478,1479],{"class":219},".modal.open",[164,1481,854],{"class":173},[164,1483,1484,1486,1488,1490],{"class":166,"line":225},[164,1485,594],{"class":189},[164,1487,231],{"class":173},[164,1489,699],{"class":189},[164,1491,240],{"class":173},[164,1493,1494],{"class":166,"line":243},[164,1495,199],{"class":173},[11,1497,1499],{"id":1498},"pseudo-elements","Псевдоэлементы",[16,1501,1502],{},"Псевдоэлементы не существуют в HTML разметке, они создаются только с помощью CSS,\nих нельзя создать, выбрать(querySelector-ом) и менять при помощи JS.",[62,1504,1505,1511,1517,1523],{},[65,1506,1507,1510],{},[20,1508,1509],{},"::after"," - добавить какой-то контент после элемента (создать псевдоэлемент, который является последним потомком)",[65,1512,1513,1516],{},[20,1514,1515],{},"::before"," - до (создать псевдоэлемент, который будет первым потомком)",[65,1518,1519,1522],{},[20,1520,1521],{},"::first-letter"," - стилизовать первую букву",[65,1524,1525,1528],{},[20,1526,1527],{},"::first-line"," - стилизовать первую линию",[1530,1531,1532],"style",{},"html pre.shiki code .s9eBZ, html code.shiki .s9eBZ{--shiki-default:#22863A;--shiki-dark:#85E89D}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}",{"title":160,"searchDepth":177,"depth":177,"links":1534},[1535,1541,1542,1543],{"id":13,"depth":177,"text":14,"children":1536},[1537,1538,1539,1540],{"id":31,"depth":186,"text":32},{"id":56,"depth":186,"text":57},{"id":332,"depth":186,"text":333},{"id":803,"depth":186,"text":804},{"id":866,"depth":177,"text":867},{"id":1055,"depth":177,"text":1056},{"id":1498,"depth":177,"text":1499},"2024-04-28","И продвинутые CSS штуки","md",{},"/blog/advanced-css","/images/advanced-css-preview.png",{"title":6,"description":1545},"blog/advanced-css",[159,1553,1554],"cheatsheet","interview","G8UEnfTE622H3qDDOjdMIvPZsUXF_IfTZbnRf-JWOXY",{"id":1557,"title":1558,"body":1559,"date":7476,"description":7477,"extension":1546,"meta":7478,"navigation":205,"path":7479,"previewImg":7480,"seo":7481,"stem":7482,"topics":7483,"__hash__":7488},"articles/blog/implementing-own-redux-toolkit.md","Пишем свой redux-toolkit",{"type":8,"value":1560,"toc":7466},[1561,1565,1585,1613,1617,1620,2127,2131,2137,2642,2645,2649,2658,2725,2728,2854,2857,2860,2863,2954,2957,2966,2972,2981,3696,3699,3708,3728,3731,3950,3956,3960,3972,4021,4039,4046,4126,4128,4135,4142,4145,4209,4216,4219,4250,4253,4264,4270,4492,4496,4503,5060,5105,5109,6815,7106,7183,7463],[11,1562,1564],{"id":1563},"motivation","Мотивация",[16,1566,1567,1568,1571,1572,82,1575,1128,1578,82,1581,1584],{},"Как правило мы задумываемся о глобальном стейте, когда приложение обрастает какой-то сложной бизнес логикой и прокидывать пропсы становится больно.\nВ случае с более менее легкой бизнес логикой можно обойтись ",[20,1569,1570],{},"React Context",". Но когда уже не хватает и его - на помощь приходит стейт менеджер,\nнапример редакс. Обычно в качестве примера использования редакса показывают TODO лист, что на мой взгляд тупо - мне трудно представить\nсебе туду лист, который был бы достаточно сложен, что для него бы мог потребоваться глобальный стейт.\nСкорее вы будете хранить в стейте профиль авторизованного юзера или какие-то сложные структуры,\nкоторые нужно уметь находить разными способами, скажем ",[20,1573,1574],{},"profileById",[20,1576,1577],{},"profileByUsername",[20,1579,1580],{},"noteIdsByWeekTs",[20,1582,1583],{},"noteIdsByDayTs",".",[16,1586,1587,1588,1595,1596,1600,1601,1604,1605,1608,1609,1612],{},"Глобальный стейт решает 3 основный задачи - хранить, записывать и доставать данные. Чем удобнее, тем лучше.\nRedux предлагает редьюсеры, экшены и селекторы для этих задач.\nЕсли говорить про ",[1325,1589,1594],{"href":1590,"rel":1591,"target":1593},"https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers",[1592],"nofollow","_blank","стандартную реализацию",",\nто про про удобство говорить не приходится, switch case конструкция для экшенов - это боль.\nРазработчики редакса тоже так подумали и изобрели красивую обертку под названием ",[1597,1598,1599],"strong",{},"Redux Toolkit.","\nОднако они умудрились превратить ",[1597,1602,1603],{},"3.33 kB"," в ",[1597,1606,1607],{},"37 kB"," и это наталкивает на мысль, что они напихали слишком много лишнего.\nВозможно, им следовало бы остановиться на методе ",[20,1610,1611],{},"createSlice",",\nкоторый позволяет создавать редьюсер и экшены без лишней головной боли, а так же хуке useSlectors.\nИменно эти вещи я и хочу реализовать самостоятельно. Это будет интересно еще и точки зрения типизации.",[11,1614,1616],{"id":1615},"api","API",[16,1618,1619],{},"Для начала нужно прикинуть, что именно мы хотим получить на выходе.\nВ рамках данной статьи я хочу реализовать метод createSlice, где можно было бы создать экшены и селекторы,\nа так же useSelector для доступа к данным из реакт компонента и dispatch для вызова экшенов",[155,1621,1626],{"className":1622,"code":1623,"filename":1624,"language":1625,"meta":160,"style":160},"language-ts shiki shiki-themes github-light github-dark","\ntype User = {\n  id: string;\n  username: string;\n  displayName: string;\n}\n\nexport const usersSlice = createSlice({\n  name: 'users',\n  defaultState: {\n    userById: {} as Record\u003Cstring, User>,\n    usernameById: {} as Record\u003Cstring, string>,\n  },\n  actions: {\n    addUser: (state, user: User) => {\n      // state должен иметь тот же тип, что и defaultState\n      state.userById[user.id] = user;\n      state.usernameById[user.username] = user.id;\n    },\n    deleteUser: (state, userId: string) => {\n      const user = state.userById[userId];\n      delete state.usernameById[user.username];\n      delete state.userById[userId];\n    }\n  },\n  selectors: {\n    selectUserByUsername: (state, username: string) => state.userById[state.usernameById[username]],\n  }\n});\n\nusersSlice.actions;// экшены\nusersSlice.selectors;// селекторы\n\n// ...\n\n// SomeComponent.tsx\n\n// user Должен иметь тип User\nconst user = useSelector(state => state.selectUserByUsername(state.users, 'someUsername'));\n\nconst addUser = useCallback(() => {\n  dispatch(\n    // Аргументом addUser должен быть объект User\n    usersSlice.actions.addUser({\n      id: '2',\n      username: 'username2',\n      displayName: 'some display name',\n    })\n  );\n}, [dispatch]);\n","usersSlice.ts","ts",[20,1627,1628,1632,1644,1658,1669,1680,1684,1688,1707,1717,1722,1746,1765,1770,1775,1802,1807,1817,1827,1832,1856,1869,1877,1883,1888,1892,1897,1923,1928,1934,1939,1948,1957,1962,1968,1973,1979,1984,1990,2025,2030,2050,2059,2065,2076,2087,2098,2109,2115,2121],{"__ignoreMap":160},[164,1629,1630],{"class":166,"line":167},[164,1631,206],{"emptyLinePlaceholder":205},[164,1633,1634,1636,1639,1642],{"class":166,"line":177},[164,1635,921],{"class":237},[164,1637,1638],{"class":219}," User",[164,1640,1641],{"class":237}," =",[164,1643,183],{"class":173},[164,1645,1646,1650,1653,1656],{"class":166,"line":186},[164,1647,1649],{"class":1648},"s4XuR","  id",[164,1651,1652],{"class":237},":",[164,1654,1655],{"class":189}," string",[164,1657,240],{"class":173},[164,1659,1660,1663,1665,1667],{"class":166,"line":196},[164,1661,1662],{"class":1648},"  username",[164,1664,1652],{"class":237},[164,1666,1655],{"class":189},[164,1668,240],{"class":173},[164,1670,1671,1674,1676,1678],{"class":166,"line":202},[164,1672,1673],{"class":1648},"  displayName",[164,1675,1652],{"class":237},[164,1677,1655],{"class":189},[164,1679,240],{"class":173},[164,1681,1682],{"class":166,"line":209},[164,1683,199],{"class":173},[164,1685,1686],{"class":166,"line":216},[164,1687,206],{"emptyLinePlaceholder":205},[164,1689,1690,1693,1696,1699,1701,1704],{"class":166,"line":225},[164,1691,1692],{"class":237},"export",[164,1694,1695],{"class":237}," const",[164,1697,1698],{"class":189}," usersSlice",[164,1700,1641],{"class":237},[164,1702,1703],{"class":219}," createSlice",[164,1705,1706],{"class":173},"({\n",[164,1708,1709,1712,1715],{"class":166,"line":243},[164,1710,1711],{"class":173},"  name: ",[164,1713,1714],{"class":484},"'users'",[164,1716,174],{"class":173},[164,1718,1719],{"class":166,"line":631},[164,1720,1721],{"class":173},"  defaultState: {\n",[164,1723,1724,1727,1730,1733,1735,1738,1740,1743],{"class":166,"line":645},[164,1725,1726],{"class":173},"    userById: {} ",[164,1728,1729],{"class":237},"as",[164,1731,1732],{"class":219}," Record",[164,1734,472],{"class":173},[164,1736,1737],{"class":189},"string",[164,1739,82],{"class":173},[164,1741,1742],{"class":219},"User",[164,1744,1745],{"class":173},">,\n",[164,1747,1748,1751,1753,1755,1757,1759,1761,1763],{"class":166,"line":650},[164,1749,1750],{"class":173},"    usernameById: {} ",[164,1752,1729],{"class":237},[164,1754,1732],{"class":219},[164,1756,472],{"class":173},[164,1758,1737],{"class":189},[164,1760,82],{"class":173},[164,1762,1737],{"class":189},[164,1764,1745],{"class":173},[164,1766,1767],{"class":166,"line":655},[164,1768,1769],{"class":173},"  },\n",[164,1771,1772],{"class":166,"line":662},[164,1773,1774],{"class":173},"  actions: {\n",[164,1776,1777,1780,1783,1786,1788,1791,1793,1795,1797,1800],{"class":166,"line":678},[164,1778,1779],{"class":219},"    addUser",[164,1781,1782],{"class":173},": (",[164,1784,1785],{"class":1648},"state",[164,1787,82],{"class":173},[164,1789,1790],{"class":1648},"user",[164,1792,1652],{"class":237},[164,1794,1638],{"class":219},[164,1796,1430],{"class":173},[164,1798,1799],{"class":237},"=>",[164,1801,183],{"class":173},[164,1803,1804],{"class":166,"line":692},[164,1805,1806],{"class":212},"      // state должен иметь тот же тип, что и defaultState\n",[164,1808,1809,1812,1814],{"class":166,"line":704},[164,1810,1811],{"class":173},"      state.userById[user.id] ",[164,1813,481],{"class":237},[164,1815,1816],{"class":173}," user;\n",[164,1818,1819,1822,1824],{"class":166,"line":986},[164,1820,1821],{"class":173},"      state.usernameById[user.username] ",[164,1823,481],{"class":237},[164,1825,1826],{"class":173}," user.id;\n",[164,1828,1829],{"class":166,"line":991},[164,1830,1831],{"class":173},"    },\n",[164,1833,1834,1837,1839,1841,1843,1846,1848,1850,1852,1854],{"class":166,"line":997},[164,1835,1836],{"class":219},"    deleteUser",[164,1838,1782],{"class":173},[164,1840,1785],{"class":1648},[164,1842,82],{"class":173},[164,1844,1845],{"class":1648},"userId",[164,1847,1652],{"class":237},[164,1849,1655],{"class":189},[164,1851,1430],{"class":173},[164,1853,1799],{"class":237},[164,1855,183],{"class":173},[164,1857,1858,1861,1864,1866],{"class":166,"line":1009},[164,1859,1860],{"class":237},"      const",[164,1862,1863],{"class":189}," user",[164,1865,1641],{"class":237},[164,1867,1868],{"class":173}," state.userById[userId];\n",[164,1870,1871,1874],{"class":166,"line":1014},[164,1872,1873],{"class":237},"      delete",[164,1875,1876],{"class":173}," state.usernameById[user.username];\n",[164,1878,1879,1881],{"class":166,"line":1020},[164,1880,1873],{"class":237},[164,1882,1868],{"class":173},[164,1884,1885],{"class":166,"line":1032},[164,1886,1887],{"class":173},"    }\n",[164,1889,1890],{"class":166,"line":1037},[164,1891,1769],{"class":173},[164,1893,1894],{"class":166,"line":1043},[164,1895,1896],{"class":173},"  selectors: {\n",[164,1898,1900,1903,1905,1907,1909,1912,1914,1916,1918,1920],{"class":166,"line":1899},27,[164,1901,1902],{"class":219},"    selectUserByUsername",[164,1904,1782],{"class":173},[164,1906,1785],{"class":1648},[164,1908,82],{"class":173},[164,1910,1911],{"class":1648},"username",[164,1913,1652],{"class":237},[164,1915,1655],{"class":189},[164,1917,1430],{"class":173},[164,1919,1799],{"class":237},[164,1921,1922],{"class":173}," state.userById[state.usernameById[username]],\n",[164,1924,1926],{"class":166,"line":1925},28,[164,1927,754],{"class":173},[164,1929,1931],{"class":166,"line":1930},29,[164,1932,1933],{"class":173},"});\n",[164,1935,1937],{"class":166,"line":1936},30,[164,1938,206],{"emptyLinePlaceholder":205},[164,1940,1942,1945],{"class":166,"line":1941},31,[164,1943,1944],{"class":173},"usersSlice.actions;",[164,1946,1947],{"class":212},"// экшены\n",[164,1949,1951,1954],{"class":166,"line":1950},32,[164,1952,1953],{"class":173},"usersSlice.selectors;",[164,1955,1956],{"class":212},"// селекторы\n",[164,1958,1960],{"class":166,"line":1959},33,[164,1961,206],{"emptyLinePlaceholder":205},[164,1963,1965],{"class":166,"line":1964},34,[164,1966,1967],{"class":212},"// ...\n",[164,1969,1971],{"class":166,"line":1970},35,[164,1972,206],{"emptyLinePlaceholder":205},[164,1974,1976],{"class":166,"line":1975},36,[164,1977,1978],{"class":212},"// SomeComponent.tsx\n",[164,1980,1982],{"class":166,"line":1981},37,[164,1983,206],{"emptyLinePlaceholder":205},[164,1985,1987],{"class":166,"line":1986},38,[164,1988,1989],{"class":212},"// user Должен иметь тип User\n",[164,1991,1993,1996,1998,2000,2003,2005,2007,2010,2013,2016,2019,2022],{"class":166,"line":1992},39,[164,1994,1995],{"class":237},"const",[164,1997,1863],{"class":189},[164,1999,1641],{"class":237},[164,2001,2002],{"class":219}," useSelector",[164,2004,1289],{"class":173},[164,2006,1785],{"class":1648},[164,2008,2009],{"class":237}," =>",[164,2011,2012],{"class":173}," state.",[164,2014,2015],{"class":219},"selectUserByUsername",[164,2017,2018],{"class":173},"(state.users, ",[164,2020,2021],{"class":484},"'someUsername'",[164,2023,2024],{"class":173},"));\n",[164,2026,2028],{"class":166,"line":2027},40,[164,2029,206],{"emptyLinePlaceholder":205},[164,2031,2033,2035,2038,2040,2043,2046,2048],{"class":166,"line":2032},41,[164,2034,1995],{"class":237},[164,2036,2037],{"class":189}," addUser",[164,2039,1641],{"class":237},[164,2041,2042],{"class":219}," useCallback",[164,2044,2045],{"class":173},"(() ",[164,2047,1799],{"class":237},[164,2049,183],{"class":173},[164,2051,2053,2056],{"class":166,"line":2052},42,[164,2054,2055],{"class":219},"  dispatch",[164,2057,2058],{"class":173},"(\n",[164,2060,2062],{"class":166,"line":2061},43,[164,2063,2064],{"class":212},"    // Аргументом addUser должен быть объект User\n",[164,2066,2068,2071,2074],{"class":166,"line":2067},44,[164,2069,2070],{"class":173},"    usersSlice.actions.",[164,2072,2073],{"class":219},"addUser",[164,2075,1706],{"class":173},[164,2077,2079,2082,2085],{"class":166,"line":2078},45,[164,2080,2081],{"class":173},"      id: ",[164,2083,2084],{"class":484},"'2'",[164,2086,174],{"class":173},[164,2088,2090,2093,2096],{"class":166,"line":2089},46,[164,2091,2092],{"class":173},"      username: ",[164,2094,2095],{"class":484},"'username2'",[164,2097,174],{"class":173},[164,2099,2101,2104,2107],{"class":166,"line":2100},47,[164,2102,2103],{"class":173},"      displayName: ",[164,2105,2106],{"class":484},"'some display name'",[164,2108,174],{"class":173},[164,2110,2112],{"class":166,"line":2111},48,[164,2113,2114],{"class":173},"    })\n",[164,2116,2118],{"class":166,"line":2117},49,[164,2119,2120],{"class":173},"  );\n",[164,2122,2124],{"class":166,"line":2123},50,[164,2125,2126],{"class":173},"}, [dispatch]);\n",[11,2128,2130],{"id":2129},"implementation","Реализация",[16,2132,2133,2134,2136],{},"Для начала определимся с параметрами ",[20,2135,1611],{}," и набросаем небольшой черновик:",[155,2138,2140],{"className":1622,"code":2139,"language":1625,"meta":160,"style":160},"type SliceActionCreator\u003CState, Payload = any> = (\n  state: State,\n  payload: Payload\n) => void;\n\ntype SliceSelector\u003CState, Payload = unknown, SelectorReturn = unknown> = (\n  state: State,\n  payload: Payload\n) => SelectorReturn;\n\ntype CreateSliceProps\u003C\n  Name extends string,\n  State extends Record\u003Cstring, unknown>,\n  Actions extends Record\u003Cstring, SliceActionCreator\u003CState>>,\n  Selectors extends Record\u003Cstring, SliceSelector\u003CState>>\n> = {\n  name: Name;\n  actions: Actions;\n  defaultState: State;\n  selectors: Selectors;\n};\n\nexport const createSlice = \u003C\n  Name extends string,\n  State extends Record\u003Cstring, unknown>,\n  Actions extends Record\u003Cstring, SliceActionCreator\u003CState>>,\n  Selectors extends Record\u003Cstring, SliceSelector\u003CState>>\n>({\n    name,\n    actions,\n    defaultState,\n    selectors,\n  }: CreateSliceProps\u003CName, State, Actions, Selectors>) => {\n  let sliceActions; // TODO\n  let reducer; // TODO\n  let sliceSelectors; // TODO\n\n  return {\n    reducer,\n    selectors: sliceSelectors,\n    actions: sliceActions,\n  };\n};\n\n",[20,2141,2142,2172,2184,2194,2205,2209,2244,2254,2262,2273,2277,2287,2299,2319,2344,2369,2377,2389,2401,2412,2424,2429,2433,2446,2456,2474,2496,2518,2523,2528,2533,2538,2543,2578,2589,2598,2607,2611,2618,2623,2628,2633,2638],{"__ignoreMap":160},[164,2143,2144,2146,2149,2151,2154,2156,2159,2161,2164,2167,2169],{"class":166,"line":167},[164,2145,921],{"class":237},[164,2147,2148],{"class":219}," SliceActionCreator",[164,2150,472],{"class":173},[164,2152,2153],{"class":219},"State",[164,2155,82],{"class":173},[164,2157,2158],{"class":219},"Payload",[164,2160,1641],{"class":237},[164,2162,2163],{"class":189}," any",[164,2165,2166],{"class":173},"> ",[164,2168,481],{"class":237},[164,2170,2171],{"class":173}," (\n",[164,2173,2174,2177,2179,2182],{"class":166,"line":177},[164,2175,2176],{"class":1648},"  state",[164,2178,1652],{"class":237},[164,2180,2181],{"class":219}," State",[164,2183,174],{"class":173},[164,2185,2186,2189,2191],{"class":166,"line":186},[164,2187,2188],{"class":1648},"  payload",[164,2190,1652],{"class":237},[164,2192,2193],{"class":219}," Payload\n",[164,2195,2196,2198,2200,2203],{"class":166,"line":196},[164,2197,1430],{"class":173},[164,2199,1799],{"class":237},[164,2201,2202],{"class":189}," void",[164,2204,240],{"class":173},[164,2206,2207],{"class":166,"line":202},[164,2208,206],{"emptyLinePlaceholder":205},[164,2210,2211,2213,2216,2218,2220,2222,2224,2226,2229,2231,2234,2236,2238,2240,2242],{"class":166,"line":209},[164,2212,921],{"class":237},[164,2214,2215],{"class":219}," SliceSelector",[164,2217,472],{"class":173},[164,2219,2153],{"class":219},[164,2221,82],{"class":173},[164,2223,2158],{"class":219},[164,2225,1641],{"class":237},[164,2227,2228],{"class":189}," unknown",[164,2230,82],{"class":173},[164,2232,2233],{"class":219},"SelectorReturn",[164,2235,1641],{"class":237},[164,2237,2228],{"class":189},[164,2239,2166],{"class":173},[164,2241,481],{"class":237},[164,2243,2171],{"class":173},[164,2245,2246,2248,2250,2252],{"class":166,"line":216},[164,2247,2176],{"class":1648},[164,2249,1652],{"class":237},[164,2251,2181],{"class":219},[164,2253,174],{"class":173},[164,2255,2256,2258,2260],{"class":166,"line":225},[164,2257,2188],{"class":1648},[164,2259,1652],{"class":237},[164,2261,2193],{"class":219},[164,2263,2264,2266,2268,2271],{"class":166,"line":243},[164,2265,1430],{"class":173},[164,2267,1799],{"class":237},[164,2269,2270],{"class":219}," SelectorReturn",[164,2272,240],{"class":173},[164,2274,2275],{"class":166,"line":631},[164,2276,206],{"emptyLinePlaceholder":205},[164,2278,2279,2281,2284],{"class":166,"line":645},[164,2280,921],{"class":237},[164,2282,2283],{"class":219}," CreateSliceProps",[164,2285,2286],{"class":173},"\u003C\n",[164,2288,2289,2292,2295,2297],{"class":166,"line":650},[164,2290,2291],{"class":219},"  Name",[164,2293,2294],{"class":237}," extends",[164,2296,1655],{"class":189},[164,2298,174],{"class":173},[164,2300,2301,2304,2306,2308,2310,2312,2314,2317],{"class":166,"line":655},[164,2302,2303],{"class":219},"  State",[164,2305,2294],{"class":237},[164,2307,1732],{"class":219},[164,2309,472],{"class":173},[164,2311,1737],{"class":189},[164,2313,82],{"class":173},[164,2315,2316],{"class":189},"unknown",[164,2318,1745],{"class":173},[164,2320,2321,2324,2326,2328,2330,2332,2334,2337,2339,2341],{"class":166,"line":662},[164,2322,2323],{"class":219},"  Actions",[164,2325,2294],{"class":237},[164,2327,1732],{"class":219},[164,2329,472],{"class":173},[164,2331,1737],{"class":189},[164,2333,82],{"class":173},[164,2335,2336],{"class":219},"SliceActionCreator",[164,2338,472],{"class":173},[164,2340,2153],{"class":219},[164,2342,2343],{"class":173},">>,\n",[164,2345,2346,2349,2351,2353,2355,2357,2359,2362,2364,2366],{"class":166,"line":678},[164,2347,2348],{"class":219},"  Selectors",[164,2350,2294],{"class":237},[164,2352,1732],{"class":219},[164,2354,472],{"class":173},[164,2356,1737],{"class":189},[164,2358,82],{"class":173},[164,2360,2361],{"class":219},"SliceSelector",[164,2363,472],{"class":173},[164,2365,2153],{"class":219},[164,2367,2368],{"class":173},">>\n",[164,2370,2371,2373,2375],{"class":166,"line":692},[164,2372,2166],{"class":173},[164,2374,481],{"class":237},[164,2376,183],{"class":173},[164,2378,2379,2382,2384,2387],{"class":166,"line":704},[164,2380,2381],{"class":1648},"  name",[164,2383,1652],{"class":237},[164,2385,2386],{"class":219}," Name",[164,2388,240],{"class":173},[164,2390,2391,2394,2396,2399],{"class":166,"line":986},[164,2392,2393],{"class":1648},"  actions",[164,2395,1652],{"class":237},[164,2397,2398],{"class":219}," Actions",[164,2400,240],{"class":173},[164,2402,2403,2406,2408,2410],{"class":166,"line":991},[164,2404,2405],{"class":1648},"  defaultState",[164,2407,1652],{"class":237},[164,2409,2181],{"class":219},[164,2411,240],{"class":173},[164,2413,2414,2417,2419,2422],{"class":166,"line":997},[164,2415,2416],{"class":1648},"  selectors",[164,2418,1652],{"class":237},[164,2420,2421],{"class":219}," Selectors",[164,2423,240],{"class":173},[164,2425,2426],{"class":166,"line":1009},[164,2427,2428],{"class":173},"};\n",[164,2430,2431],{"class":166,"line":1014},[164,2432,206],{"emptyLinePlaceholder":205},[164,2434,2435,2437,2439,2441,2443],{"class":166,"line":1020},[164,2436,1692],{"class":237},[164,2438,1695],{"class":237},[164,2440,1703],{"class":219},[164,2442,1641],{"class":237},[164,2444,2445],{"class":173}," \u003C\n",[164,2447,2448,2450,2452,2454],{"class":166,"line":1032},[164,2449,2291],{"class":219},[164,2451,2294],{"class":237},[164,2453,1655],{"class":189},[164,2455,174],{"class":173},[164,2457,2458,2460,2462,2464,2466,2468,2470,2472],{"class":166,"line":1037},[164,2459,2303],{"class":219},[164,2461,2294],{"class":237},[164,2463,1732],{"class":219},[164,2465,472],{"class":173},[164,2467,1737],{"class":189},[164,2469,82],{"class":173},[164,2471,2316],{"class":189},[164,2473,1745],{"class":173},[164,2475,2476,2478,2480,2482,2484,2486,2488,2490,2492,2494],{"class":166,"line":1043},[164,2477,2323],{"class":219},[164,2479,2294],{"class":237},[164,2481,1732],{"class":219},[164,2483,472],{"class":173},[164,2485,1737],{"class":189},[164,2487,82],{"class":173},[164,2489,2336],{"class":219},[164,2491,472],{"class":173},[164,2493,2153],{"class":219},[164,2495,2343],{"class":173},[164,2497,2498,2500,2502,2504,2506,2508,2510,2512,2514,2516],{"class":166,"line":1899},[164,2499,2348],{"class":219},[164,2501,2294],{"class":237},[164,2503,1732],{"class":219},[164,2505,472],{"class":173},[164,2507,1737],{"class":189},[164,2509,82],{"class":173},[164,2511,2361],{"class":219},[164,2513,472],{"class":173},[164,2515,2153],{"class":219},[164,2517,2368],{"class":173},[164,2519,2520],{"class":166,"line":1925},[164,2521,2522],{"class":173},">({\n",[164,2524,2525],{"class":166,"line":1930},[164,2526,2527],{"class":173},"    name,\n",[164,2529,2530],{"class":166,"line":1936},[164,2531,2532],{"class":173},"    actions,\n",[164,2534,2535],{"class":166,"line":1941},[164,2536,2537],{"class":173},"    defaultState,\n",[164,2539,2540],{"class":166,"line":1950},[164,2541,2542],{"class":173},"    selectors,\n",[164,2544,2545,2548,2550,2552,2554,2557,2559,2561,2563,2566,2568,2571,2574,2576],{"class":166,"line":1959},[164,2546,2547],{"class":173},"  }",[164,2549,1652],{"class":237},[164,2551,2283],{"class":219},[164,2553,472],{"class":173},[164,2555,2556],{"class":219},"Name",[164,2558,82],{"class":173},[164,2560,2153],{"class":219},[164,2562,82],{"class":173},[164,2564,2565],{"class":219},"Actions",[164,2567,82],{"class":173},[164,2569,2570],{"class":219},"Selectors",[164,2572,2573],{"class":173},">) ",[164,2575,1799],{"class":237},[164,2577,183],{"class":173},[164,2579,2580,2583,2586],{"class":166,"line":1964},[164,2581,2582],{"class":237},"  let",[164,2584,2585],{"class":173}," sliceActions; ",[164,2587,2588],{"class":212},"// TODO\n",[164,2590,2591,2593,2596],{"class":166,"line":1970},[164,2592,2582],{"class":237},[164,2594,2595],{"class":173}," reducer; ",[164,2597,2588],{"class":212},[164,2599,2600,2602,2605],{"class":166,"line":1975},[164,2601,2582],{"class":237},[164,2603,2604],{"class":173}," sliceSelectors; ",[164,2606,2588],{"class":212},[164,2608,2609],{"class":166,"line":1981},[164,2610,206],{"emptyLinePlaceholder":205},[164,2612,2613,2616],{"class":166,"line":1986},[164,2614,2615],{"class":237},"  return",[164,2617,183],{"class":173},[164,2619,2620],{"class":166,"line":1992},[164,2621,2622],{"class":173},"    reducer,\n",[164,2624,2625],{"class":166,"line":2027},[164,2626,2627],{"class":173},"    selectors: sliceSelectors,\n",[164,2629,2630],{"class":166,"line":2032},[164,2631,2632],{"class":173},"    actions: sliceActions,\n",[164,2634,2635],{"class":166,"line":2052},[164,2636,2637],{"class":173},"  };\n",[164,2639,2640],{"class":166,"line":2061},[164,2641,2428],{"class":173},[16,2643,2644],{},"План такой - сначала реализовать экшены, потом редьюсер и в самом конце - селекторы.",[11,2646,2648],{"id":2647},"actions","Экшены",[16,2650,2651,2652,2654,2655],{},"Экшен представляет из себя объект с обязательным полем ",[20,2653,921],{}," и опциональным ",[20,2656,2657],{},"payload",[155,2659,2661],{"className":1622,"code":2660,"language":1625,"meta":160,"style":160},"type Action\u003CType extends string = string, Payload = unknown> = {\n  type: Type;\n  payload?: Payload;\n};\n",[20,2662,2663,2697,2709,2721],{"__ignoreMap":160},[164,2664,2665,2667,2670,2672,2675,2677,2679,2681,2683,2685,2687,2689,2691,2693,2695],{"class":166,"line":167},[164,2666,921],{"class":237},[164,2668,2669],{"class":219}," Action",[164,2671,472],{"class":173},[164,2673,2674],{"class":219},"Type",[164,2676,2294],{"class":237},[164,2678,1655],{"class":189},[164,2680,1641],{"class":237},[164,2682,1655],{"class":189},[164,2684,82],{"class":173},[164,2686,2158],{"class":219},[164,2688,1641],{"class":237},[164,2690,2228],{"class":189},[164,2692,2166],{"class":173},[164,2694,481],{"class":237},[164,2696,183],{"class":173},[164,2698,2699,2702,2704,2707],{"class":166,"line":177},[164,2700,2701],{"class":1648},"  type",[164,2703,1652],{"class":237},[164,2705,2706],{"class":219}," Type",[164,2708,240],{"class":173},[164,2710,2711,2713,2716,2719],{"class":166,"line":186},[164,2712,2188],{"class":1648},[164,2714,2715],{"class":237},"?:",[164,2717,2718],{"class":219}," Payload",[164,2720,240],{"class":173},[164,2722,2723],{"class":166,"line":196},[164,2724,2428],{"class":173},[16,2726,2727],{},"Пусть, если в метод createSlice прокинуты",[155,2729,2731],{"className":1622,"code":2730,"language":1625,"meta":160,"style":160},"const props = {\n  name: 'users',\n  actions: {\n    addUser: (state, user: User) => {\n      state.userById[user.id] = user;\n      state.usernameById[user.username] = user.id;\n    },\n    deleteUser: (state, userId: string) => {\n      const user = state.userById[userId];\n      delete state.usernameById[user.username];\n      delete state.userById[userId];\n    }\n  }\n};\n",[20,2732,2733,2744,2752,2756,2778,2786,2794,2798,2820,2830,2836,2842,2846,2850],{"__ignoreMap":160},[164,2734,2735,2737,2740,2742],{"class":166,"line":167},[164,2736,1995],{"class":237},[164,2738,2739],{"class":189}," props",[164,2741,1641],{"class":237},[164,2743,183],{"class":173},[164,2745,2746,2748,2750],{"class":166,"line":177},[164,2747,1711],{"class":173},[164,2749,1714],{"class":484},[164,2751,174],{"class":173},[164,2753,2754],{"class":166,"line":186},[164,2755,1774],{"class":173},[164,2757,2758,2760,2762,2764,2766,2768,2770,2772,2774,2776],{"class":166,"line":196},[164,2759,1779],{"class":219},[164,2761,1782],{"class":173},[164,2763,1785],{"class":1648},[164,2765,82],{"class":173},[164,2767,1790],{"class":1648},[164,2769,1652],{"class":237},[164,2771,1638],{"class":219},[164,2773,1430],{"class":173},[164,2775,1799],{"class":237},[164,2777,183],{"class":173},[164,2779,2780,2782,2784],{"class":166,"line":202},[164,2781,1811],{"class":173},[164,2783,481],{"class":237},[164,2785,1816],{"class":173},[164,2787,2788,2790,2792],{"class":166,"line":209},[164,2789,1821],{"class":173},[164,2791,481],{"class":237},[164,2793,1826],{"class":173},[164,2795,2796],{"class":166,"line":216},[164,2797,1831],{"class":173},[164,2799,2800,2802,2804,2806,2808,2810,2812,2814,2816,2818],{"class":166,"line":225},[164,2801,1836],{"class":219},[164,2803,1782],{"class":173},[164,2805,1785],{"class":1648},[164,2807,82],{"class":173},[164,2809,1845],{"class":1648},[164,2811,1652],{"class":237},[164,2813,1655],{"class":189},[164,2815,1430],{"class":173},[164,2817,1799],{"class":237},[164,2819,183],{"class":173},[164,2821,2822,2824,2826,2828],{"class":166,"line":243},[164,2823,1860],{"class":237},[164,2825,1863],{"class":189},[164,2827,1641],{"class":237},[164,2829,1868],{"class":173},[164,2831,2832,2834],{"class":166,"line":631},[164,2833,1873],{"class":237},[164,2835,1876],{"class":173},[164,2837,2838,2840],{"class":166,"line":645},[164,2839,1873],{"class":237},[164,2841,1868],{"class":173},[164,2843,2844],{"class":166,"line":650},[164,2845,1887],{"class":173},[164,2847,2848],{"class":166,"line":655},[164,2849,754],{"class":173},[164,2851,2852],{"class":166,"line":662},[164,2853,2428],{"class":173},[16,2855,2856],{},"то мы будем генерировать два actionType:",[16,2858,2859],{},"users/addUser\nusers/deleteUser",[16,2861,2862],{},"и два экшена -",[155,2864,2866],{"className":1622,"code":2865,"language":1625,"meta":160,"style":160},"const addUser = (user: User) => ({\n  type: \"users/addUser\",\n  payload: user,\n});\n\nconst deleteUser = (userId: string) => ({\n  type: \"users/deleteUser\",\n  payload: user,\n});\n",[20,2867,2868,2891,2901,2906,2910,2914,2937,2946,2950],{"__ignoreMap":160},[164,2869,2870,2872,2874,2876,2878,2880,2882,2884,2886,2888],{"class":166,"line":167},[164,2871,1995],{"class":237},[164,2873,2037],{"class":219},[164,2875,1641],{"class":237},[164,2877,838],{"class":173},[164,2879,1790],{"class":1648},[164,2881,1652],{"class":237},[164,2883,1638],{"class":219},[164,2885,1430],{"class":173},[164,2887,1799],{"class":237},[164,2889,2890],{"class":173}," ({\n",[164,2892,2893,2896,2899],{"class":166,"line":177},[164,2894,2895],{"class":173},"  type: ",[164,2897,2898],{"class":484},"\"users/addUser\"",[164,2900,174],{"class":173},[164,2902,2903],{"class":166,"line":186},[164,2904,2905],{"class":173},"  payload: user,\n",[164,2907,2908],{"class":166,"line":196},[164,2909,1933],{"class":173},[164,2911,2912],{"class":166,"line":202},[164,2913,206],{"emptyLinePlaceholder":205},[164,2915,2916,2918,2921,2923,2925,2927,2929,2931,2933,2935],{"class":166,"line":209},[164,2917,1995],{"class":237},[164,2919,2920],{"class":219}," deleteUser",[164,2922,1641],{"class":237},[164,2924,838],{"class":173},[164,2926,1845],{"class":1648},[164,2928,1652],{"class":237},[164,2930,1655],{"class":189},[164,2932,1430],{"class":173},[164,2934,1799],{"class":237},[164,2936,2890],{"class":173},[164,2938,2939,2941,2944],{"class":166,"line":216},[164,2940,2895],{"class":173},[164,2942,2943],{"class":484},"\"users/deleteUser\"",[164,2945,174],{"class":173},[164,2947,2948],{"class":166,"line":225},[164,2949,2905],{"class":173},[164,2951,2952],{"class":166,"line":243},[164,2953,1933],{"class":173},[16,2955,2956],{},"Префикс с названием слайса добавлен для удобства и для того, чтобы предотвратить конфликт экшенов с одинаковыми названиями.",[16,2958,2959,2960,23,2963],{},"Нам понадобится два новых типа - ",[20,2961,2962],{},"ActionKey",[20,2964,2965],{},"ActionType",[16,2967,2968,2969,2971],{},"это ключи переданного объекта actions, а ",[20,2970,2965],{}," - это экшены, которые генерирует слайс, те же ключи, но с префиксом,",[16,2973,2974,2975,2977,2978],{},"Для создания типа ",[20,2976,2965],{}," используется небольшой генерик хелпер ",[20,2979,2980],{},"Scoped",[155,2982,2984],{"className":1622,"code":2983,"language":1625,"meta":160,"style":160},"type Scoped\u003CString extends string, Scope extends string> = `${Scope}/${String}`;\n\nexport const createSlice = \u003C\n  Name extends string,\n  State extends Record\u003Cstring, unknown>,\n  Actions extends Record\u003Cstring, SliceActionCreator\u003CState>>,\n  ActionKey extends Extract\u003Ckeyof Actions, string>,\n  ScopedActionType extends Scoped\u003CActionKey, Name>,\n  ActionPayload extends Parameters\u003CActions[ActionKey]>[1],\n  Action extends { type: ScopedActionType, payload: ActionPayload },\n>({\n    name,\n    actions,\n    defaultState,\n    selectors,\n  }: CreateSliceProps\u003CName, State, Actions, Selectors>) => {\n  const actionKeys = Object.keys(actions) as ActionKey[];\n  const actionTypeByActionKey = actionKeys.reduce((acc, action) => {\n    const scopedActionType = `${name}/${action}` as ScopedActionType;\n    acc[scopedActionType] = action;\n    return acc;\n  }, {} as Record\u003CScopedActionType, ActionKey>);\n\n  const reducer = (state: State = defaultState, action: Action) => {\n    const nextState = produce(state, draft => {\n      const actionType = actionTypeByActionKey[action.type];\n      actions[actionType]?.(draft as State, action.payload);\n    });\n    return nextState;\n  };\n\n  const sliceActions = actionKeys.reduce((acc, curr) => {\n    acc[curr] = (payload) => {\n      const scopedActionType = `${name}/${curr}` as ScopedActionType;\n\n      return {\n        type: scopedActionType,\n        payload,\n      };\n    };\n    return acc;\n  }, {} as {\n    [ActionKey in Extract\u003Ckeyof Actions, string>]: (payload: Parameters\u003CActions[ActionKey]>[1]) => { type: Scoped\u003CActionKey, Name>, payload: P }\n  });\n\n  return {\n    actions: sliceActions,\n  };\n};\n",[20,2985,2986,3030,3034,3046,3056,3074,3096,3119,3138,3165,3194,3198,3202,3206,3210,3214,3244,3271,3303,3331,3341,3349,3370,3374,3408,3430,3442,3454,3459,3466,3470,3474,3502,3519,3543,3547,3554,3559,3564,3569,3574,3580,3588,3669,3674,3678,3684,3688,3692],{"__ignoreMap":160},[164,2987,2988,2990,2993,2995,2998,3000,3002,3004,3007,3009,3011,3013,3015,3018,3020,3023,3025,3028],{"class":166,"line":167},[164,2989,921],{"class":237},[164,2991,2992],{"class":219}," Scoped",[164,2994,472],{"class":173},[164,2996,2997],{"class":219},"String",[164,2999,2294],{"class":237},[164,3001,1655],{"class":189},[164,3003,82],{"class":173},[164,3005,3006],{"class":219},"Scope",[164,3008,2294],{"class":237},[164,3010,1655],{"class":189},[164,3012,2166],{"class":173},[164,3014,481],{"class":237},[164,3016,3017],{"class":484}," `${",[164,3019,3006],{"class":219},[164,3021,3022],{"class":484},"}/${",[164,3024,2997],{"class":219},[164,3026,3027],{"class":484},"}`",[164,3029,240],{"class":173},[164,3031,3032],{"class":166,"line":177},[164,3033,206],{"emptyLinePlaceholder":205},[164,3035,3036,3038,3040,3042,3044],{"class":166,"line":186},[164,3037,1692],{"class":237},[164,3039,1695],{"class":237},[164,3041,1703],{"class":219},[164,3043,1641],{"class":237},[164,3045,2445],{"class":173},[164,3047,3048,3050,3052,3054],{"class":166,"line":196},[164,3049,2291],{"class":219},[164,3051,2294],{"class":237},[164,3053,1655],{"class":189},[164,3055,174],{"class":173},[164,3057,3058,3060,3062,3064,3066,3068,3070,3072],{"class":166,"line":202},[164,3059,2303],{"class":219},[164,3061,2294],{"class":237},[164,3063,1732],{"class":219},[164,3065,472],{"class":173},[164,3067,1737],{"class":189},[164,3069,82],{"class":173},[164,3071,2316],{"class":189},[164,3073,1745],{"class":173},[164,3075,3076,3078,3080,3082,3084,3086,3088,3090,3092,3094],{"class":166,"line":209},[164,3077,2323],{"class":219},[164,3079,2294],{"class":237},[164,3081,1732],{"class":219},[164,3083,472],{"class":173},[164,3085,1737],{"class":189},[164,3087,82],{"class":173},[164,3089,2336],{"class":219},[164,3091,472],{"class":173},[164,3093,2153],{"class":219},[164,3095,2343],{"class":173},[164,3097,3098,3101,3103,3106,3108,3111,3113,3115,3117],{"class":166,"line":216},[164,3099,3100],{"class":219},"  ActionKey",[164,3102,2294],{"class":237},[164,3104,3105],{"class":219}," Extract",[164,3107,472],{"class":173},[164,3109,3110],{"class":237},"keyof",[164,3112,2398],{"class":219},[164,3114,82],{"class":173},[164,3116,1737],{"class":189},[164,3118,1745],{"class":173},[164,3120,3121,3124,3126,3128,3130,3132,3134,3136],{"class":166,"line":225},[164,3122,3123],{"class":219},"  ScopedActionType",[164,3125,2294],{"class":237},[164,3127,2992],{"class":219},[164,3129,472],{"class":173},[164,3131,2962],{"class":219},[164,3133,82],{"class":173},[164,3135,2556],{"class":219},[164,3137,1745],{"class":173},[164,3139,3140,3143,3145,3148,3150,3152,3154,3156,3159,3162],{"class":166,"line":243},[164,3141,3142],{"class":219},"  ActionPayload",[164,3144,2294],{"class":237},[164,3146,3147],{"class":219}," Parameters",[164,3149,472],{"class":173},[164,3151,2565],{"class":219},[164,3153,918],{"class":173},[164,3155,2962],{"class":219},[164,3157,3158],{"class":173},"]>[",[164,3160,3161],{"class":189},"1",[164,3163,3164],{"class":173},"],\n",[164,3166,3167,3170,3172,3175,3177,3179,3182,3184,3186,3188,3191],{"class":166,"line":631},[164,3168,3169],{"class":219},"  Action",[164,3171,2294],{"class":237},[164,3173,3174],{"class":173}," { ",[164,3176,921],{"class":1648},[164,3178,1652],{"class":237},[164,3180,3181],{"class":219}," ScopedActionType",[164,3183,82],{"class":173},[164,3185,2657],{"class":1648},[164,3187,1652],{"class":237},[164,3189,3190],{"class":219}," ActionPayload",[164,3192,3193],{"class":173}," },\n",[164,3195,3196],{"class":166,"line":645},[164,3197,2522],{"class":173},[164,3199,3200],{"class":166,"line":650},[164,3201,2527],{"class":173},[164,3203,3204],{"class":166,"line":655},[164,3205,2532],{"class":173},[164,3207,3208],{"class":166,"line":662},[164,3209,2537],{"class":173},[164,3211,3212],{"class":166,"line":678},[164,3213,2542],{"class":173},[164,3215,3216,3218,3220,3222,3224,3226,3228,3230,3232,3234,3236,3238,3240,3242],{"class":166,"line":692},[164,3217,2547],{"class":173},[164,3219,1652],{"class":237},[164,3221,2283],{"class":219},[164,3223,472],{"class":173},[164,3225,2556],{"class":219},[164,3227,82],{"class":173},[164,3229,2153],{"class":219},[164,3231,82],{"class":173},[164,3233,2565],{"class":219},[164,3235,82],{"class":173},[164,3237,2570],{"class":219},[164,3239,2573],{"class":173},[164,3241,1799],{"class":237},[164,3243,183],{"class":173},[164,3245,3246,3249,3252,3254,3257,3260,3263,3265,3268],{"class":166,"line":704},[164,3247,3248],{"class":237},"  const",[164,3250,3251],{"class":189}," actionKeys",[164,3253,1641],{"class":237},[164,3255,3256],{"class":173}," Object.",[164,3258,3259],{"class":219},"keys",[164,3261,3262],{"class":173},"(actions) ",[164,3264,1729],{"class":237},[164,3266,3267],{"class":219}," ActionKey",[164,3269,3270],{"class":173},"[];\n",[164,3272,3273,3275,3278,3280,3283,3286,3289,3292,3294,3297,3299,3301],{"class":166,"line":986},[164,3274,3248],{"class":237},[164,3276,3277],{"class":189}," actionTypeByActionKey",[164,3279,1641],{"class":237},[164,3281,3282],{"class":173}," actionKeys.",[164,3284,3285],{"class":219},"reduce",[164,3287,3288],{"class":173},"((",[164,3290,3291],{"class":1648},"acc",[164,3293,82],{"class":173},[164,3295,3296],{"class":1648},"action",[164,3298,1430],{"class":173},[164,3300,1799],{"class":237},[164,3302,183],{"class":173},[164,3304,3305,3308,3311,3313,3315,3318,3320,3322,3324,3327,3329],{"class":166,"line":991},[164,3306,3307],{"class":237},"    const",[164,3309,3310],{"class":189}," scopedActionType",[164,3312,1641],{"class":237},[164,3314,3017],{"class":484},[164,3316,3317],{"class":173},"name",[164,3319,3022],{"class":484},[164,3321,3296],{"class":173},[164,3323,3027],{"class":484},[164,3325,3326],{"class":237}," as",[164,3328,3181],{"class":219},[164,3330,240],{"class":173},[164,3332,3333,3336,3338],{"class":166,"line":997},[164,3334,3335],{"class":173},"    acc[scopedActionType] ",[164,3337,481],{"class":237},[164,3339,3340],{"class":173}," action;\n",[164,3342,3343,3346],{"class":166,"line":1009},[164,3344,3345],{"class":237},"    return",[164,3347,3348],{"class":173}," acc;\n",[164,3350,3351,3354,3356,3358,3360,3363,3365,3367],{"class":166,"line":1014},[164,3352,3353],{"class":173},"  }, {} ",[164,3355,1729],{"class":237},[164,3357,1732],{"class":219},[164,3359,472],{"class":173},[164,3361,3362],{"class":219},"ScopedActionType",[164,3364,82],{"class":173},[164,3366,2962],{"class":219},[164,3368,3369],{"class":173},">);\n",[164,3371,3372],{"class":166,"line":1020},[164,3373,206],{"emptyLinePlaceholder":205},[164,3375,3376,3378,3381,3383,3385,3387,3389,3391,3393,3396,3398,3400,3402,3404,3406],{"class":166,"line":1032},[164,3377,3248],{"class":237},[164,3379,3380],{"class":219}," reducer",[164,3382,1641],{"class":237},[164,3384,838],{"class":173},[164,3386,1785],{"class":1648},[164,3388,1652],{"class":237},[164,3390,2181],{"class":219},[164,3392,1641],{"class":237},[164,3394,3395],{"class":173}," defaultState, ",[164,3397,3296],{"class":1648},[164,3399,1652],{"class":237},[164,3401,2669],{"class":219},[164,3403,1430],{"class":173},[164,3405,1799],{"class":237},[164,3407,183],{"class":173},[164,3409,3410,3412,3415,3417,3420,3423,3426,3428],{"class":166,"line":1037},[164,3411,3307],{"class":237},[164,3413,3414],{"class":189}," nextState",[164,3416,1641],{"class":237},[164,3418,3419],{"class":219}," produce",[164,3421,3422],{"class":173},"(state, ",[164,3424,3425],{"class":1648},"draft",[164,3427,2009],{"class":237},[164,3429,183],{"class":173},[164,3431,3432,3434,3437,3439],{"class":166,"line":1043},[164,3433,1860],{"class":237},[164,3435,3436],{"class":189}," actionType",[164,3438,1641],{"class":237},[164,3440,3441],{"class":173}," actionTypeByActionKey[action.type];\n",[164,3443,3444,3447,3449,3451],{"class":166,"line":1899},[164,3445,3446],{"class":173},"      actions[actionType]?.(draft ",[164,3448,1729],{"class":237},[164,3450,2181],{"class":219},[164,3452,3453],{"class":173},", action.payload);\n",[164,3455,3456],{"class":166,"line":1925},[164,3457,3458],{"class":173},"    });\n",[164,3460,3461,3463],{"class":166,"line":1930},[164,3462,3345],{"class":237},[164,3464,3465],{"class":173}," nextState;\n",[164,3467,3468],{"class":166,"line":1936},[164,3469,2637],{"class":173},[164,3471,3472],{"class":166,"line":1941},[164,3473,206],{"emptyLinePlaceholder":205},[164,3475,3476,3478,3481,3483,3485,3487,3489,3491,3493,3496,3498,3500],{"class":166,"line":1950},[164,3477,3248],{"class":237},[164,3479,3480],{"class":189}," sliceActions",[164,3482,1641],{"class":237},[164,3484,3282],{"class":173},[164,3486,3285],{"class":219},[164,3488,3288],{"class":173},[164,3490,3291],{"class":1648},[164,3492,82],{"class":173},[164,3494,3495],{"class":1648},"curr",[164,3497,1430],{"class":173},[164,3499,1799],{"class":237},[164,3501,183],{"class":173},[164,3503,3504,3507,3509,3511,3513,3515,3517],{"class":166,"line":1959},[164,3505,3506],{"class":173},"    acc[curr] ",[164,3508,481],{"class":237},[164,3510,838],{"class":173},[164,3512,2657],{"class":1648},[164,3514,1430],{"class":173},[164,3516,1799],{"class":237},[164,3518,183],{"class":173},[164,3520,3521,3523,3525,3527,3529,3531,3533,3535,3537,3539,3541],{"class":166,"line":1964},[164,3522,1860],{"class":237},[164,3524,3310],{"class":189},[164,3526,1641],{"class":237},[164,3528,3017],{"class":484},[164,3530,3317],{"class":173},[164,3532,3022],{"class":484},[164,3534,3495],{"class":173},[164,3536,3027],{"class":484},[164,3538,3326],{"class":237},[164,3540,3181],{"class":219},[164,3542,240],{"class":173},[164,3544,3545],{"class":166,"line":1970},[164,3546,206],{"emptyLinePlaceholder":205},[164,3548,3549,3552],{"class":166,"line":1975},[164,3550,3551],{"class":237},"      return",[164,3553,183],{"class":173},[164,3555,3556],{"class":166,"line":1981},[164,3557,3558],{"class":173},"        type: scopedActionType,\n",[164,3560,3561],{"class":166,"line":1986},[164,3562,3563],{"class":173},"        payload,\n",[164,3565,3566],{"class":166,"line":1992},[164,3567,3568],{"class":173},"      };\n",[164,3570,3571],{"class":166,"line":2027},[164,3572,3573],{"class":173},"    };\n",[164,3575,3576,3578],{"class":166,"line":2032},[164,3577,3345],{"class":237},[164,3579,3348],{"class":173},[164,3581,3582,3584,3586],{"class":166,"line":2052},[164,3583,3353],{"class":173},[164,3585,1729],{"class":237},[164,3587,183],{"class":173},[164,3589,3590,3593,3595,3598,3600,3602,3604,3606,3608,3610,3613,3615,3617,3619,3621,3623,3625,3627,3629,3631,3633,3635,3638,3640,3642,3644,3646,3648,3650,3652,3654,3656,3659,3661,3663,3666],{"class":166,"line":2061},[164,3591,3592],{"class":173},"    [",[164,3594,2962],{"class":219},[164,3596,3597],{"class":237}," in",[164,3599,3105],{"class":219},[164,3601,472],{"class":173},[164,3603,3110],{"class":237},[164,3605,2398],{"class":219},[164,3607,82],{"class":173},[164,3609,1737],{"class":189},[164,3611,3612],{"class":173},">]",[164,3614,1652],{"class":237},[164,3616,838],{"class":173},[164,3618,2657],{"class":1648},[164,3620,1652],{"class":237},[164,3622,3147],{"class":219},[164,3624,472],{"class":173},[164,3626,2565],{"class":219},[164,3628,918],{"class":173},[164,3630,2962],{"class":219},[164,3632,3158],{"class":173},[164,3634,3161],{"class":189},[164,3636,3637],{"class":173},"]) ",[164,3639,1799],{"class":237},[164,3641,3174],{"class":173},[164,3643,921],{"class":1648},[164,3645,1652],{"class":237},[164,3647,2992],{"class":219},[164,3649,472],{"class":173},[164,3651,2962],{"class":219},[164,3653,82],{"class":173},[164,3655,2556],{"class":219},[164,3657,3658],{"class":173},">, ",[164,3660,2657],{"class":1648},[164,3662,1652],{"class":237},[164,3664,3665],{"class":219}," P",[164,3667,3668],{"class":173}," }\n",[164,3670,3671],{"class":166,"line":2067},[164,3672,3673],{"class":173},"  });\n",[164,3675,3676],{"class":166,"line":2078},[164,3677,206],{"emptyLinePlaceholder":205},[164,3679,3680,3682],{"class":166,"line":2089},[164,3681,2615],{"class":237},[164,3683,183],{"class":173},[164,3685,3686],{"class":166,"line":2100},[164,3687,2632],{"class":173},[164,3689,3690],{"class":166,"line":2111},[164,3691,2637],{"class":173},[164,3693,3694],{"class":166,"line":2117},[164,3695,2428],{"class":173},[16,3697,3698],{},"Остановлюсь на некоторых аспектах типизации чуть подробнее",[16,3700,3701,3702,3704,3705],{},"должен быть генериком, который будет на лету подхватывать ключи из переданного объекта ",[20,3703,2565],{},".\nУ объекта в качестве ключа помимо строки может быть число или символ.\nЧтобы избежать проблем с типизацией, нужно достать только строки при помощи  ",[20,3706,3707],{},"Extract\u003Ckeyof Actions, string>",[16,3709,3710,3711,3713,3714,3717,3718,3721,3722,3724,3725],{},"Чтобы сгенерировать экшены с правильным payload (чтобы у ",[20,3712,2073],{}," была поддержка типизации и аргументом был именно ",[20,3715,3716],{},"user: User","),\nнужно достать второй аргумент из переданного коллбека. Для этого воспользуемся хелпером ",[20,3719,3720],{},"Parameters","\nи укажем нужный ",[20,3723,2962],{},"-  ",[20,3726,3727],{},"Parameters\u003CActions[ActionType]>[1]",[16,3729,3730],{},"Проверим, что все работает правильно:",[155,3732,3734],{"className":1622,"code":3733,"language":1625,"meta":160,"style":160},"export const usersSlice = createSlice({\n  name: 'users',\n  defaultState: {\n    userById: {} as Record\u003Cstring, User>,\n    usernameById: {} as Record\u003Cstring, string>,\n  },\n  actions: {\n    addUser: (state, user: User) => {\n      // state должен иметь тот же тип, что и defaultState\n      state.userById[user.id] = user;\n      state.usernameById[user.username] = user.id;\n    },\n    deleteUser: (state, userId: string) => {\n      const user = state.userById[userId];\n      delete state.usernameById[user.username];\n      delete state.userById[userId];\n    }\n  },\n  selectors: {\n    selectUserByUsername: (state, username: string) => state.userById[state.usernameById[username]],\n  }\n});\n\nusersSlice.actions; // можно навести на actions и увидеть его тип\n",[20,3735,3736,3750,3758,3762,3780,3798,3802,3806,3828,3832,3840,3848,3852,3874,3884,3890,3896,3900,3904,3908,3930,3934,3938,3942],{"__ignoreMap":160},[164,3737,3738,3740,3742,3744,3746,3748],{"class":166,"line":167},[164,3739,1692],{"class":237},[164,3741,1695],{"class":237},[164,3743,1698],{"class":189},[164,3745,1641],{"class":237},[164,3747,1703],{"class":219},[164,3749,1706],{"class":173},[164,3751,3752,3754,3756],{"class":166,"line":177},[164,3753,1711],{"class":173},[164,3755,1714],{"class":484},[164,3757,174],{"class":173},[164,3759,3760],{"class":166,"line":186},[164,3761,1721],{"class":173},[164,3763,3764,3766,3768,3770,3772,3774,3776,3778],{"class":166,"line":196},[164,3765,1726],{"class":173},[164,3767,1729],{"class":237},[164,3769,1732],{"class":219},[164,3771,472],{"class":173},[164,3773,1737],{"class":189},[164,3775,82],{"class":173},[164,3777,1742],{"class":219},[164,3779,1745],{"class":173},[164,3781,3782,3784,3786,3788,3790,3792,3794,3796],{"class":166,"line":202},[164,3783,1750],{"class":173},[164,3785,1729],{"class":237},[164,3787,1732],{"class":219},[164,3789,472],{"class":173},[164,3791,1737],{"class":189},[164,3793,82],{"class":173},[164,3795,1737],{"class":189},[164,3797,1745],{"class":173},[164,3799,3800],{"class":166,"line":209},[164,3801,1769],{"class":173},[164,3803,3804],{"class":166,"line":216},[164,3805,1774],{"class":173},[164,3807,3808,3810,3812,3814,3816,3818,3820,3822,3824,3826],{"class":166,"line":225},[164,3809,1779],{"class":219},[164,3811,1782],{"class":173},[164,3813,1785],{"class":1648},[164,3815,82],{"class":173},[164,3817,1790],{"class":1648},[164,3819,1652],{"class":237},[164,3821,1638],{"class":219},[164,3823,1430],{"class":173},[164,3825,1799],{"class":237},[164,3827,183],{"class":173},[164,3829,3830],{"class":166,"line":243},[164,3831,1806],{"class":212},[164,3833,3834,3836,3838],{"class":166,"line":631},[164,3835,1811],{"class":173},[164,3837,481],{"class":237},[164,3839,1816],{"class":173},[164,3841,3842,3844,3846],{"class":166,"line":645},[164,3843,1821],{"class":173},[164,3845,481],{"class":237},[164,3847,1826],{"class":173},[164,3849,3850],{"class":166,"line":650},[164,3851,1831],{"class":173},[164,3853,3854,3856,3858,3860,3862,3864,3866,3868,3870,3872],{"class":166,"line":655},[164,3855,1836],{"class":219},[164,3857,1782],{"class":173},[164,3859,1785],{"class":1648},[164,3861,82],{"class":173},[164,3863,1845],{"class":1648},[164,3865,1652],{"class":237},[164,3867,1655],{"class":189},[164,3869,1430],{"class":173},[164,3871,1799],{"class":237},[164,3873,183],{"class":173},[164,3875,3876,3878,3880,3882],{"class":166,"line":662},[164,3877,1860],{"class":237},[164,3879,1863],{"class":189},[164,3881,1641],{"class":237},[164,3883,1868],{"class":173},[164,3885,3886,3888],{"class":166,"line":678},[164,3887,1873],{"class":237},[164,3889,1876],{"class":173},[164,3891,3892,3894],{"class":166,"line":692},[164,3893,1873],{"class":237},[164,3895,1868],{"class":173},[164,3897,3898],{"class":166,"line":704},[164,3899,1887],{"class":173},[164,3901,3902],{"class":166,"line":986},[164,3903,1769],{"class":173},[164,3905,3906],{"class":166,"line":991},[164,3907,1896],{"class":173},[164,3909,3910,3912,3914,3916,3918,3920,3922,3924,3926,3928],{"class":166,"line":997},[164,3911,1902],{"class":219},[164,3913,1782],{"class":173},[164,3915,1785],{"class":1648},[164,3917,82],{"class":173},[164,3919,1911],{"class":1648},[164,3921,1652],{"class":237},[164,3923,1655],{"class":189},[164,3925,1430],{"class":173},[164,3927,1799],{"class":237},[164,3929,1922],{"class":173},[164,3931,3932],{"class":166,"line":1009},[164,3933,754],{"class":173},[164,3935,3936],{"class":166,"line":1014},[164,3937,1933],{"class":173},[164,3939,3940],{"class":166,"line":1020},[164,3941,206],{"emptyLinePlaceholder":205},[164,3943,3944,3947],{"class":166,"line":1032},[164,3945,3946],{"class":173},"usersSlice.actions; ",[164,3948,3949],{"class":212},"// можно навести на actions и увидеть его тип\n",[16,3951,3952],{},[386,3953],{"alt":3954,"src":3955},"Подсказка в vs code","/images/actions-type-hightlight.png",[11,3957,3959],{"id":3958},"reducer","Редьюсер",[16,3961,3962,3963,23,3965,3967,3968,3971],{},"По своей сути редьюсер - это чистая функция, которая принимает два аргумента - ",[20,3964,1785],{},[20,3966,3296],{}," и возвращает ",[20,3969,3970],{},"nextState",".\nОчень важно при этом, чтобы стейт был иммутабельным, ради этого обычно используются страшные конструкции вроде",[155,3973,3975],{"className":1622,"code":3974,"language":1625,"meta":160,"style":160},"const nextState = {\n  ...state,\n  userById: {\n    ...state.userById,\n    [user.id]: user, \n  }\n};\n",[20,3976,3977,3987,3995,4000,4008,4013,4017],{"__ignoreMap":160},[164,3978,3979,3981,3983,3985],{"class":166,"line":167},[164,3980,1995],{"class":237},[164,3982,3414],{"class":189},[164,3984,1641],{"class":237},[164,3986,183],{"class":173},[164,3988,3989,3992],{"class":166,"line":177},[164,3990,3991],{"class":237},"  ...",[164,3993,3994],{"class":173},"state,\n",[164,3996,3997],{"class":166,"line":186},[164,3998,3999],{"class":173},"  userById: {\n",[164,4001,4002,4005],{"class":166,"line":196},[164,4003,4004],{"class":237},"    ...",[164,4006,4007],{"class":173},"state.userById,\n",[164,4009,4010],{"class":166,"line":202},[164,4011,4012],{"class":173},"    [user.id]: user, \n",[164,4014,4015],{"class":166,"line":209},[164,4016,754],{"class":173},[164,4018,4019],{"class":166,"line":216},[164,4020,2428],{"class":173},[16,4022,4023,4024,4028,4029,4033,4034,4038],{},"Чтобы облегчить себе жизнь, для создания иммутабельного стейта предлагаю использовать\n",[1325,4025,4026],{"href":4026,"rel":4027},"https://www.npmjs.com/package/immer",[1592],"](",[1325,4030,4031],{"href":4031,"rel":4032},"https://github.com/immerjs/immer",[1592],"), в частности метод\nproduce](",[1325,4035,4036],{"href":4036,"rel":4037},"https://immerjs.github.io/immer/produce",[1592],")",[16,4040,4041,4042,4045],{},"таким образом все, что нам нужно - это вызвать внутри ",[20,4043,4044],{},"produce"," нужный коллбек (экшен), передав туда драфт стейта и payload экшена",[155,4047,4049],{"className":1622,"code":4048,"language":1625,"meta":160,"style":160},"const reducer = (state: State = defaultState, action: Action) => {\n  const nextState = produce(state, draft => {\n    actions[action.type]?.(draft as State, action.payload);\n  });\n  return nextState;\n};\n",[20,4050,4051,4083,4101,4112,4116,4122],{"__ignoreMap":160},[164,4052,4053,4055,4057,4059,4061,4063,4065,4067,4069,4071,4073,4075,4077,4079,4081],{"class":166,"line":167},[164,4054,1995],{"class":237},[164,4056,3380],{"class":219},[164,4058,1641],{"class":237},[164,4060,838],{"class":173},[164,4062,1785],{"class":1648},[164,4064,1652],{"class":237},[164,4066,2181],{"class":219},[164,4068,1641],{"class":237},[164,4070,3395],{"class":173},[164,4072,3296],{"class":1648},[164,4074,1652],{"class":237},[164,4076,2669],{"class":219},[164,4078,1430],{"class":173},[164,4080,1799],{"class":237},[164,4082,183],{"class":173},[164,4084,4085,4087,4089,4091,4093,4095,4097,4099],{"class":166,"line":177},[164,4086,3248],{"class":237},[164,4088,3414],{"class":189},[164,4090,1641],{"class":237},[164,4092,3419],{"class":219},[164,4094,3422],{"class":173},[164,4096,3425],{"class":1648},[164,4098,2009],{"class":237},[164,4100,183],{"class":173},[164,4102,4103,4106,4108,4110],{"class":166,"line":186},[164,4104,4105],{"class":173},"    actions[action.type]?.(draft ",[164,4107,1729],{"class":237},[164,4109,2181],{"class":219},[164,4111,3453],{"class":173},[164,4113,4114],{"class":166,"line":196},[164,4115,3673],{"class":173},[164,4117,4118,4120],{"class":166,"line":202},[164,4119,2615],{"class":237},[164,4121,3465],{"class":173},[164,4123,4124],{"class":166,"line":209},[164,4125,2428],{"class":173},[11,4127,867],{"id":866},[16,4129,4130,4131,4134],{},"Для работы в связке с react + redux используется хук ",[20,4132,4133],{},"useSelector"," .",[16,4136,4137,4138,4038],{},"Чтобы реакт знал и мог реагировать (делать ререндер компонента) на изменения в стейте существует метод\nuseSyncExternalStore](",[1325,4139,4140],{"href":4140,"rel":4141},"https://react.dev/reference/react/useSyncExternalStore",[1592],[16,4143,4144],{},"Например, чтобы получить актуальный стейт, можно написать следующий код:",[155,4146,4148],{"className":1622,"code":4147,"language":1625,"meta":160,"style":160},"const useStore = () => {\n  const state = useSyncExternalStore(\n    myStore.subscribe,\n    myStore.getState,\n  );\n\n  return state;\n};\n",[20,4149,4150,4166,4180,4185,4190,4194,4198,4205],{"__ignoreMap":160},[164,4151,4152,4154,4157,4159,4162,4164],{"class":166,"line":167},[164,4153,1995],{"class":237},[164,4155,4156],{"class":219}," useStore",[164,4158,1641],{"class":237},[164,4160,4161],{"class":173}," () ",[164,4163,1799],{"class":237},[164,4165,183],{"class":173},[164,4167,4168,4170,4173,4175,4178],{"class":166,"line":177},[164,4169,3248],{"class":237},[164,4171,4172],{"class":189}," state",[164,4174,1641],{"class":237},[164,4176,4177],{"class":219}," useSyncExternalStore",[164,4179,2058],{"class":173},[164,4181,4182],{"class":166,"line":186},[164,4183,4184],{"class":173},"    myStore.subscribe,\n",[164,4186,4187],{"class":166,"line":196},[164,4188,4189],{"class":173},"    myStore.getState,\n",[164,4191,4192],{"class":166,"line":202},[164,4193,2120],{"class":173},[164,4195,4196],{"class":166,"line":209},[164,4197,206],{"emptyLinePlaceholder":205},[164,4199,4200,4202],{"class":166,"line":216},[164,4201,2615],{"class":237},[164,4203,4204],{"class":173}," state;\n",[164,4206,4207],{"class":166,"line":225},[164,4208,2428],{"class":173},[16,4210,4211,4212,4215],{},"Мы могли бы даже использовать селектор, чтобы достать из стора нужные нам данные,\nоднако такая реализация будет реагировать на ",[1597,4213,4214],{},"любые"," изменения в стейте.",[16,4217,4218],{},"Мы же хотим, чтобы наш useSelector реагировал только на изменения результата селектора, а не всего стейта.\nТ.е. чтобы селектор",[155,4220,4222],{"className":1622,"code":4221,"language":1625,"meta":160,"style":160},"const username = useSelector(state => state.users.usersById['some-id'].username);\n",[20,4223,4224],{"__ignoreMap":160},[164,4225,4226,4228,4231,4233,4235,4237,4239,4241,4244,4247],{"class":166,"line":167},[164,4227,1995],{"class":237},[164,4229,4230],{"class":189}," username",[164,4232,1641],{"class":237},[164,4234,2002],{"class":219},[164,4236,1289],{"class":173},[164,4238,1785],{"class":1648},[164,4240,2009],{"class":237},[164,4242,4243],{"class":173}," state.users.usersById[",[164,4245,4246],{"class":484},"'some-id'",[164,4248,4249],{"class":173},"].username);\n",[16,4251,4252],{},"реагировал только на изменение username конкретного юзера (с id = “some-id”).",[16,4254,4255,4256,4259,4260,4263],{},"Предлагаю не писать велосипед и использовать ",[20,4257,4258],{},"useSyncExternalStoreWithSelector",".\nЭто модифицированная версия ",[20,4261,4262],{},"useSyncExternalStore"," c поддержкой селекторов и мемоизацией.",[16,4265,4266,4267,4269],{},"Таким образом хелпер для создания ",[20,4268,4133],{}," будет выглядеть следующим образом:",[155,4271,4273],{"className":1622,"code":4272,"language":1625,"meta":160,"style":160},"import type { Store as ReduxStore } from 'redux';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector';\n\nexport const createUseSelector = \u003C\n  Store extends ReduxStore,\n  State extends ReturnType\u003CStore['getState']>,\n>(store: Store) => {\n  const useSelector = \u003CSelector extends (state: State) => unknown>(selector: Selector) => {\n    return useSyncExternalStoreWithSelector(\n      store.subscribe,\n      store.getState,\n      store.getState,\n      selector\n    ) as ReturnType\u003CSelector>;\n  };\n\n  return useSelector;\n};\n",[20,4274,4275,4299,4313,4317,4330,4342,4364,4383,4429,4438,4443,4448,4452,4457,4473,4477,4481,4488],{"__ignoreMap":160},[164,4276,4277,4280,4283,4286,4288,4291,4294,4297],{"class":166,"line":167},[164,4278,4279],{"class":237},"import",[164,4281,4282],{"class":237}," type",[164,4284,4285],{"class":173}," { Store ",[164,4287,1729],{"class":237},[164,4289,4290],{"class":173}," ReduxStore } ",[164,4292,4293],{"class":237},"from",[164,4295,4296],{"class":484}," 'redux'",[164,4298,240],{"class":173},[164,4300,4301,4303,4306,4308,4311],{"class":166,"line":177},[164,4302,4279],{"class":237},[164,4304,4305],{"class":173}," { useSyncExternalStoreWithSelector } ",[164,4307,4293],{"class":237},[164,4309,4310],{"class":484}," 'use-sync-external-store/with-selector'",[164,4312,240],{"class":173},[164,4314,4315],{"class":166,"line":186},[164,4316,206],{"emptyLinePlaceholder":205},[164,4318,4319,4321,4323,4326,4328],{"class":166,"line":196},[164,4320,1692],{"class":237},[164,4322,1695],{"class":237},[164,4324,4325],{"class":219}," createUseSelector",[164,4327,1641],{"class":237},[164,4329,2445],{"class":173},[164,4331,4332,4335,4337,4340],{"class":166,"line":202},[164,4333,4334],{"class":219},"  Store",[164,4336,2294],{"class":237},[164,4338,4339],{"class":219}," ReduxStore",[164,4341,174],{"class":173},[164,4343,4344,4346,4348,4351,4353,4356,4358,4361],{"class":166,"line":209},[164,4345,2303],{"class":219},[164,4347,2294],{"class":237},[164,4349,4350],{"class":219}," ReturnType",[164,4352,472],{"class":173},[164,4354,4355],{"class":219},"Store",[164,4357,918],{"class":173},[164,4359,4360],{"class":484},"'getState'",[164,4362,4363],{"class":173},"]>,\n",[164,4365,4366,4369,4372,4374,4377,4379,4381],{"class":166,"line":216},[164,4367,4368],{"class":173},">(",[164,4370,4371],{"class":1648},"store",[164,4373,1652],{"class":237},[164,4375,4376],{"class":219}," Store",[164,4378,1430],{"class":173},[164,4380,1799],{"class":237},[164,4382,183],{"class":173},[164,4384,4385,4387,4389,4391,4394,4397,4399,4401,4403,4405,4407,4409,4411,4413,4415,4418,4420,4423,4425,4427],{"class":166,"line":225},[164,4386,3248],{"class":237},[164,4388,2002],{"class":219},[164,4390,1641],{"class":237},[164,4392,4393],{"class":173}," \u003C",[164,4395,4396],{"class":219},"Selector",[164,4398,2294],{"class":237},[164,4400,838],{"class":173},[164,4402,1785],{"class":1648},[164,4404,1652],{"class":237},[164,4406,2181],{"class":219},[164,4408,1430],{"class":173},[164,4410,1799],{"class":237},[164,4412,2228],{"class":189},[164,4414,4368],{"class":173},[164,4416,4417],{"class":1648},"selector",[164,4419,1652],{"class":237},[164,4421,4422],{"class":219}," Selector",[164,4424,1430],{"class":173},[164,4426,1799],{"class":237},[164,4428,183],{"class":173},[164,4430,4431,4433,4436],{"class":166,"line":243},[164,4432,3345],{"class":237},[164,4434,4435],{"class":219}," useSyncExternalStoreWithSelector",[164,4437,2058],{"class":173},[164,4439,4440],{"class":166,"line":631},[164,4441,4442],{"class":173},"      store.subscribe,\n",[164,4444,4445],{"class":166,"line":645},[164,4446,4447],{"class":173},"      store.getState,\n",[164,4449,4450],{"class":166,"line":650},[164,4451,4447],{"class":173},[164,4453,4454],{"class":166,"line":655},[164,4455,4456],{"class":173},"      selector\n",[164,4458,4459,4462,4464,4466,4468,4470],{"class":166,"line":662},[164,4460,4461],{"class":173},"    ) ",[164,4463,1729],{"class":237},[164,4465,4350],{"class":219},[164,4467,472],{"class":173},[164,4469,4396],{"class":219},[164,4471,4472],{"class":173},">;\n",[164,4474,4475],{"class":166,"line":678},[164,4476,2637],{"class":173},[164,4478,4479],{"class":166,"line":692},[164,4480,206],{"emptyLinePlaceholder":205},[164,4482,4483,4485],{"class":166,"line":704},[164,4484,2615],{"class":237},[164,4486,4487],{"class":173}," useSelector;\n",[164,4489,4490],{"class":166,"line":986},[164,4491,2428],{"class":173},[11,4493,4495],{"id":4494},"global-store","Глобальный стор",[16,4497,4498,4499,4502],{},"В redux-toolkit есть метод ",[20,4500,4501],{},"configureStore"," для создания глобального стора.\nПредлагаю написать минималистичную версию, которая лишь объединяет редьюсеры и создает store",[155,4504,4506],{"className":1622,"code":4505,"language":1625,"meta":160,"style":160},"import type { Reducer } from 'redux';\n\ntype SliceAction\u003CType extends string = string, Payload = unknown> = {\n  type: Type,\n  payload: Payload,\n}\n\ntype SimpleSlice\u003CName extends string, ReducerType extends Reducer\u003Cany, any>> = {\n  name: Name;\n  reducer: ReducerType,\n}\n\ntype TypesFromSlices\u003CT> = T extends readonly { name: infer Name extends string, reducer: Reducer\u003Cinfer State, infer Action> }[]\n  ? Action extends SliceAction\u003Cinfer Type, infer Payload>\n  ? {\n    action: SliceAction\u003CType, Payload>,\n    state: { [P in Name]: State }\n  } : never : never\n\nexport const configureStore = \u003C\n  Slice extends SimpleSlice\u003Cstring, Reducer\u003Cany, any, any>>,\n  State extends TypesFromSlices\u003CSlice[]>['state'],\n  Action extends TypesFromSlices\u003CSlice[]>['action'],\n>(slices: Slice[]) => {\n  const reducersByName = slices.reduce((acc, current) => {\n    acc[current.name] = current.reducer;\n    return acc;\n  }, {} as Record\u003Cstring, Reducer>);\n\n  const reducer = combineReducers(reducersByName) as Reducer\u003CState, Action>;\n\n  const store = createStore(reducer);\n\n  return {\n    store,\n  };\n};\n",[20,4507,4508,4523,4527,4560,4570,4580,4584,4588,4629,4639,4651,4655,4659,4722,4747,4753,4772,4798,4814,4818,4831,4863,4884,4903,4922,4951,4961,4967,4985,4989,5018,5022,5037,5041,5047,5052,5056],{"__ignoreMap":160},[164,4509,4510,4512,4514,4517,4519,4521],{"class":166,"line":167},[164,4511,4279],{"class":237},[164,4513,4282],{"class":237},[164,4515,4516],{"class":173}," { Reducer } ",[164,4518,4293],{"class":237},[164,4520,4296],{"class":484},[164,4522,240],{"class":173},[164,4524,4525],{"class":166,"line":177},[164,4526,206],{"emptyLinePlaceholder":205},[164,4528,4529,4531,4534,4536,4538,4540,4542,4544,4546,4548,4550,4552,4554,4556,4558],{"class":166,"line":186},[164,4530,921],{"class":237},[164,4532,4533],{"class":219}," SliceAction",[164,4535,472],{"class":173},[164,4537,2674],{"class":219},[164,4539,2294],{"class":237},[164,4541,1655],{"class":189},[164,4543,1641],{"class":237},[164,4545,1655],{"class":189},[164,4547,82],{"class":173},[164,4549,2158],{"class":219},[164,4551,1641],{"class":237},[164,4553,2228],{"class":189},[164,4555,2166],{"class":173},[164,4557,481],{"class":237},[164,4559,183],{"class":173},[164,4561,4562,4564,4566,4568],{"class":166,"line":196},[164,4563,2701],{"class":1648},[164,4565,1652],{"class":237},[164,4567,2706],{"class":219},[164,4569,174],{"class":173},[164,4571,4572,4574,4576,4578],{"class":166,"line":202},[164,4573,2188],{"class":1648},[164,4575,1652],{"class":237},[164,4577,2718],{"class":219},[164,4579,174],{"class":173},[164,4581,4582],{"class":166,"line":209},[164,4583,199],{"class":173},[164,4585,4586],{"class":166,"line":216},[164,4587,206],{"emptyLinePlaceholder":205},[164,4589,4590,4592,4595,4597,4599,4601,4603,4605,4608,4610,4613,4615,4618,4620,4622,4625,4627],{"class":166,"line":225},[164,4591,921],{"class":237},[164,4593,4594],{"class":219}," SimpleSlice",[164,4596,472],{"class":173},[164,4598,2556],{"class":219},[164,4600,2294],{"class":237},[164,4602,1655],{"class":189},[164,4604,82],{"class":173},[164,4606,4607],{"class":219},"ReducerType",[164,4609,2294],{"class":237},[164,4611,4612],{"class":219}," Reducer",[164,4614,472],{"class":173},[164,4616,4617],{"class":189},"any",[164,4619,82],{"class":173},[164,4621,4617],{"class":189},[164,4623,4624],{"class":173},">> ",[164,4626,481],{"class":237},[164,4628,183],{"class":173},[164,4630,4631,4633,4635,4637],{"class":166,"line":243},[164,4632,2381],{"class":1648},[164,4634,1652],{"class":237},[164,4636,2386],{"class":219},[164,4638,240],{"class":173},[164,4640,4641,4644,4646,4649],{"class":166,"line":631},[164,4642,4643],{"class":1648},"  reducer",[164,4645,1652],{"class":237},[164,4647,4648],{"class":219}," ReducerType",[164,4650,174],{"class":173},[164,4652,4653],{"class":166,"line":645},[164,4654,199],{"class":173},[164,4656,4657],{"class":166,"line":650},[164,4658,206],{"emptyLinePlaceholder":205},[164,4660,4661,4663,4666,4668,4671,4673,4675,4678,4680,4683,4685,4687,4689,4692,4694,4696,4698,4700,4702,4704,4706,4708,4711,4713,4715,4717,4719],{"class":166,"line":655},[164,4662,921],{"class":237},[164,4664,4665],{"class":219}," TypesFromSlices",[164,4667,472],{"class":173},[164,4669,4670],{"class":219},"T",[164,4672,2166],{"class":173},[164,4674,481],{"class":237},[164,4676,4677],{"class":219}," T",[164,4679,2294],{"class":237},[164,4681,4682],{"class":237}," readonly",[164,4684,3174],{"class":173},[164,4686,3317],{"class":1648},[164,4688,1652],{"class":237},[164,4690,4691],{"class":237}," infer",[164,4693,2386],{"class":219},[164,4695,2294],{"class":237},[164,4697,1655],{"class":189},[164,4699,82],{"class":173},[164,4701,3958],{"class":1648},[164,4703,1652],{"class":237},[164,4705,4612],{"class":219},[164,4707,472],{"class":173},[164,4709,4710],{"class":237},"infer",[164,4712,2181],{"class":219},[164,4714,82],{"class":173},[164,4716,4710],{"class":237},[164,4718,2669],{"class":219},[164,4720,4721],{"class":173},"> }[]\n",[164,4723,4724,4727,4729,4731,4733,4735,4737,4739,4741,4743,4745],{"class":166,"line":662},[164,4725,4726],{"class":237},"  ?",[164,4728,2669],{"class":219},[164,4730,2294],{"class":237},[164,4732,4533],{"class":219},[164,4734,472],{"class":173},[164,4736,4710],{"class":237},[164,4738,2706],{"class":219},[164,4740,82],{"class":173},[164,4742,4710],{"class":237},[164,4744,2718],{"class":219},[164,4746,488],{"class":173},[164,4748,4749,4751],{"class":166,"line":678},[164,4750,4726],{"class":237},[164,4752,183],{"class":173},[164,4754,4755,4758,4760,4762,4764,4766,4768,4770],{"class":166,"line":692},[164,4756,4757],{"class":1648},"    action",[164,4759,1652],{"class":237},[164,4761,4533],{"class":219},[164,4763,472],{"class":173},[164,4765,2674],{"class":219},[164,4767,82],{"class":173},[164,4769,2158],{"class":219},[164,4771,1745],{"class":173},[164,4773,4774,4777,4779,4782,4785,4787,4789,4792,4794,4796],{"class":166,"line":704},[164,4775,4776],{"class":1648},"    state",[164,4778,1652],{"class":237},[164,4780,4781],{"class":173}," { [",[164,4783,4784],{"class":219},"P",[164,4786,3597],{"class":237},[164,4788,2386],{"class":219},[164,4790,4791],{"class":173},"]",[164,4793,1652],{"class":237},[164,4795,2181],{"class":219},[164,4797,3668],{"class":173},[164,4799,4800,4803,4805,4808,4811],{"class":166,"line":986},[164,4801,4802],{"class":173},"  } ",[164,4804,1652],{"class":237},[164,4806,4807],{"class":189}," never",[164,4809,4810],{"class":237}," :",[164,4812,4813],{"class":189}," never\n",[164,4815,4816],{"class":166,"line":991},[164,4817,206],{"emptyLinePlaceholder":205},[164,4819,4820,4822,4824,4827,4829],{"class":166,"line":997},[164,4821,1692],{"class":237},[164,4823,1695],{"class":237},[164,4825,4826],{"class":219}," configureStore",[164,4828,1641],{"class":237},[164,4830,2445],{"class":173},[164,4832,4833,4836,4838,4840,4842,4844,4846,4849,4851,4853,4855,4857,4859,4861],{"class":166,"line":1009},[164,4834,4835],{"class":219},"  Slice",[164,4837,2294],{"class":237},[164,4839,4594],{"class":219},[164,4841,472],{"class":173},[164,4843,1737],{"class":189},[164,4845,82],{"class":173},[164,4847,4848],{"class":219},"Reducer",[164,4850,472],{"class":173},[164,4852,4617],{"class":189},[164,4854,82],{"class":173},[164,4856,4617],{"class":189},[164,4858,82],{"class":173},[164,4860,4617],{"class":189},[164,4862,2343],{"class":173},[164,4864,4865,4867,4869,4871,4873,4876,4879,4882],{"class":166,"line":1014},[164,4866,2303],{"class":219},[164,4868,2294],{"class":237},[164,4870,4665],{"class":219},[164,4872,472],{"class":173},[164,4874,4875],{"class":219},"Slice",[164,4877,4878],{"class":173},"[]>[",[164,4880,4881],{"class":484},"'state'",[164,4883,3164],{"class":173},[164,4885,4886,4888,4890,4892,4894,4896,4898,4901],{"class":166,"line":1020},[164,4887,3169],{"class":219},[164,4889,2294],{"class":237},[164,4891,4665],{"class":219},[164,4893,472],{"class":173},[164,4895,4875],{"class":219},[164,4897,4878],{"class":173},[164,4899,4900],{"class":484},"'action'",[164,4902,3164],{"class":173},[164,4904,4905,4907,4910,4912,4915,4918,4920],{"class":166,"line":1032},[164,4906,4368],{"class":173},[164,4908,4909],{"class":1648},"slices",[164,4911,1652],{"class":237},[164,4913,4914],{"class":219}," Slice",[164,4916,4917],{"class":173},"[]) ",[164,4919,1799],{"class":237},[164,4921,183],{"class":173},[164,4923,4924,4926,4929,4931,4934,4936,4938,4940,4942,4945,4947,4949],{"class":166,"line":1037},[164,4925,3248],{"class":237},[164,4927,4928],{"class":189}," reducersByName",[164,4930,1641],{"class":237},[164,4932,4933],{"class":173}," slices.",[164,4935,3285],{"class":219},[164,4937,3288],{"class":173},[164,4939,3291],{"class":1648},[164,4941,82],{"class":173},[164,4943,4944],{"class":1648},"current",[164,4946,1430],{"class":173},[164,4948,1799],{"class":237},[164,4950,183],{"class":173},[164,4952,4953,4956,4958],{"class":166,"line":1043},[164,4954,4955],{"class":173},"    acc[current.name] ",[164,4957,481],{"class":237},[164,4959,4960],{"class":173}," current.reducer;\n",[164,4962,4963,4965],{"class":166,"line":1899},[164,4964,3345],{"class":237},[164,4966,3348],{"class":173},[164,4968,4969,4971,4973,4975,4977,4979,4981,4983],{"class":166,"line":1925},[164,4970,3353],{"class":173},[164,4972,1729],{"class":237},[164,4974,1732],{"class":219},[164,4976,472],{"class":173},[164,4978,1737],{"class":189},[164,4980,82],{"class":173},[164,4982,4848],{"class":219},[164,4984,3369],{"class":173},[164,4986,4987],{"class":166,"line":1930},[164,4988,206],{"emptyLinePlaceholder":205},[164,4990,4991,4993,4995,4997,5000,5003,5005,5007,5009,5011,5013,5016],{"class":166,"line":1936},[164,4992,3248],{"class":237},[164,4994,3380],{"class":189},[164,4996,1641],{"class":237},[164,4998,4999],{"class":219}," combineReducers",[164,5001,5002],{"class":173},"(reducersByName) ",[164,5004,1729],{"class":237},[164,5006,4612],{"class":219},[164,5008,472],{"class":173},[164,5010,2153],{"class":219},[164,5012,82],{"class":173},[164,5014,5015],{"class":219},"Action",[164,5017,4472],{"class":173},[164,5019,5020],{"class":166,"line":1941},[164,5021,206],{"emptyLinePlaceholder":205},[164,5023,5024,5026,5029,5031,5034],{"class":166,"line":1950},[164,5025,3248],{"class":237},[164,5027,5028],{"class":189}," store",[164,5030,1641],{"class":237},[164,5032,5033],{"class":219}," createStore",[164,5035,5036],{"class":173},"(reducer);\n",[164,5038,5039],{"class":166,"line":1959},[164,5040,206],{"emptyLinePlaceholder":205},[164,5042,5043,5045],{"class":166,"line":1964},[164,5044,2615],{"class":237},[164,5046,183],{"class":173},[164,5048,5049],{"class":166,"line":1970},[164,5050,5051],{"class":173},"    store,\n",[164,5053,5054],{"class":166,"line":1975},[164,5055,2637],{"class":173},[164,5057,5058],{"class":166,"line":1981},[164,5059,2428],{"class":173},[16,5061,5062,5063,5066,5067,5069,5070,5073,5074,5076,5077,23,5079,5081,5082,5084,5085,5087,5088,23,5090,5092,5093,5095,5096,23,5098,5100,5101,23,5103],{},"Чтобы правильно типизировать созданный стор, нужно указать стейт и экшены редьюсера,\nкоторый будет создан при помощи ",[20,5064,5065],{},"combineReducers",".\nМы можем извлечь стейт и экшены из редьюсеров при помощи ",[20,5068,4710],{},".\nВ хелпере ",[20,5071,5072],{},"TypesFromSlices"," мы постепенно проверяем сначала, что ",[20,5075,4670],{}," расширяет массив объектов,\nгде есть два интересующих нас поля - ",[20,5078,3317],{},[20,5080,3958],{},". Мы можем вытащить типы этих полей при помощи ",[20,5083,4710],{},".\nПохожим образом при помощи ",[20,5086,4710],{}," можно вытащить типы ",[20,5089,2153],{},[20,5091,5015],{},".\nИз ",[20,5094,5015],{}," в свою очередь можно достать ",[20,5097,2674],{},[20,5099,2158],{},".\nПосле этого мы можем вернуть извлеченные типы для ",[20,5102,3296],{},[20,5104,1785],{},[11,5106,5108],{"id":5107},"bring-all-together","Собираем все вместе",[155,5110,5113],{"className":1622,"code":5111,"filename":5112,"language":1625,"meta":160,"style":160},"\nimport { createStore, combineReducers } from 'redux';\nimport type { Store as ReduxStore, Reducer } from 'redux';\nimport { produce } from 'immer';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector';\n\ntype SliceActionCreator\u003CState, Payload = any> = (state: State, payload: Payload) => void\n\ntype SliceSelector\u003CState, Payload = any> = (state: State, payload: Payload) => void\n\ntype Scoped\u003CString extends string, Scope extends string> = `${Scope}/${String}`;\n\ntype CreateSliceProps\u003C\n  Name extends string,\n  State extends Record\u003Cstring, unknown>,\n  Actions extends Record\u003Cstring, SliceActionCreator\u003CState>>,\n  Selectors extends Record\u003Cstring, SliceSelector\u003CState>>\n> = {\n  name: Name\n  actions: Actions\n  defaultState: State\n  selectors: Selectors\n}\n\nexport const createSlice = \u003C\n  Name extends string,\n  State extends Record\u003Cstring, unknown>,\n  Actions extends Record\u003Cstring, SliceActionCreator\u003CState>>,\n  ActionKey extends Extract\u003Ckeyof Actions, string>,\n  ScopedActionType extends Scoped\u003CActionKey, Name>,\n  Selectors extends Record\u003Cstring, SliceSelector\u003CState>>,\n  ActionPayload extends Parameters\u003CActions[ActionKey]>[1],\n  Action extends { type: ScopedActionType, payload: ActionPayload },\n>({\n    name,\n    actions,\n    defaultState,\n    selectors,\n  }: CreateSliceProps\u003CName, State, Actions, Selectors>) => {\n  const actionKeys = Object.keys(actions) as ActionKey[];\n  const actionTypeByActionKey = actionKeys.reduce((acc, action) => {\n    const scopedActionType = `${name}/${action}` as ScopedActionType;\n    acc[scopedActionType] = action;\n    return acc;\n  }, {} as Record\u003CScopedActionType, ActionKey>);\n\n  const reducer = (state: State = defaultState, action: Action) => {\n    const nextState = produce(state, draft => {\n      const actionType = actionTypeByActionKey[action.type];\n      actions[actionType]?.(draft as State, action.payload);\n    });\n    return nextState;\n  };\n\n  const sliceActions = actionKeys.reduce((acc, curr) => {\n    acc[curr] = (payload) => {\n      const scopedActionType = `${name}/${curr}` as ScopedActionType;\n\n      return {\n        type: scopedActionType,\n        payload,\n      };\n    };\n    return acc;\n  }, {} as {\n    [ActionKey in Extract\u003Ckeyof Actions, string>]: \u003CP extends Parameters\u003CActions[ActionKey]>[1]>(payload: P) => { type: Scoped\u003CActionKey, Name>, payload: P }\n  });\n\n  return {\n    name,\n    reducer,\n    actions: sliceActions,\n    selectors: selectors,\n  };\n};\n\ntype SliceAction\u003CType extends string = string, Payload = unknown> = {\n  type: Type,\n  payload: Payload,\n}\n\ntype SimpleSlice\u003CName extends string, ReducerType extends Reducer\u003Cany, any>> = {\n  name: Name;\n  reducer: ReducerType,\n}\n\ntype TypesFromSlices\u003CT> = T extends { name: infer Name extends string, reducer: Reducer\u003Cinfer State, infer Action> }[]\n  ? Action extends SliceAction\u003Cinfer Type, infer Payload>\n  ? {\n    action: SliceAction\u003CType, Payload>,\n    state: { [P in Name]: State }\n  } : never : never\n\nexport const configureStore = \u003C\n  Slice extends SimpleSlice\u003Cstring, Reducer\u003Cany, any, any>>,\n  State extends TypesFromSlices\u003CSlice[]>['state'],\n  Action extends TypesFromSlices\u003CSlice[]>['action'],\n>(slices: Slice[]) => {\n  const reducersByName = slices.reduce((acc, current) => {\n    acc[current.name] = current.reducer;\n    return acc;\n  }, {} as Record\u003Cstring, Reducer>);\n\n  const reducer = combineReducers(reducersByName) as Reducer\u003CState, Action>;\n\n  const store = createStore(reducer);\n\n  return {\n    store,\n  };\n};\n\nexport const createUseSelector = \u003C\n  Store extends ReduxStore,\n  State extends ReturnType\u003CStore['getState']>,\n>(store: Store) => {\n  const useSelector = \u003CSelector extends (state: State) => unknown>(selector: Selector) => {\n    return useSyncExternalStoreWithSelector(\n      store.subscribe,\n      store.getState,\n      store.getState,\n      selector\n    ) as ReturnType\u003CSelector>;\n  };\n\n  return useSelector;\n};\n\n","myReduxToolkit.ts",[20,5114,5115,5119,5132,5151,5165,5177,5181,5226,5230,5274,5278,5316,5320,5328,5338,5356,5378,5400,5408,5417,5426,5435,5444,5448,5452,5464,5474,5492,5514,5534,5552,5574,5596,5620,5624,5628,5632,5636,5640,5670,5690,5716,5740,5748,5754,5772,5776,5808,5826,5836,5846,5851,5858,5863,5868,5895,5912,5937,5942,5949,5954,5959,5964,5969,5976,5985,6069,6074,6079,6086,6091,6096,6101,6107,6112,6117,6122,6155,6166,6177,6182,6187,6224,6235,6246,6251,6256,6311,6336,6343,6362,6385,6398,6403,6416,6447,6466,6485,6502,6529,6538,6545,6564,6569,6596,6601,6614,6619,6626,6631,6636,6641,6646,6659,6670,6689,6706,6749,6758,6763,6768,6773,6778,6793,6798,6803,6810],{"__ignoreMap":160},[164,5116,5117],{"class":166,"line":167},[164,5118,206],{"emptyLinePlaceholder":205},[164,5120,5121,5123,5126,5128,5130],{"class":166,"line":177},[164,5122,4279],{"class":237},[164,5124,5125],{"class":173}," { createStore, combineReducers } ",[164,5127,4293],{"class":237},[164,5129,4296],{"class":484},[164,5131,240],{"class":173},[164,5133,5134,5136,5138,5140,5142,5145,5147,5149],{"class":166,"line":186},[164,5135,4279],{"class":237},[164,5137,4282],{"class":237},[164,5139,4285],{"class":173},[164,5141,1729],{"class":237},[164,5143,5144],{"class":173}," ReduxStore, Reducer } ",[164,5146,4293],{"class":237},[164,5148,4296],{"class":484},[164,5150,240],{"class":173},[164,5152,5153,5155,5158,5160,5163],{"class":166,"line":196},[164,5154,4279],{"class":237},[164,5156,5157],{"class":173}," { produce } ",[164,5159,4293],{"class":237},[164,5161,5162],{"class":484}," 'immer'",[164,5164,240],{"class":173},[164,5166,5167,5169,5171,5173,5175],{"class":166,"line":202},[164,5168,4279],{"class":237},[164,5170,4305],{"class":173},[164,5172,4293],{"class":237},[164,5174,4310],{"class":484},[164,5176,240],{"class":173},[164,5178,5179],{"class":166,"line":209},[164,5180,206],{"emptyLinePlaceholder":205},[164,5182,5183,5185,5187,5189,5191,5193,5195,5197,5199,5201,5203,5205,5207,5209,5211,5213,5215,5217,5219,5221,5223],{"class":166,"line":216},[164,5184,921],{"class":237},[164,5186,2148],{"class":219},[164,5188,472],{"class":173},[164,5190,2153],{"class":219},[164,5192,82],{"class":173},[164,5194,2158],{"class":219},[164,5196,1641],{"class":237},[164,5198,2163],{"class":189},[164,5200,2166],{"class":173},[164,5202,481],{"class":237},[164,5204,838],{"class":173},[164,5206,1785],{"class":1648},[164,5208,1652],{"class":237},[164,5210,2181],{"class":219},[164,5212,82],{"class":173},[164,5214,2657],{"class":1648},[164,5216,1652],{"class":237},[164,5218,2718],{"class":219},[164,5220,1430],{"class":173},[164,5222,1799],{"class":237},[164,5224,5225],{"class":189}," void\n",[164,5227,5228],{"class":166,"line":225},[164,5229,206],{"emptyLinePlaceholder":205},[164,5231,5232,5234,5236,5238,5240,5242,5244,5246,5248,5250,5252,5254,5256,5258,5260,5262,5264,5266,5268,5270,5272],{"class":166,"line":243},[164,5233,921],{"class":237},[164,5235,2215],{"class":219},[164,5237,472],{"class":173},[164,5239,2153],{"class":219},[164,5241,82],{"class":173},[164,5243,2158],{"class":219},[164,5245,1641],{"class":237},[164,5247,2163],{"class":189},[164,5249,2166],{"class":173},[164,5251,481],{"class":237},[164,5253,838],{"class":173},[164,5255,1785],{"class":1648},[164,5257,1652],{"class":237},[164,5259,2181],{"class":219},[164,5261,82],{"class":173},[164,5263,2657],{"class":1648},[164,5265,1652],{"class":237},[164,5267,2718],{"class":219},[164,5269,1430],{"class":173},[164,5271,1799],{"class":237},[164,5273,5225],{"class":189},[164,5275,5276],{"class":166,"line":631},[164,5277,206],{"emptyLinePlaceholder":205},[164,5279,5280,5282,5284,5286,5288,5290,5292,5294,5296,5298,5300,5302,5304,5306,5308,5310,5312,5314],{"class":166,"line":645},[164,5281,921],{"class":237},[164,5283,2992],{"class":219},[164,5285,472],{"class":173},[164,5287,2997],{"class":219},[164,5289,2294],{"class":237},[164,5291,1655],{"class":189},[164,5293,82],{"class":173},[164,5295,3006],{"class":219},[164,5297,2294],{"class":237},[164,5299,1655],{"class":189},[164,5301,2166],{"class":173},[164,5303,481],{"class":237},[164,5305,3017],{"class":484},[164,5307,3006],{"class":219},[164,5309,3022],{"class":484},[164,5311,2997],{"class":219},[164,5313,3027],{"class":484},[164,5315,240],{"class":173},[164,5317,5318],{"class":166,"line":650},[164,5319,206],{"emptyLinePlaceholder":205},[164,5321,5322,5324,5326],{"class":166,"line":655},[164,5323,921],{"class":237},[164,5325,2283],{"class":219},[164,5327,2286],{"class":173},[164,5329,5330,5332,5334,5336],{"class":166,"line":662},[164,5331,2291],{"class":219},[164,5333,2294],{"class":237},[164,5335,1655],{"class":189},[164,5337,174],{"class":173},[164,5339,5340,5342,5344,5346,5348,5350,5352,5354],{"class":166,"line":678},[164,5341,2303],{"class":219},[164,5343,2294],{"class":237},[164,5345,1732],{"class":219},[164,5347,472],{"class":173},[164,5349,1737],{"class":189},[164,5351,82],{"class":173},[164,5353,2316],{"class":189},[164,5355,1745],{"class":173},[164,5357,5358,5360,5362,5364,5366,5368,5370,5372,5374,5376],{"class":166,"line":692},[164,5359,2323],{"class":219},[164,5361,2294],{"class":237},[164,5363,1732],{"class":219},[164,5365,472],{"class":173},[164,5367,1737],{"class":189},[164,5369,82],{"class":173},[164,5371,2336],{"class":219},[164,5373,472],{"class":173},[164,5375,2153],{"class":219},[164,5377,2343],{"class":173},[164,5379,5380,5382,5384,5386,5388,5390,5392,5394,5396,5398],{"class":166,"line":704},[164,5381,2348],{"class":219},[164,5383,2294],{"class":237},[164,5385,1732],{"class":219},[164,5387,472],{"class":173},[164,5389,1737],{"class":189},[164,5391,82],{"class":173},[164,5393,2361],{"class":219},[164,5395,472],{"class":173},[164,5397,2153],{"class":219},[164,5399,2368],{"class":173},[164,5401,5402,5404,5406],{"class":166,"line":986},[164,5403,2166],{"class":173},[164,5405,481],{"class":237},[164,5407,183],{"class":173},[164,5409,5410,5412,5414],{"class":166,"line":991},[164,5411,2381],{"class":1648},[164,5413,1652],{"class":237},[164,5415,5416],{"class":219}," Name\n",[164,5418,5419,5421,5423],{"class":166,"line":997},[164,5420,2393],{"class":1648},[164,5422,1652],{"class":237},[164,5424,5425],{"class":219}," Actions\n",[164,5427,5428,5430,5432],{"class":166,"line":1009},[164,5429,2405],{"class":1648},[164,5431,1652],{"class":237},[164,5433,5434],{"class":219}," State\n",[164,5436,5437,5439,5441],{"class":166,"line":1014},[164,5438,2416],{"class":1648},[164,5440,1652],{"class":237},[164,5442,5443],{"class":219}," Selectors\n",[164,5445,5446],{"class":166,"line":1020},[164,5447,199],{"class":173},[164,5449,5450],{"class":166,"line":1032},[164,5451,206],{"emptyLinePlaceholder":205},[164,5453,5454,5456,5458,5460,5462],{"class":166,"line":1037},[164,5455,1692],{"class":237},[164,5457,1695],{"class":237},[164,5459,1703],{"class":219},[164,5461,1641],{"class":237},[164,5463,2445],{"class":173},[164,5465,5466,5468,5470,5472],{"class":166,"line":1043},[164,5467,2291],{"class":219},[164,5469,2294],{"class":237},[164,5471,1655],{"class":189},[164,5473,174],{"class":173},[164,5475,5476,5478,5480,5482,5484,5486,5488,5490],{"class":166,"line":1899},[164,5477,2303],{"class":219},[164,5479,2294],{"class":237},[164,5481,1732],{"class":219},[164,5483,472],{"class":173},[164,5485,1737],{"class":189},[164,5487,82],{"class":173},[164,5489,2316],{"class":189},[164,5491,1745],{"class":173},[164,5493,5494,5496,5498,5500,5502,5504,5506,5508,5510,5512],{"class":166,"line":1925},[164,5495,2323],{"class":219},[164,5497,2294],{"class":237},[164,5499,1732],{"class":219},[164,5501,472],{"class":173},[164,5503,1737],{"class":189},[164,5505,82],{"class":173},[164,5507,2336],{"class":219},[164,5509,472],{"class":173},[164,5511,2153],{"class":219},[164,5513,2343],{"class":173},[164,5515,5516,5518,5520,5522,5524,5526,5528,5530,5532],{"class":166,"line":1930},[164,5517,3100],{"class":219},[164,5519,2294],{"class":237},[164,5521,3105],{"class":219},[164,5523,472],{"class":173},[164,5525,3110],{"class":237},[164,5527,2398],{"class":219},[164,5529,82],{"class":173},[164,5531,1737],{"class":189},[164,5533,1745],{"class":173},[164,5535,5536,5538,5540,5542,5544,5546,5548,5550],{"class":166,"line":1936},[164,5537,3123],{"class":219},[164,5539,2294],{"class":237},[164,5541,2992],{"class":219},[164,5543,472],{"class":173},[164,5545,2962],{"class":219},[164,5547,82],{"class":173},[164,5549,2556],{"class":219},[164,5551,1745],{"class":173},[164,5553,5554,5556,5558,5560,5562,5564,5566,5568,5570,5572],{"class":166,"line":1941},[164,5555,2348],{"class":219},[164,5557,2294],{"class":237},[164,5559,1732],{"class":219},[164,5561,472],{"class":173},[164,5563,1737],{"class":189},[164,5565,82],{"class":173},[164,5567,2361],{"class":219},[164,5569,472],{"class":173},[164,5571,2153],{"class":219},[164,5573,2343],{"class":173},[164,5575,5576,5578,5580,5582,5584,5586,5588,5590,5592,5594],{"class":166,"line":1950},[164,5577,3142],{"class":219},[164,5579,2294],{"class":237},[164,5581,3147],{"class":219},[164,5583,472],{"class":173},[164,5585,2565],{"class":219},[164,5587,918],{"class":173},[164,5589,2962],{"class":219},[164,5591,3158],{"class":173},[164,5593,3161],{"class":189},[164,5595,3164],{"class":173},[164,5597,5598,5600,5602,5604,5606,5608,5610,5612,5614,5616,5618],{"class":166,"line":1959},[164,5599,3169],{"class":219},[164,5601,2294],{"class":237},[164,5603,3174],{"class":173},[164,5605,921],{"class":1648},[164,5607,1652],{"class":237},[164,5609,3181],{"class":219},[164,5611,82],{"class":173},[164,5613,2657],{"class":1648},[164,5615,1652],{"class":237},[164,5617,3190],{"class":219},[164,5619,3193],{"class":173},[164,5621,5622],{"class":166,"line":1964},[164,5623,2522],{"class":173},[164,5625,5626],{"class":166,"line":1970},[164,5627,2527],{"class":173},[164,5629,5630],{"class":166,"line":1975},[164,5631,2532],{"class":173},[164,5633,5634],{"class":166,"line":1981},[164,5635,2537],{"class":173},[164,5637,5638],{"class":166,"line":1986},[164,5639,2542],{"class":173},[164,5641,5642,5644,5646,5648,5650,5652,5654,5656,5658,5660,5662,5664,5666,5668],{"class":166,"line":1992},[164,5643,2547],{"class":173},[164,5645,1652],{"class":237},[164,5647,2283],{"class":219},[164,5649,472],{"class":173},[164,5651,2556],{"class":219},[164,5653,82],{"class":173},[164,5655,2153],{"class":219},[164,5657,82],{"class":173},[164,5659,2565],{"class":219},[164,5661,82],{"class":173},[164,5663,2570],{"class":219},[164,5665,2573],{"class":173},[164,5667,1799],{"class":237},[164,5669,183],{"class":173},[164,5671,5672,5674,5676,5678,5680,5682,5684,5686,5688],{"class":166,"line":2027},[164,5673,3248],{"class":237},[164,5675,3251],{"class":189},[164,5677,1641],{"class":237},[164,5679,3256],{"class":173},[164,5681,3259],{"class":219},[164,5683,3262],{"class":173},[164,5685,1729],{"class":237},[164,5687,3267],{"class":219},[164,5689,3270],{"class":173},[164,5691,5692,5694,5696,5698,5700,5702,5704,5706,5708,5710,5712,5714],{"class":166,"line":2032},[164,5693,3248],{"class":237},[164,5695,3277],{"class":189},[164,5697,1641],{"class":237},[164,5699,3282],{"class":173},[164,5701,3285],{"class":219},[164,5703,3288],{"class":173},[164,5705,3291],{"class":1648},[164,5707,82],{"class":173},[164,5709,3296],{"class":1648},[164,5711,1430],{"class":173},[164,5713,1799],{"class":237},[164,5715,183],{"class":173},[164,5717,5718,5720,5722,5724,5726,5728,5730,5732,5734,5736,5738],{"class":166,"line":2052},[164,5719,3307],{"class":237},[164,5721,3310],{"class":189},[164,5723,1641],{"class":237},[164,5725,3017],{"class":484},[164,5727,3317],{"class":173},[164,5729,3022],{"class":484},[164,5731,3296],{"class":173},[164,5733,3027],{"class":484},[164,5735,3326],{"class":237},[164,5737,3181],{"class":219},[164,5739,240],{"class":173},[164,5741,5742,5744,5746],{"class":166,"line":2061},[164,5743,3335],{"class":173},[164,5745,481],{"class":237},[164,5747,3340],{"class":173},[164,5749,5750,5752],{"class":166,"line":2067},[164,5751,3345],{"class":237},[164,5753,3348],{"class":173},[164,5755,5756,5758,5760,5762,5764,5766,5768,5770],{"class":166,"line":2078},[164,5757,3353],{"class":173},[164,5759,1729],{"class":237},[164,5761,1732],{"class":219},[164,5763,472],{"class":173},[164,5765,3362],{"class":219},[164,5767,82],{"class":173},[164,5769,2962],{"class":219},[164,5771,3369],{"class":173},[164,5773,5774],{"class":166,"line":2089},[164,5775,206],{"emptyLinePlaceholder":205},[164,5777,5778,5780,5782,5784,5786,5788,5790,5792,5794,5796,5798,5800,5802,5804,5806],{"class":166,"line":2100},[164,5779,3248],{"class":237},[164,5781,3380],{"class":219},[164,5783,1641],{"class":237},[164,5785,838],{"class":173},[164,5787,1785],{"class":1648},[164,5789,1652],{"class":237},[164,5791,2181],{"class":219},[164,5793,1641],{"class":237},[164,5795,3395],{"class":173},[164,5797,3296],{"class":1648},[164,5799,1652],{"class":237},[164,5801,2669],{"class":219},[164,5803,1430],{"class":173},[164,5805,1799],{"class":237},[164,5807,183],{"class":173},[164,5809,5810,5812,5814,5816,5818,5820,5822,5824],{"class":166,"line":2111},[164,5811,3307],{"class":237},[164,5813,3414],{"class":189},[164,5815,1641],{"class":237},[164,5817,3419],{"class":219},[164,5819,3422],{"class":173},[164,5821,3425],{"class":1648},[164,5823,2009],{"class":237},[164,5825,183],{"class":173},[164,5827,5828,5830,5832,5834],{"class":166,"line":2117},[164,5829,1860],{"class":237},[164,5831,3436],{"class":189},[164,5833,1641],{"class":237},[164,5835,3441],{"class":173},[164,5837,5838,5840,5842,5844],{"class":166,"line":2123},[164,5839,3446],{"class":173},[164,5841,1729],{"class":237},[164,5843,2181],{"class":219},[164,5845,3453],{"class":173},[164,5847,5849],{"class":166,"line":5848},51,[164,5850,3458],{"class":173},[164,5852,5854,5856],{"class":166,"line":5853},52,[164,5855,3345],{"class":237},[164,5857,3465],{"class":173},[164,5859,5861],{"class":166,"line":5860},53,[164,5862,2637],{"class":173},[164,5864,5866],{"class":166,"line":5865},54,[164,5867,206],{"emptyLinePlaceholder":205},[164,5869,5871,5873,5875,5877,5879,5881,5883,5885,5887,5889,5891,5893],{"class":166,"line":5870},55,[164,5872,3248],{"class":237},[164,5874,3480],{"class":189},[164,5876,1641],{"class":237},[164,5878,3282],{"class":173},[164,5880,3285],{"class":219},[164,5882,3288],{"class":173},[164,5884,3291],{"class":1648},[164,5886,82],{"class":173},[164,5888,3495],{"class":1648},[164,5890,1430],{"class":173},[164,5892,1799],{"class":237},[164,5894,183],{"class":173},[164,5896,5898,5900,5902,5904,5906,5908,5910],{"class":166,"line":5897},56,[164,5899,3506],{"class":173},[164,5901,481],{"class":237},[164,5903,838],{"class":173},[164,5905,2657],{"class":1648},[164,5907,1430],{"class":173},[164,5909,1799],{"class":237},[164,5911,183],{"class":173},[164,5913,5915,5917,5919,5921,5923,5925,5927,5929,5931,5933,5935],{"class":166,"line":5914},57,[164,5916,1860],{"class":237},[164,5918,3310],{"class":189},[164,5920,1641],{"class":237},[164,5922,3017],{"class":484},[164,5924,3317],{"class":173},[164,5926,3022],{"class":484},[164,5928,3495],{"class":173},[164,5930,3027],{"class":484},[164,5932,3326],{"class":237},[164,5934,3181],{"class":219},[164,5936,240],{"class":173},[164,5938,5940],{"class":166,"line":5939},58,[164,5941,206],{"emptyLinePlaceholder":205},[164,5943,5945,5947],{"class":166,"line":5944},59,[164,5946,3551],{"class":237},[164,5948,183],{"class":173},[164,5950,5952],{"class":166,"line":5951},60,[164,5953,3558],{"class":173},[164,5955,5957],{"class":166,"line":5956},61,[164,5958,3563],{"class":173},[164,5960,5962],{"class":166,"line":5961},62,[164,5963,3568],{"class":173},[164,5965,5967],{"class":166,"line":5966},63,[164,5968,3573],{"class":173},[164,5970,5972,5974],{"class":166,"line":5971},64,[164,5973,3345],{"class":237},[164,5975,3348],{"class":173},[164,5977,5979,5981,5983],{"class":166,"line":5978},65,[164,5980,3353],{"class":173},[164,5982,1729],{"class":237},[164,5984,183],{"class":173},[164,5986,5988,5990,5992,5994,5996,5998,6000,6002,6004,6006,6008,6010,6012,6014,6016,6018,6020,6022,6024,6026,6028,6030,6033,6035,6037,6039,6041,6043,6045,6047,6049,6051,6053,6055,6057,6059,6061,6063,6065,6067],{"class":166,"line":5987},66,[164,5989,3592],{"class":173},[164,5991,2962],{"class":219},[164,5993,3597],{"class":237},[164,5995,3105],{"class":219},[164,5997,472],{"class":173},[164,5999,3110],{"class":237},[164,6001,2398],{"class":219},[164,6003,82],{"class":173},[164,6005,1737],{"class":189},[164,6007,3612],{"class":173},[164,6009,1652],{"class":237},[164,6011,4393],{"class":173},[164,6013,4784],{"class":219},[164,6015,2294],{"class":237},[164,6017,3147],{"class":219},[164,6019,472],{"class":173},[164,6021,2565],{"class":219},[164,6023,918],{"class":173},[164,6025,2962],{"class":219},[164,6027,3158],{"class":173},[164,6029,3161],{"class":189},[164,6031,6032],{"class":173},"]>(",[164,6034,2657],{"class":1648},[164,6036,1652],{"class":237},[164,6038,3665],{"class":219},[164,6040,1430],{"class":173},[164,6042,1799],{"class":237},[164,6044,3174],{"class":173},[164,6046,921],{"class":1648},[164,6048,1652],{"class":237},[164,6050,2992],{"class":219},[164,6052,472],{"class":173},[164,6054,2962],{"class":219},[164,6056,82],{"class":173},[164,6058,2556],{"class":219},[164,6060,3658],{"class":173},[164,6062,2657],{"class":1648},[164,6064,1652],{"class":237},[164,6066,3665],{"class":219},[164,6068,3668],{"class":173},[164,6070,6072],{"class":166,"line":6071},67,[164,6073,3673],{"class":173},[164,6075,6077],{"class":166,"line":6076},68,[164,6078,206],{"emptyLinePlaceholder":205},[164,6080,6082,6084],{"class":166,"line":6081},69,[164,6083,2615],{"class":237},[164,6085,183],{"class":173},[164,6087,6089],{"class":166,"line":6088},70,[164,6090,2527],{"class":173},[164,6092,6094],{"class":166,"line":6093},71,[164,6095,2622],{"class":173},[164,6097,6099],{"class":166,"line":6098},72,[164,6100,2632],{"class":173},[164,6102,6104],{"class":166,"line":6103},73,[164,6105,6106],{"class":173},"    selectors: selectors,\n",[164,6108,6110],{"class":166,"line":6109},74,[164,6111,2637],{"class":173},[164,6113,6115],{"class":166,"line":6114},75,[164,6116,2428],{"class":173},[164,6118,6120],{"class":166,"line":6119},76,[164,6121,206],{"emptyLinePlaceholder":205},[164,6123,6125,6127,6129,6131,6133,6135,6137,6139,6141,6143,6145,6147,6149,6151,6153],{"class":166,"line":6124},77,[164,6126,921],{"class":237},[164,6128,4533],{"class":219},[164,6130,472],{"class":173},[164,6132,2674],{"class":219},[164,6134,2294],{"class":237},[164,6136,1655],{"class":189},[164,6138,1641],{"class":237},[164,6140,1655],{"class":189},[164,6142,82],{"class":173},[164,6144,2158],{"class":219},[164,6146,1641],{"class":237},[164,6148,2228],{"class":189},[164,6150,2166],{"class":173},[164,6152,481],{"class":237},[164,6154,183],{"class":173},[164,6156,6158,6160,6162,6164],{"class":166,"line":6157},78,[164,6159,2701],{"class":1648},[164,6161,1652],{"class":237},[164,6163,2706],{"class":219},[164,6165,174],{"class":173},[164,6167,6169,6171,6173,6175],{"class":166,"line":6168},79,[164,6170,2188],{"class":1648},[164,6172,1652],{"class":237},[164,6174,2718],{"class":219},[164,6176,174],{"class":173},[164,6178,6180],{"class":166,"line":6179},80,[164,6181,199],{"class":173},[164,6183,6185],{"class":166,"line":6184},81,[164,6186,206],{"emptyLinePlaceholder":205},[164,6188,6190,6192,6194,6196,6198,6200,6202,6204,6206,6208,6210,6212,6214,6216,6218,6220,6222],{"class":166,"line":6189},82,[164,6191,921],{"class":237},[164,6193,4594],{"class":219},[164,6195,472],{"class":173},[164,6197,2556],{"class":219},[164,6199,2294],{"class":237},[164,6201,1655],{"class":189},[164,6203,82],{"class":173},[164,6205,4607],{"class":219},[164,6207,2294],{"class":237},[164,6209,4612],{"class":219},[164,6211,472],{"class":173},[164,6213,4617],{"class":189},[164,6215,82],{"class":173},[164,6217,4617],{"class":189},[164,6219,4624],{"class":173},[164,6221,481],{"class":237},[164,6223,183],{"class":173},[164,6225,6227,6229,6231,6233],{"class":166,"line":6226},83,[164,6228,2381],{"class":1648},[164,6230,1652],{"class":237},[164,6232,2386],{"class":219},[164,6234,240],{"class":173},[164,6236,6238,6240,6242,6244],{"class":166,"line":6237},84,[164,6239,4643],{"class":1648},[164,6241,1652],{"class":237},[164,6243,4648],{"class":219},[164,6245,174],{"class":173},[164,6247,6249],{"class":166,"line":6248},85,[164,6250,199],{"class":173},[164,6252,6254],{"class":166,"line":6253},86,[164,6255,206],{"emptyLinePlaceholder":205},[164,6257,6259,6261,6263,6265,6267,6269,6271,6273,6275,6277,6279,6281,6283,6285,6287,6289,6291,6293,6295,6297,6299,6301,6303,6305,6307,6309],{"class":166,"line":6258},87,[164,6260,921],{"class":237},[164,6262,4665],{"class":219},[164,6264,472],{"class":173},[164,6266,4670],{"class":219},[164,6268,2166],{"class":173},[164,6270,481],{"class":237},[164,6272,4677],{"class":219},[164,6274,2294],{"class":237},[164,6276,3174],{"class":173},[164,6278,3317],{"class":1648},[164,6280,1652],{"class":237},[164,6282,4691],{"class":237},[164,6284,2386],{"class":219},[164,6286,2294],{"class":237},[164,6288,1655],{"class":189},[164,6290,82],{"class":173},[164,6292,3958],{"class":1648},[164,6294,1652],{"class":237},[164,6296,4612],{"class":219},[164,6298,472],{"class":173},[164,6300,4710],{"class":237},[164,6302,2181],{"class":219},[164,6304,82],{"class":173},[164,6306,4710],{"class":237},[164,6308,2669],{"class":219},[164,6310,4721],{"class":173},[164,6312,6314,6316,6318,6320,6322,6324,6326,6328,6330,6332,6334],{"class":166,"line":6313},88,[164,6315,4726],{"class":237},[164,6317,2669],{"class":219},[164,6319,2294],{"class":237},[164,6321,4533],{"class":219},[164,6323,472],{"class":173},[164,6325,4710],{"class":237},[164,6327,2706],{"class":219},[164,6329,82],{"class":173},[164,6331,4710],{"class":237},[164,6333,2718],{"class":219},[164,6335,488],{"class":173},[164,6337,6339,6341],{"class":166,"line":6338},89,[164,6340,4726],{"class":237},[164,6342,183],{"class":173},[164,6344,6346,6348,6350,6352,6354,6356,6358,6360],{"class":166,"line":6345},90,[164,6347,4757],{"class":1648},[164,6349,1652],{"class":237},[164,6351,4533],{"class":219},[164,6353,472],{"class":173},[164,6355,2674],{"class":219},[164,6357,82],{"class":173},[164,6359,2158],{"class":219},[164,6361,1745],{"class":173},[164,6363,6365,6367,6369,6371,6373,6375,6377,6379,6381,6383],{"class":166,"line":6364},91,[164,6366,4776],{"class":1648},[164,6368,1652],{"class":237},[164,6370,4781],{"class":173},[164,6372,4784],{"class":219},[164,6374,3597],{"class":237},[164,6376,2386],{"class":219},[164,6378,4791],{"class":173},[164,6380,1652],{"class":237},[164,6382,2181],{"class":219},[164,6384,3668],{"class":173},[164,6386,6388,6390,6392,6394,6396],{"class":166,"line":6387},92,[164,6389,4802],{"class":173},[164,6391,1652],{"class":237},[164,6393,4807],{"class":189},[164,6395,4810],{"class":237},[164,6397,4813],{"class":189},[164,6399,6401],{"class":166,"line":6400},93,[164,6402,206],{"emptyLinePlaceholder":205},[164,6404,6406,6408,6410,6412,6414],{"class":166,"line":6405},94,[164,6407,1692],{"class":237},[164,6409,1695],{"class":237},[164,6411,4826],{"class":219},[164,6413,1641],{"class":237},[164,6415,2445],{"class":173},[164,6417,6419,6421,6423,6425,6427,6429,6431,6433,6435,6437,6439,6441,6443,6445],{"class":166,"line":6418},95,[164,6420,4835],{"class":219},[164,6422,2294],{"class":237},[164,6424,4594],{"class":219},[164,6426,472],{"class":173},[164,6428,1737],{"class":189},[164,6430,82],{"class":173},[164,6432,4848],{"class":219},[164,6434,472],{"class":173},[164,6436,4617],{"class":189},[164,6438,82],{"class":173},[164,6440,4617],{"class":189},[164,6442,82],{"class":173},[164,6444,4617],{"class":189},[164,6446,2343],{"class":173},[164,6448,6450,6452,6454,6456,6458,6460,6462,6464],{"class":166,"line":6449},96,[164,6451,2303],{"class":219},[164,6453,2294],{"class":237},[164,6455,4665],{"class":219},[164,6457,472],{"class":173},[164,6459,4875],{"class":219},[164,6461,4878],{"class":173},[164,6463,4881],{"class":484},[164,6465,3164],{"class":173},[164,6467,6469,6471,6473,6475,6477,6479,6481,6483],{"class":166,"line":6468},97,[164,6470,3169],{"class":219},[164,6472,2294],{"class":237},[164,6474,4665],{"class":219},[164,6476,472],{"class":173},[164,6478,4875],{"class":219},[164,6480,4878],{"class":173},[164,6482,4900],{"class":484},[164,6484,3164],{"class":173},[164,6486,6488,6490,6492,6494,6496,6498,6500],{"class":166,"line":6487},98,[164,6489,4368],{"class":173},[164,6491,4909],{"class":1648},[164,6493,1652],{"class":237},[164,6495,4914],{"class":219},[164,6497,4917],{"class":173},[164,6499,1799],{"class":237},[164,6501,183],{"class":173},[164,6503,6505,6507,6509,6511,6513,6515,6517,6519,6521,6523,6525,6527],{"class":166,"line":6504},99,[164,6506,3248],{"class":237},[164,6508,4928],{"class":189},[164,6510,1641],{"class":237},[164,6512,4933],{"class":173},[164,6514,3285],{"class":219},[164,6516,3288],{"class":173},[164,6518,3291],{"class":1648},[164,6520,82],{"class":173},[164,6522,4944],{"class":1648},[164,6524,1430],{"class":173},[164,6526,1799],{"class":237},[164,6528,183],{"class":173},[164,6530,6532,6534,6536],{"class":166,"line":6531},100,[164,6533,4955],{"class":173},[164,6535,481],{"class":237},[164,6537,4960],{"class":173},[164,6539,6541,6543],{"class":166,"line":6540},101,[164,6542,3345],{"class":237},[164,6544,3348],{"class":173},[164,6546,6548,6550,6552,6554,6556,6558,6560,6562],{"class":166,"line":6547},102,[164,6549,3353],{"class":173},[164,6551,1729],{"class":237},[164,6553,1732],{"class":219},[164,6555,472],{"class":173},[164,6557,1737],{"class":189},[164,6559,82],{"class":173},[164,6561,4848],{"class":219},[164,6563,3369],{"class":173},[164,6565,6567],{"class":166,"line":6566},103,[164,6568,206],{"emptyLinePlaceholder":205},[164,6570,6572,6574,6576,6578,6580,6582,6584,6586,6588,6590,6592,6594],{"class":166,"line":6571},104,[164,6573,3248],{"class":237},[164,6575,3380],{"class":189},[164,6577,1641],{"class":237},[164,6579,4999],{"class":219},[164,6581,5002],{"class":173},[164,6583,1729],{"class":237},[164,6585,4612],{"class":219},[164,6587,472],{"class":173},[164,6589,2153],{"class":219},[164,6591,82],{"class":173},[164,6593,5015],{"class":219},[164,6595,4472],{"class":173},[164,6597,6599],{"class":166,"line":6598},105,[164,6600,206],{"emptyLinePlaceholder":205},[164,6602,6604,6606,6608,6610,6612],{"class":166,"line":6603},106,[164,6605,3248],{"class":237},[164,6607,5028],{"class":189},[164,6609,1641],{"class":237},[164,6611,5033],{"class":219},[164,6613,5036],{"class":173},[164,6615,6617],{"class":166,"line":6616},107,[164,6618,206],{"emptyLinePlaceholder":205},[164,6620,6622,6624],{"class":166,"line":6621},108,[164,6623,2615],{"class":237},[164,6625,183],{"class":173},[164,6627,6629],{"class":166,"line":6628},109,[164,6630,5051],{"class":173},[164,6632,6634],{"class":166,"line":6633},110,[164,6635,2637],{"class":173},[164,6637,6639],{"class":166,"line":6638},111,[164,6640,2428],{"class":173},[164,6642,6644],{"class":166,"line":6643},112,[164,6645,206],{"emptyLinePlaceholder":205},[164,6647,6649,6651,6653,6655,6657],{"class":166,"line":6648},113,[164,6650,1692],{"class":237},[164,6652,1695],{"class":237},[164,6654,4325],{"class":219},[164,6656,1641],{"class":237},[164,6658,2445],{"class":173},[164,6660,6662,6664,6666,6668],{"class":166,"line":6661},114,[164,6663,4334],{"class":219},[164,6665,2294],{"class":237},[164,6667,4339],{"class":219},[164,6669,174],{"class":173},[164,6671,6673,6675,6677,6679,6681,6683,6685,6687],{"class":166,"line":6672},115,[164,6674,2303],{"class":219},[164,6676,2294],{"class":237},[164,6678,4350],{"class":219},[164,6680,472],{"class":173},[164,6682,4355],{"class":219},[164,6684,918],{"class":173},[164,6686,4360],{"class":484},[164,6688,4363],{"class":173},[164,6690,6692,6694,6696,6698,6700,6702,6704],{"class":166,"line":6691},116,[164,6693,4368],{"class":173},[164,6695,4371],{"class":1648},[164,6697,1652],{"class":237},[164,6699,4376],{"class":219},[164,6701,1430],{"class":173},[164,6703,1799],{"class":237},[164,6705,183],{"class":173},[164,6707,6709,6711,6713,6715,6717,6719,6721,6723,6725,6727,6729,6731,6733,6735,6737,6739,6741,6743,6745,6747],{"class":166,"line":6708},117,[164,6710,3248],{"class":237},[164,6712,2002],{"class":219},[164,6714,1641],{"class":237},[164,6716,4393],{"class":173},[164,6718,4396],{"class":219},[164,6720,2294],{"class":237},[164,6722,838],{"class":173},[164,6724,1785],{"class":1648},[164,6726,1652],{"class":237},[164,6728,2181],{"class":219},[164,6730,1430],{"class":173},[164,6732,1799],{"class":237},[164,6734,2228],{"class":189},[164,6736,4368],{"class":173},[164,6738,4417],{"class":1648},[164,6740,1652],{"class":237},[164,6742,4422],{"class":219},[164,6744,1430],{"class":173},[164,6746,1799],{"class":237},[164,6748,183],{"class":173},[164,6750,6752,6754,6756],{"class":166,"line":6751},118,[164,6753,3345],{"class":237},[164,6755,4435],{"class":219},[164,6757,2058],{"class":173},[164,6759,6761],{"class":166,"line":6760},119,[164,6762,4442],{"class":173},[164,6764,6766],{"class":166,"line":6765},120,[164,6767,4447],{"class":173},[164,6769,6771],{"class":166,"line":6770},121,[164,6772,4447],{"class":173},[164,6774,6776],{"class":166,"line":6775},122,[164,6777,4456],{"class":173},[164,6779,6781,6783,6785,6787,6789,6791],{"class":166,"line":6780},123,[164,6782,4461],{"class":173},[164,6784,1729],{"class":237},[164,6786,4350],{"class":219},[164,6788,472],{"class":173},[164,6790,4396],{"class":219},[164,6792,4472],{"class":173},[164,6794,6796],{"class":166,"line":6795},124,[164,6797,2637],{"class":173},[164,6799,6801],{"class":166,"line":6800},125,[164,6802,206],{"emptyLinePlaceholder":205},[164,6804,6806,6808],{"class":166,"line":6805},126,[164,6807,2615],{"class":237},[164,6809,4487],{"class":173},[164,6811,6813],{"class":166,"line":6812},127,[164,6814,2428],{"class":173},[155,6816,6819],{"className":1622,"code":6817,"filename":6818,"language":1625,"meta":160,"style":160},"import { createSlice } from \"@/myReduxToolkit\";\n\ntype User = {\n  id: string;\n  username: string;\n  displayName: string;\n}\n\nexport const usersSlice = createSlice({\n  name: 'users',\n  defaultState: {\n    userById: {} as Record\u003Cstring, User>,\n    usernameById: {} as Record\u003Cstring, string>,\n  },\n  actions: {\n    addUser: (state, user: User) => {\n      state.userById[user.id] = user;\n      state.usernameById[user.username] = user.id;\n    },\n    deleteUser: (state, userId: string) => {\n      const user = state.userById[userId];\n      delete state.usernameById[user.username];\n      delete state.userById[userId];\n    }\n  },\n  selectors: {\n    selectUserByUsername: (state, username: string) => state.userById[state.usernameById[username]],\n    selectAllUsers: (state) => Object.values(state.userById),\n  }\n});\n\n","store/users/slice.ts",[20,6820,6821,6835,6839,6849,6859,6869,6879,6883,6887,6901,6909,6913,6931,6949,6953,6957,6979,6987,6995,6999,7021,7031,7037,7043,7047,7051,7055,7077,7098,7102],{"__ignoreMap":160},[164,6822,6823,6825,6828,6830,6833],{"class":166,"line":167},[164,6824,4279],{"class":237},[164,6826,6827],{"class":173}," { createSlice } ",[164,6829,4293],{"class":237},[164,6831,6832],{"class":484}," \"@/myReduxToolkit\"",[164,6834,240],{"class":173},[164,6836,6837],{"class":166,"line":177},[164,6838,206],{"emptyLinePlaceholder":205},[164,6840,6841,6843,6845,6847],{"class":166,"line":186},[164,6842,921],{"class":237},[164,6844,1638],{"class":219},[164,6846,1641],{"class":237},[164,6848,183],{"class":173},[164,6850,6851,6853,6855,6857],{"class":166,"line":196},[164,6852,1649],{"class":1648},[164,6854,1652],{"class":237},[164,6856,1655],{"class":189},[164,6858,240],{"class":173},[164,6860,6861,6863,6865,6867],{"class":166,"line":202},[164,6862,1662],{"class":1648},[164,6864,1652],{"class":237},[164,6866,1655],{"class":189},[164,6868,240],{"class":173},[164,6870,6871,6873,6875,6877],{"class":166,"line":209},[164,6872,1673],{"class":1648},[164,6874,1652],{"class":237},[164,6876,1655],{"class":189},[164,6878,240],{"class":173},[164,6880,6881],{"class":166,"line":216},[164,6882,199],{"class":173},[164,6884,6885],{"class":166,"line":225},[164,6886,206],{"emptyLinePlaceholder":205},[164,6888,6889,6891,6893,6895,6897,6899],{"class":166,"line":243},[164,6890,1692],{"class":237},[164,6892,1695],{"class":237},[164,6894,1698],{"class":189},[164,6896,1641],{"class":237},[164,6898,1703],{"class":219},[164,6900,1706],{"class":173},[164,6902,6903,6905,6907],{"class":166,"line":631},[164,6904,1711],{"class":173},[164,6906,1714],{"class":484},[164,6908,174],{"class":173},[164,6910,6911],{"class":166,"line":645},[164,6912,1721],{"class":173},[164,6914,6915,6917,6919,6921,6923,6925,6927,6929],{"class":166,"line":650},[164,6916,1726],{"class":173},[164,6918,1729],{"class":237},[164,6920,1732],{"class":219},[164,6922,472],{"class":173},[164,6924,1737],{"class":189},[164,6926,82],{"class":173},[164,6928,1742],{"class":219},[164,6930,1745],{"class":173},[164,6932,6933,6935,6937,6939,6941,6943,6945,6947],{"class":166,"line":655},[164,6934,1750],{"class":173},[164,6936,1729],{"class":237},[164,6938,1732],{"class":219},[164,6940,472],{"class":173},[164,6942,1737],{"class":189},[164,6944,82],{"class":173},[164,6946,1737],{"class":189},[164,6948,1745],{"class":173},[164,6950,6951],{"class":166,"line":662},[164,6952,1769],{"class":173},[164,6954,6955],{"class":166,"line":678},[164,6956,1774],{"class":173},[164,6958,6959,6961,6963,6965,6967,6969,6971,6973,6975,6977],{"class":166,"line":692},[164,6960,1779],{"class":219},[164,6962,1782],{"class":173},[164,6964,1785],{"class":1648},[164,6966,82],{"class":173},[164,6968,1790],{"class":1648},[164,6970,1652],{"class":237},[164,6972,1638],{"class":219},[164,6974,1430],{"class":173},[164,6976,1799],{"class":237},[164,6978,183],{"class":173},[164,6980,6981,6983,6985],{"class":166,"line":704},[164,6982,1811],{"class":173},[164,6984,481],{"class":237},[164,6986,1816],{"class":173},[164,6988,6989,6991,6993],{"class":166,"line":986},[164,6990,1821],{"class":173},[164,6992,481],{"class":237},[164,6994,1826],{"class":173},[164,6996,6997],{"class":166,"line":991},[164,6998,1831],{"class":173},[164,7000,7001,7003,7005,7007,7009,7011,7013,7015,7017,7019],{"class":166,"line":997},[164,7002,1836],{"class":219},[164,7004,1782],{"class":173},[164,7006,1785],{"class":1648},[164,7008,82],{"class":173},[164,7010,1845],{"class":1648},[164,7012,1652],{"class":237},[164,7014,1655],{"class":189},[164,7016,1430],{"class":173},[164,7018,1799],{"class":237},[164,7020,183],{"class":173},[164,7022,7023,7025,7027,7029],{"class":166,"line":1009},[164,7024,1860],{"class":237},[164,7026,1863],{"class":189},[164,7028,1641],{"class":237},[164,7030,1868],{"class":173},[164,7032,7033,7035],{"class":166,"line":1014},[164,7034,1873],{"class":237},[164,7036,1876],{"class":173},[164,7038,7039,7041],{"class":166,"line":1020},[164,7040,1873],{"class":237},[164,7042,1868],{"class":173},[164,7044,7045],{"class":166,"line":1032},[164,7046,1887],{"class":173},[164,7048,7049],{"class":166,"line":1037},[164,7050,1769],{"class":173},[164,7052,7053],{"class":166,"line":1043},[164,7054,1896],{"class":173},[164,7056,7057,7059,7061,7063,7065,7067,7069,7071,7073,7075],{"class":166,"line":1899},[164,7058,1902],{"class":219},[164,7060,1782],{"class":173},[164,7062,1785],{"class":1648},[164,7064,82],{"class":173},[164,7066,1911],{"class":1648},[164,7068,1652],{"class":237},[164,7070,1655],{"class":189},[164,7072,1430],{"class":173},[164,7074,1799],{"class":237},[164,7076,1922],{"class":173},[164,7078,7079,7082,7084,7086,7088,7090,7092,7095],{"class":166,"line":1925},[164,7080,7081],{"class":219},"    selectAllUsers",[164,7083,1782],{"class":173},[164,7085,1785],{"class":1648},[164,7087,1430],{"class":173},[164,7089,1799],{"class":237},[164,7091,3256],{"class":173},[164,7093,7094],{"class":219},"values",[164,7096,7097],{"class":173},"(state.userById),\n",[164,7099,7100],{"class":166,"line":1930},[164,7101,754],{"class":173},[164,7103,7104],{"class":166,"line":1936},[164,7105,1933],{"class":173},[155,7107,7110],{"className":1622,"code":7108,"filename":7109,"language":1625,"meta":160,"style":160},"import { configureStore, createUseSelector } from '@/myReduxToolkit';\nimport { usersSlice } from './users/slice';\n\nexport const { store } = configureStore([usersSlice]);\n\nexport const useSelector = createUseSelector(store);\n\n","store/index.ts",[20,7111,7112,7126,7140,7144,7164,7168],{"__ignoreMap":160},[164,7113,7114,7116,7119,7121,7124],{"class":166,"line":167},[164,7115,4279],{"class":237},[164,7117,7118],{"class":173}," { configureStore, createUseSelector } ",[164,7120,4293],{"class":237},[164,7122,7123],{"class":484}," '@/myReduxToolkit'",[164,7125,240],{"class":173},[164,7127,7128,7130,7133,7135,7138],{"class":166,"line":177},[164,7129,4279],{"class":237},[164,7131,7132],{"class":173}," { usersSlice } ",[164,7134,4293],{"class":237},[164,7136,7137],{"class":484}," './users/slice'",[164,7139,240],{"class":173},[164,7141,7142],{"class":166,"line":186},[164,7143,206],{"emptyLinePlaceholder":205},[164,7145,7146,7148,7150,7152,7154,7157,7159,7161],{"class":166,"line":196},[164,7147,1692],{"class":237},[164,7149,1695],{"class":237},[164,7151,3174],{"class":173},[164,7153,4371],{"class":189},[164,7155,7156],{"class":173}," } ",[164,7158,481],{"class":237},[164,7160,4826],{"class":219},[164,7162,7163],{"class":173},"([usersSlice]);\n",[164,7165,7166],{"class":166,"line":202},[164,7167,206],{"emptyLinePlaceholder":205},[164,7169,7170,7172,7174,7176,7178,7180],{"class":166,"line":209},[164,7171,1692],{"class":237},[164,7173,1695],{"class":237},[164,7175,2002],{"class":189},[164,7177,1641],{"class":237},[164,7179,4325],{"class":219},[164,7181,7182],{"class":173},"(store);\n",[155,7184,7189],{"className":7185,"code":7186,"filename":7187,"language":7188,"meta":160,"style":160},"language-tsx shiki shiki-themes github-light github-dark","const Test = () => {\n  const allUsers = useSelector(state => usersSlice.selectors.selectAllUsers(state.users));\n\n  console.log({\n    allUsers\n  });\n\n  return \u003Cdiv>\n    \u003Cbutton onClick={() => {\n      console.log(usersSlice.actions);\n      store.dispatch(usersSlice.actions.addUser({\n        displayName: String(Math.random()),\n        id: String(Math.random()),\n        username: String(Math.random()),\n      }));\n      console.log(store.getState());\n    }}>Add new user\u003C/button>\n\n    {allUsers.map((user) => \u003Cdiv key={user.username}>\n      \u003Cp>{user.displayName}\u003C/p>\n      \u003Cp>@{user.username}\u003C/p>\n    \u003C/div>)}\n  \u003C/div>;\n};\n","components/SomeComponent.tsx","tsx",[20,7190,7191,7206,7232,7236,7246,7251,7255,7259,7269,7287,7297,7312,7328,7341,7354,7359,7374,7383,7387,7415,7429,7442,7451,7459],{"__ignoreMap":160},[164,7192,7193,7195,7198,7200,7202,7204],{"class":166,"line":167},[164,7194,1995],{"class":237},[164,7196,7197],{"class":219}," Test",[164,7199,1641],{"class":237},[164,7201,4161],{"class":173},[164,7203,1799],{"class":237},[164,7205,183],{"class":173},[164,7207,7208,7210,7213,7215,7217,7219,7221,7223,7226,7229],{"class":166,"line":177},[164,7209,3248],{"class":237},[164,7211,7212],{"class":189}," allUsers",[164,7214,1641],{"class":237},[164,7216,2002],{"class":219},[164,7218,1289],{"class":173},[164,7220,1785],{"class":1648},[164,7222,2009],{"class":237},[164,7224,7225],{"class":173}," usersSlice.selectors.",[164,7227,7228],{"class":219},"selectAllUsers",[164,7230,7231],{"class":173},"(state.users));\n",[164,7233,7234],{"class":166,"line":186},[164,7235,206],{"emptyLinePlaceholder":205},[164,7237,7238,7241,7244],{"class":166,"line":196},[164,7239,7240],{"class":173},"  console.",[164,7242,7243],{"class":219},"log",[164,7245,1706],{"class":173},[164,7247,7248],{"class":166,"line":202},[164,7249,7250],{"class":173},"    allUsers\n",[164,7252,7253],{"class":166,"line":209},[164,7254,3673],{"class":173},[164,7256,7257],{"class":166,"line":216},[164,7258,206],{"emptyLinePlaceholder":205},[164,7260,7261,7263,7265,7267],{"class":166,"line":225},[164,7262,2615],{"class":237},[164,7264,4393],{"class":173},[164,7266,475],{"class":170},[164,7268,488],{"class":173},[164,7270,7271,7273,7275,7278,7280,7283,7285],{"class":166,"line":243},[164,7272,509],{"class":173},[164,7274,1433],{"class":170},[164,7276,7277],{"class":219}," onClick",[164,7279,481],{"class":237},[164,7281,7282],{"class":173},"{() ",[164,7284,1799],{"class":237},[164,7286,183],{"class":173},[164,7288,7289,7292,7294],{"class":166,"line":631},[164,7290,7291],{"class":173},"      console.",[164,7293,7243],{"class":219},[164,7295,7296],{"class":173},"(usersSlice.actions);\n",[164,7298,7299,7302,7305,7308,7310],{"class":166,"line":645},[164,7300,7301],{"class":173},"      store.",[164,7303,7304],{"class":219},"dispatch",[164,7306,7307],{"class":173},"(usersSlice.actions.",[164,7309,2073],{"class":219},[164,7311,1706],{"class":173},[164,7313,7314,7317,7319,7322,7325],{"class":166,"line":650},[164,7315,7316],{"class":173},"        displayName: ",[164,7318,2997],{"class":219},[164,7320,7321],{"class":173},"(Math.",[164,7323,7324],{"class":219},"random",[164,7326,7327],{"class":173},"()),\n",[164,7329,7330,7333,7335,7337,7339],{"class":166,"line":655},[164,7331,7332],{"class":173},"        id: ",[164,7334,2997],{"class":219},[164,7336,7321],{"class":173},[164,7338,7324],{"class":219},[164,7340,7327],{"class":173},[164,7342,7343,7346,7348,7350,7352],{"class":166,"line":662},[164,7344,7345],{"class":173},"        username: ",[164,7347,2997],{"class":219},[164,7349,7321],{"class":173},[164,7351,7324],{"class":219},[164,7353,7327],{"class":173},[164,7355,7356],{"class":166,"line":678},[164,7357,7358],{"class":173},"      }));\n",[164,7360,7361,7363,7365,7368,7371],{"class":166,"line":692},[164,7362,7291],{"class":173},[164,7364,7243],{"class":219},[164,7366,7367],{"class":173},"(store.",[164,7369,7370],{"class":219},"getState",[164,7372,7373],{"class":173},"());\n",[164,7375,7376,7379,7381],{"class":166,"line":704},[164,7377,7378],{"class":173},"    }}>Add new user\u003C/",[164,7380,1433],{"class":170},[164,7382,488],{"class":173},[164,7384,7385],{"class":166,"line":986},[164,7386,206],{"emptyLinePlaceholder":205},[164,7388,7389,7392,7395,7397,7399,7401,7403,7405,7407,7410,7412],{"class":166,"line":991},[164,7390,7391],{"class":173},"    {allUsers.",[164,7393,7394],{"class":219},"map",[164,7396,3288],{"class":173},[164,7398,1790],{"class":1648},[164,7400,1430],{"class":173},[164,7402,1799],{"class":237},[164,7404,4393],{"class":173},[164,7406,475],{"class":170},[164,7408,7409],{"class":219}," key",[164,7411,481],{"class":237},[164,7413,7414],{"class":173},"{user.username}>\n",[164,7416,7417,7420,7422,7425,7427],{"class":166,"line":997},[164,7418,7419],{"class":173},"      \u003C",[164,7421,16],{"class":170},[164,7423,7424],{"class":173},">{user.displayName}\u003C/",[164,7426,16],{"class":170},[164,7428,488],{"class":173},[164,7430,7431,7433,7435,7438,7440],{"class":166,"line":1009},[164,7432,7419],{"class":173},[164,7434,16],{"class":170},[164,7436,7437],{"class":173},">@{user.username}\u003C/",[164,7439,16],{"class":170},[164,7441,488],{"class":173},[164,7443,7444,7446,7448],{"class":166,"line":1014},[164,7445,530],{"class":173},[164,7447,475],{"class":170},[164,7449,7450],{"class":173},">)}\n",[164,7452,7453,7455,7457],{"class":166,"line":1020},[164,7454,539],{"class":173},[164,7456,475],{"class":170},[164,7458,4472],{"class":173},[164,7460,7461],{"class":166,"line":1032},[164,7462,2428],{"class":173},[1530,7464,7465],{},"html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .s4XuR, html code.shiki .s4XuR{--shiki-default:#E36209;--shiki-dark:#FFAB70}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s9eBZ, html code.shiki .s9eBZ{--shiki-default:#22863A;--shiki-dark:#85E89D}",{"title":160,"searchDepth":177,"depth":177,"links":7467},[7468,7469,7470,7471,7472,7473,7474,7475],{"id":1563,"depth":177,"text":1564},{"id":1615,"depth":177,"text":1616},{"id":2129,"depth":177,"text":2130},{"id":2647,"depth":177,"text":2648},{"id":3958,"depth":177,"text":3959},{"id":866,"depth":177,"text":867},{"id":4494,"depth":177,"text":4495},{"id":5107,"depth":177,"text":5108},"2024-02-12","Как работает @reduxjs/toolkit, реализация его упрощенной версии",{},"/blog/implementing-own-redux-toolkit","/images/own-redux-preview.webp",{"title":1558,"description":7477},"blog/implementing-own-redux-toolkit",[7484,7485,7486,7487],"react","redux","typescript","state-manager","OkJLGUCANe-AwCcFZCoF38kZekYrjpczJ8LxZZaSDu8",{"id":7490,"title":7491,"body":7492,"date":10416,"description":10417,"extension":1546,"meta":10418,"navigation":205,"path":10419,"previewImg":10420,"seo":10421,"stem":10422,"topics":10423,"__hash__":10425},"articles/blog/js-built-in-methods.md","Шпаргалка по built-in методам",{"type":8,"value":7493,"toc":10401},[7494,7497,7501,7511,7568,7575,7622,7629,7674,7680,7726,7729,7785,7799,7943,7946,8012,8018,8083,8087,8090,8171,8174,8243,8250,8295,8300,8343,8349,8408,8412,8415,8418,8457,8460,8501,8504,8545,8548,8585,8588,8630,8633,8778,8784,8920,8927,8930,8934,8937,8940,8943,9063,9070,9153,9157,9160,9166,9229,9232,9235,9283,9289,9339,9346,9402,9408,9496,9499,9528,9534,9631,9635,9639,9642,9653,9842,9848,9851,9857,9865,9869,9880,9886,9950,9956,9961,9966,9970,9976,10017,10020,10057,10060,10096,10099,10135,10139,10145,10314,10319,10345,10350,10398],[11,7495,7496],{"id":13},"Array",[29,7498,7500],{"id":7499},"add-delete-elements","Добавление и удаление элементов",[16,7502,7503,7504,7507,7508],{},"добавляет в ",[1597,7505,7506],{},"конец"," массива новый элемент, возвращает новый ",[20,7509,7510],{},"length",[155,7512,7516],{"className":7513,"code":7514,"language":7515,"meta":160,"style":160},"language-js shiki shiki-themes github-light github-dark","const arr = ['a', 'b'];\narr.push('c'); // 3\narr; // ['a', 'b', 'c']\n\n","js",[20,7517,7518,7541,7560],{"__ignoreMap":160},[164,7519,7520,7522,7525,7527,7530,7533,7535,7538],{"class":166,"line":167},[164,7521,1995],{"class":237},[164,7523,7524],{"class":189}," arr",[164,7526,1641],{"class":237},[164,7528,7529],{"class":173}," [",[164,7531,7532],{"class":484},"'a'",[164,7534,82],{"class":173},[164,7536,7537],{"class":484},"'b'",[164,7539,7540],{"class":173},"];\n",[164,7542,7543,7546,7549,7551,7554,7557],{"class":166,"line":177},[164,7544,7545],{"class":173},"arr.",[164,7547,7548],{"class":219},"push",[164,7550,1289],{"class":173},[164,7552,7553],{"class":484},"'c'",[164,7555,7556],{"class":173},"); ",[164,7558,7559],{"class":212},"// 3\n",[164,7561,7562,7565],{"class":166,"line":186},[164,7563,7564],{"class":173},"arr; ",[164,7566,7567],{"class":212},"// ['a', 'b', 'c']\n",[16,7569,7570,7571,7574],{},"удаляет и возвращает ",[1597,7572,7573],{},"последний"," элемент массива",[155,7576,7578],{"className":7513,"code":7577,"language":7515,"meta":160,"style":160},"const arr = ['a', 'b', 'c'];\narr.pop(); // 'c'\narr; // ['a', 'b']\n\n",[20,7579,7580,7602,7615],{"__ignoreMap":160},[164,7581,7582,7584,7586,7588,7590,7592,7594,7596,7598,7600],{"class":166,"line":167},[164,7583,1995],{"class":237},[164,7585,7524],{"class":189},[164,7587,1641],{"class":237},[164,7589,7529],{"class":173},[164,7591,7532],{"class":484},[164,7593,82],{"class":173},[164,7595,7537],{"class":484},[164,7597,82],{"class":173},[164,7599,7553],{"class":484},[164,7601,7540],{"class":173},[164,7603,7604,7606,7609,7612],{"class":166,"line":177},[164,7605,7545],{"class":173},[164,7607,7608],{"class":219},"pop",[164,7610,7611],{"class":173},"(); ",[164,7613,7614],{"class":212},"// 'c'\n",[164,7616,7617,7619],{"class":166,"line":186},[164,7618,7564],{"class":173},[164,7620,7621],{"class":212},"// ['a', 'b']\n",[16,7623,7503,7624,7507,7627],{},[1597,7625,7626],{},"начало",[20,7628,7510],{},[155,7630,7632],{"className":7513,"code":7631,"language":7515,"meta":160,"style":160},"const arr = ['a', 'b'];\narr.unshift('c'); // 3\narr; // ['с', 'a', 'b']\n\n",[20,7633,7634,7652,7667],{"__ignoreMap":160},[164,7635,7636,7638,7640,7642,7644,7646,7648,7650],{"class":166,"line":167},[164,7637,1995],{"class":237},[164,7639,7524],{"class":189},[164,7641,1641],{"class":237},[164,7643,7529],{"class":173},[164,7645,7532],{"class":484},[164,7647,82],{"class":173},[164,7649,7537],{"class":484},[164,7651,7540],{"class":173},[164,7653,7654,7656,7659,7661,7663,7665],{"class":166,"line":177},[164,7655,7545],{"class":173},[164,7657,7658],{"class":219},"unshift",[164,7660,1289],{"class":173},[164,7662,7553],{"class":484},[164,7664,7556],{"class":173},[164,7666,7559],{"class":212},[164,7668,7669,7671],{"class":166,"line":186},[164,7670,7564],{"class":173},[164,7672,7673],{"class":212},"// ['с', 'a', 'b']\n",[16,7675,7570,7676,7679],{},[1597,7677,7678],{},"первый"," элемент массива.",[155,7681,7683],{"className":7513,"code":7682,"language":7515,"meta":160,"style":160},"const arr = ['a', 'b', 'c'];\narr.shift(); // 'a'\narr; // ['b', 'c']\n\n",[20,7684,7685,7707,7719],{"__ignoreMap":160},[164,7686,7687,7689,7691,7693,7695,7697,7699,7701,7703,7705],{"class":166,"line":167},[164,7688,1995],{"class":237},[164,7690,7524],{"class":189},[164,7692,1641],{"class":237},[164,7694,7529],{"class":173},[164,7696,7532],{"class":484},[164,7698,82],{"class":173},[164,7700,7537],{"class":484},[164,7702,82],{"class":173},[164,7704,7553],{"class":484},[164,7706,7540],{"class":173},[164,7708,7709,7711,7714,7716],{"class":166,"line":177},[164,7710,7545],{"class":173},[164,7712,7713],{"class":219},"shift",[164,7715,7611],{"class":173},[164,7717,7718],{"class":212},"// 'a'\n",[164,7720,7721,7723],{"class":166,"line":186},[164,7722,7564],{"class":173},[164,7724,7725],{"class":212},"// ['b', 'c']\n",[16,7727,7728],{},"создает новый массив, включающий в себя переданные значение/массивы.\nНе мутирует** исходный массив.",[155,7730,7732],{"className":7513,"code":7731,"language":7515,"meta":160,"style":160},"['a', 'b', 'c'].concat('b', 'c', ['d', 'e'], ['f']); // ['a', 'b', 'c', 'd', 'e', 'f']\n",[20,7733,7734],{"__ignoreMap":160},[164,7735,7736,7738,7740,7742,7744,7746,7748,7751,7754,7756,7758,7760,7762,7765,7768,7770,7773,7776,7779,7782],{"class":166,"line":167},[164,7737,918],{"class":173},[164,7739,7532],{"class":484},[164,7741,82],{"class":173},[164,7743,7537],{"class":484},[164,7745,82],{"class":173},[164,7747,7553],{"class":484},[164,7749,7750],{"class":173},"].",[164,7752,7753],{"class":219},"concat",[164,7755,1289],{"class":173},[164,7757,7537],{"class":484},[164,7759,82],{"class":173},[164,7761,7553],{"class":484},[164,7763,7764],{"class":173},", [",[164,7766,7767],{"class":484},"'d'",[164,7769,82],{"class":173},[164,7771,7772],{"class":484},"'e'",[164,7774,7775],{"class":173},"], [",[164,7777,7778],{"class":484},"'f'",[164,7780,7781],{"class":173},"]); ",[164,7783,7784],{"class":212},"// ['a', 'b', 'c', 'd', 'e', 'f']\n",[16,7786,7787,7788,7791,7792,7794,7795,7798],{},"принимает два индекса - начальный и конечный и возвращает обрезанную копию.\nЕсли передать только ",[20,7789,7790],{},"begin"," - обрежется с begin по последний индекс включительно.\nЕсли передать только отрицательный ",[20,7793,7790],{}," - можно вырезать N последних элементов массива.\nЕсли передать отрицательный ",[20,7796,7797],{},"end"," - обрежется с begin по по последний индекс минус end.",[155,7800,7802],{"className":7513,"code":7801,"language":7515,"meta":160,"style":160},"['a', 'b', 'c', 'd'].slice(1) // ['b', 'c', 'd'] - обрезать с индекса 1 по конец массива\n['a', 'b', 'c', 'd'].slice(-2) // ['b', 'c', 'd'] - вырезать последние два элемента массива\n['a', 'b', 'c', 'd'].slice(1, 3) // ['b', 'c'] - обрезать с индекса 1 по индекс 3, т.е. элементы с индексами 1, 2\n['a', 'b', 'c', 'd'].slice(0, -1); // ['a', 'b', 'c'] - обрезать, убрав последний элемент\n",[20,7803,7804,7836,7870,7906],{"__ignoreMap":160},[164,7805,7806,7808,7810,7812,7814,7816,7818,7820,7822,7824,7827,7829,7831,7833],{"class":166,"line":167},[164,7807,918],{"class":173},[164,7809,7532],{"class":484},[164,7811,82],{"class":173},[164,7813,7537],{"class":484},[164,7815,82],{"class":173},[164,7817,7553],{"class":484},[164,7819,82],{"class":173},[164,7821,7767],{"class":484},[164,7823,7750],{"class":173},[164,7825,7826],{"class":219},"slice",[164,7828,1289],{"class":173},[164,7830,3161],{"class":189},[164,7832,1430],{"class":173},[164,7834,7835],{"class":212},"// ['b', 'c', 'd'] - обрезать с индекса 1 по конец массива\n",[164,7837,7838,7840,7842,7844,7846,7848,7850,7852,7854,7856,7858,7860,7863,7865,7867],{"class":166,"line":177},[164,7839,918],{"class":173},[164,7841,7532],{"class":484},[164,7843,82],{"class":173},[164,7845,7537],{"class":484},[164,7847,82],{"class":173},[164,7849,7553],{"class":484},[164,7851,82],{"class":173},[164,7853,7767],{"class":484},[164,7855,7750],{"class":173},[164,7857,7826],{"class":219},[164,7859,1289],{"class":173},[164,7861,7862],{"class":237},"-",[164,7864,745],{"class":189},[164,7866,1430],{"class":173},[164,7868,7869],{"class":212},"// ['b', 'c', 'd'] - вырезать последние два элемента массива\n",[164,7871,7872,7874,7876,7878,7880,7882,7884,7886,7888,7890,7892,7894,7896,7898,7901,7903],{"class":166,"line":186},[164,7873,918],{"class":173},[164,7875,7532],{"class":484},[164,7877,82],{"class":173},[164,7879,7537],{"class":484},[164,7881,82],{"class":173},[164,7883,7553],{"class":484},[164,7885,82],{"class":173},[164,7887,7767],{"class":484},[164,7889,7750],{"class":173},[164,7891,7826],{"class":219},[164,7893,1289],{"class":173},[164,7895,3161],{"class":189},[164,7897,82],{"class":173},[164,7899,7900],{"class":189},"3",[164,7902,1430],{"class":173},[164,7904,7905],{"class":212},"// ['b', 'c'] - обрезать с индекса 1 по индекс 3, т.е. элементы с индексами 1, 2\n",[164,7907,7908,7910,7912,7914,7916,7918,7920,7922,7924,7926,7928,7930,7932,7934,7936,7938,7940],{"class":166,"line":196},[164,7909,918],{"class":173},[164,7911,7532],{"class":484},[164,7913,82],{"class":173},[164,7915,7537],{"class":484},[164,7917,82],{"class":173},[164,7919,7553],{"class":484},[164,7921,82],{"class":173},[164,7923,7767],{"class":484},[164,7925,7750],{"class":173},[164,7927,7826],{"class":219},[164,7929,1289],{"class":173},[164,7931,269],{"class":189},[164,7933,82],{"class":173},[164,7935,7862],{"class":237},[164,7937,3161],{"class":189},[164,7939,7556],{"class":173},[164,7941,7942],{"class":212},"// ['a', 'b', 'c'] - обрезать, убрав последний элемент\n",[16,7944,7945],{},"принимает индекс и количество элементов после этого индекса, которые нужно удалить.\nЕсли передать items - они будут добавлены после индекса start.\nМутирует исходный массив и возвращает удаленные элементы.",[155,7947,7949],{"className":7513,"code":7948,"language":7515,"meta":160,"style":160},"const arr = ['a', 'b', 'c', 'd'];\narr.splice(1, 2, 'e', 'f'); // удалить 2 элемента, начиная с индекса 1, т.е. ['b', 'c']. Добавить 'e', 'f' к индексу 1.\narr; // ['a', 'e', 'f', 'd']\n\n",[20,7950,7951,7977,8005],{"__ignoreMap":160},[164,7952,7953,7955,7957,7959,7961,7963,7965,7967,7969,7971,7973,7975],{"class":166,"line":167},[164,7954,1995],{"class":237},[164,7956,7524],{"class":189},[164,7958,1641],{"class":237},[164,7960,7529],{"class":173},[164,7962,7532],{"class":484},[164,7964,82],{"class":173},[164,7966,7537],{"class":484},[164,7968,82],{"class":173},[164,7970,7553],{"class":484},[164,7972,82],{"class":173},[164,7974,7767],{"class":484},[164,7976,7540],{"class":173},[164,7978,7979,7981,7984,7986,7988,7990,7992,7994,7996,7998,8000,8002],{"class":166,"line":177},[164,7980,7545],{"class":173},[164,7982,7983],{"class":219},"splice",[164,7985,1289],{"class":173},[164,7987,3161],{"class":189},[164,7989,82],{"class":173},[164,7991,745],{"class":189},[164,7993,82],{"class":173},[164,7995,7772],{"class":484},[164,7997,82],{"class":173},[164,7999,7778],{"class":484},[164,8001,7556],{"class":173},[164,8003,8004],{"class":212},"// удалить 2 элемента, начиная с индекса 1, т.е. ['b', 'c']. Добавить 'e', 'f' к индексу 1.\n",[164,8006,8007,8009],{"class":166,"line":186},[164,8008,7564],{"class":173},[164,8010,8011],{"class":212},"// ['a', 'e', 'f', 'd']\n",[16,8013,8014,8015,8017],{},"тоже самое, что и ",[20,8016,7983],{},", но вместо мутации\nбудет создан новый массив. Возвращает новый измененный массив.",[155,8019,8021],{"className":7513,"code":8020,"language":7515,"meta":160,"style":160},"const arr = ['a', 'b', 'c', 'd'];\narr.toSpliced(1, 2, 'e', 'f'); // ['a', 'e', 'f', 'd']\narr; // ['a', 'b', 'c', 'd']\n\n",[20,8022,8023,8049,8076],{"__ignoreMap":160},[164,8024,8025,8027,8029,8031,8033,8035,8037,8039,8041,8043,8045,8047],{"class":166,"line":167},[164,8026,1995],{"class":237},[164,8028,7524],{"class":189},[164,8030,1641],{"class":237},[164,8032,7529],{"class":173},[164,8034,7532],{"class":484},[164,8036,82],{"class":173},[164,8038,7537],{"class":484},[164,8040,82],{"class":173},[164,8042,7553],{"class":484},[164,8044,82],{"class":173},[164,8046,7767],{"class":484},[164,8048,7540],{"class":173},[164,8050,8051,8053,8056,8058,8060,8062,8064,8066,8068,8070,8072,8074],{"class":166,"line":177},[164,8052,7545],{"class":173},[164,8054,8055],{"class":219},"toSpliced",[164,8057,1289],{"class":173},[164,8059,3161],{"class":189},[164,8061,82],{"class":173},[164,8063,745],{"class":189},[164,8065,82],{"class":173},[164,8067,7772],{"class":484},[164,8069,82],{"class":173},[164,8071,7778],{"class":484},[164,8073,7556],{"class":173},[164,8075,8011],{"class":212},[164,8077,8078,8080],{"class":166,"line":186},[164,8079,7564],{"class":173},[164,8081,8082],{"class":212},"// ['a', 'b', 'c', 'd']\n",[29,8084,8086],{"id":8085},"search-in-array","Поиск в массиве",[16,8088,8089],{},"находит и возвращает первый элемент массива, соответствующий заданному условию.",[155,8091,8093],{"className":7513,"code":8092,"language":7515,"meta":160,"style":160},"[\n  { age: 10, name: 'Mike' },\n  { age: 19, name: 'Timofey' },\n  { age: 18, name: 'Alexander' }\n].find(i => i.age >= 18); // { age: 19, name: 'Timofey' }\n",[20,8094,8095,8100,8115,8129,8143],{"__ignoreMap":160},[164,8096,8097],{"class":166,"line":167},[164,8098,8099],{"class":173},"[\n",[164,8101,8102,8105,8107,8110,8113],{"class":166,"line":177},[164,8103,8104],{"class":173},"  { age: ",[164,8106,851],{"class":189},[164,8108,8109],{"class":173},", name: ",[164,8111,8112],{"class":484},"'Mike'",[164,8114,3193],{"class":173},[164,8116,8117,8119,8122,8124,8127],{"class":166,"line":186},[164,8118,8104],{"class":173},[164,8120,8121],{"class":189},"19",[164,8123,8109],{"class":173},[164,8125,8126],{"class":484},"'Timofey'",[164,8128,3193],{"class":173},[164,8130,8131,8133,8136,8138,8141],{"class":166,"line":196},[164,8132,8104],{"class":173},[164,8134,8135],{"class":189},"18",[164,8137,8109],{"class":173},[164,8139,8140],{"class":484},"'Alexander'",[164,8142,3668],{"class":173},[164,8144,8145,8147,8150,8152,8155,8157,8160,8163,8166,8168],{"class":166,"line":202},[164,8146,7750],{"class":173},[164,8148,8149],{"class":219},"find",[164,8151,1289],{"class":173},[164,8153,8154],{"class":1648},"i",[164,8156,2009],{"class":237},[164,8158,8159],{"class":173}," i.age ",[164,8161,8162],{"class":237},">=",[164,8164,8165],{"class":189}," 18",[164,8167,7556],{"class":173},[164,8169,8170],{"class":212},"// { age: 19, name: 'Timofey' }\n",[16,8172,8173],{},"тоже самое, но начинает обходить массив с конца:",[155,8175,8177],{"className":7513,"code":8176,"language":7515,"meta":160,"style":160},"[\n  { age: 10, name: 'Mike' },\n  { age: 19, name: 'Timofey' },\n  { age: 18, name: 'Alexander' }\n].findLast(i => i.age >= 18); // { age: 18, name: 'Alexander' }\n",[20,8178,8179,8183,8195,8207,8219],{"__ignoreMap":160},[164,8180,8181],{"class":166,"line":167},[164,8182,8099],{"class":173},[164,8184,8185,8187,8189,8191,8193],{"class":166,"line":177},[164,8186,8104],{"class":173},[164,8188,851],{"class":189},[164,8190,8109],{"class":173},[164,8192,8112],{"class":484},[164,8194,3193],{"class":173},[164,8196,8197,8199,8201,8203,8205],{"class":166,"line":186},[164,8198,8104],{"class":173},[164,8200,8121],{"class":189},[164,8202,8109],{"class":173},[164,8204,8126],{"class":484},[164,8206,3193],{"class":173},[164,8208,8209,8211,8213,8215,8217],{"class":166,"line":196},[164,8210,8104],{"class":173},[164,8212,8135],{"class":189},[164,8214,8109],{"class":173},[164,8216,8140],{"class":484},[164,8218,3668],{"class":173},[164,8220,8221,8223,8226,8228,8230,8232,8234,8236,8238,8240],{"class":166,"line":202},[164,8222,7750],{"class":173},[164,8224,8225],{"class":219},"findLast",[164,8227,1289],{"class":173},[164,8229,8154],{"class":1648},[164,8231,2009],{"class":237},[164,8233,8159],{"class":173},[164,8235,8162],{"class":237},[164,8237,8165],{"class":189},[164,8239,7556],{"class":173},[164,8241,8242],{"class":212},"// { age: 18, name: 'Alexander' }\n",[16,8244,8245,8246,8249],{},"принимает в коллбеке условие, возвращает ",[20,8247,8248],{},"true",", если хотя бы один элемент соответствует",[155,8251,8253],{"className":7513,"code":8252,"language":7515,"meta":160,"style":160},"['Mike', 'Timofey', 'Alexander'].some(name => name.length > 5); // true\n",[20,8254,8255],{"__ignoreMap":160},[164,8256,8257,8259,8261,8263,8265,8267,8269,8271,8274,8276,8278,8280,8283,8285,8287,8290,8292],{"class":166,"line":167},[164,8258,918],{"class":173},[164,8260,8112],{"class":484},[164,8262,82],{"class":173},[164,8264,8126],{"class":484},[164,8266,82],{"class":173},[164,8268,8140],{"class":484},[164,8270,7750],{"class":173},[164,8272,8273],{"class":219},"some",[164,8275,1289],{"class":173},[164,8277,3317],{"class":1648},[164,8279,2009],{"class":237},[164,8281,8282],{"class":173}," name.",[164,8284,7510],{"class":189},[164,8286,1002],{"class":237},[164,8288,8289],{"class":189}," 5",[164,8291,7556],{"class":173},[164,8293,8294],{"class":212},"// true\n",[16,8296,8245,8297,8299],{},[20,8298,8248],{},", если все элементы соответствуют",[155,8301,8303],{"className":7513,"code":8302,"language":7515,"meta":160,"style":160},"['Mike', 'Timofey', 'Alexander'].every(name => name.length > 5); // false\n",[20,8304,8305],{"__ignoreMap":160},[164,8306,8307,8309,8311,8313,8315,8317,8319,8321,8324,8326,8328,8330,8332,8334,8336,8338,8340],{"class":166,"line":167},[164,8308,918],{"class":173},[164,8310,8112],{"class":484},[164,8312,82],{"class":173},[164,8314,8126],{"class":484},[164,8316,82],{"class":173},[164,8318,8140],{"class":484},[164,8320,7750],{"class":173},[164,8322,8323],{"class":219},"every",[164,8325,1289],{"class":173},[164,8327,3317],{"class":1648},[164,8329,2009],{"class":237},[164,8331,8282],{"class":173},[164,8333,7510],{"class":189},[164,8335,1002],{"class":237},[164,8337,8289],{"class":189},[164,8339,7556],{"class":173},[164,8341,8342],{"class":212},"// false\n",[16,8344,8345,8346,8348],{},"принимает значение, возвращает ",[20,8347,8248],{},", если в массиве есть такой элемент",[155,8350,8352],{"className":7513,"code":8351,"language":7515,"meta":160,"style":160},"['Mike', 'Timofey', 'Alexander'].includes('Timofey'); // true\n['Mike', 'Timofey', 'Alexander'].includes('Mark'); // false\n",[20,8353,8354,8381],{"__ignoreMap":160},[164,8355,8356,8358,8360,8362,8364,8366,8368,8370,8373,8375,8377,8379],{"class":166,"line":167},[164,8357,918],{"class":173},[164,8359,8112],{"class":484},[164,8361,82],{"class":173},[164,8363,8126],{"class":484},[164,8365,82],{"class":173},[164,8367,8140],{"class":484},[164,8369,7750],{"class":173},[164,8371,8372],{"class":219},"includes",[164,8374,1289],{"class":173},[164,8376,8126],{"class":484},[164,8378,7556],{"class":173},[164,8380,8294],{"class":212},[164,8382,8383,8385,8387,8389,8391,8393,8395,8397,8399,8401,8404,8406],{"class":166,"line":177},[164,8384,918],{"class":173},[164,8386,8112],{"class":484},[164,8388,82],{"class":173},[164,8390,8126],{"class":484},[164,8392,82],{"class":173},[164,8394,8140],{"class":484},[164,8396,7750],{"class":173},[164,8398,8372],{"class":219},[164,8400,1289],{"class":173},[164,8402,8403],{"class":484},"'Mark'",[164,8405,7556],{"class":173},[164,8407,8342],{"class":212},[29,8409,8411],{"id":8410},"iterate-and-mutate-array","Обход и изменение массива",[16,8413,8414],{},"принимает коллбек,\nкоторый выполнится для каждого элемента массива",[16,8416,8417],{},"принимает коллбек, который определяет,\nкак будет меняться каждый элемент массива.\nНе мутирует** исходный массив.",[155,8419,8421],{"className":7513,"code":8420,"language":7515,"meta":160,"style":160},"['heh', 'huh'].map(i => i.toUpperCase()); // ['HEH', 'HUH']\n",[20,8422,8423],{"__ignoreMap":160},[164,8424,8425,8427,8430,8432,8435,8437,8439,8441,8443,8445,8448,8451,8454],{"class":166,"line":167},[164,8426,918],{"class":173},[164,8428,8429],{"class":484},"'heh'",[164,8431,82],{"class":173},[164,8433,8434],{"class":484},"'huh'",[164,8436,7750],{"class":173},[164,8438,7394],{"class":219},[164,8440,1289],{"class":173},[164,8442,8154],{"class":1648},[164,8444,2009],{"class":237},[164,8446,8447],{"class":173}," i.",[164,8449,8450],{"class":219},"toUpperCase",[164,8452,8453],{"class":173},"()); ",[164,8455,8456],{"class":212},"// ['HEH', 'HUH']\n",[16,8458,8459],{},"переворачивает массив. Изменяет исходный массив и возвращает ссылку на изменённый массив.",[155,8461,8463],{"className":7513,"code":8462,"language":7515,"meta":160,"style":160},"const arr = [1, 2];\narr.reverse(); // [2, 1]\narr; // [2, 1]\n\n",[20,8464,8465,8483,8495],{"__ignoreMap":160},[164,8466,8467,8469,8471,8473,8475,8477,8479,8481],{"class":166,"line":167},[164,8468,1995],{"class":237},[164,8470,7524],{"class":189},[164,8472,1641],{"class":237},[164,8474,7529],{"class":173},[164,8476,3161],{"class":189},[164,8478,82],{"class":173},[164,8480,745],{"class":189},[164,8482,7540],{"class":173},[164,8484,8485,8487,8490,8492],{"class":166,"line":177},[164,8486,7545],{"class":173},[164,8488,8489],{"class":219},"reverse",[164,8491,7611],{"class":173},[164,8493,8494],{"class":212},"// [2, 1]\n",[164,8496,8497,8499],{"class":166,"line":186},[164,8498,7564],{"class":173},[164,8500,8494],{"class":212},[16,8502,8503],{},"тоже самое, что и reverse, но без мутации исходного массива. Возвращает новый массив.",[155,8505,8507],{"className":7513,"code":8506,"language":7515,"meta":160,"style":160},"const arr = [1, 2];\narr.toReversed(); // [2, 1]\narr; // [1, 2]\n\n",[20,8508,8509,8527,8538],{"__ignoreMap":160},[164,8510,8511,8513,8515,8517,8519,8521,8523,8525],{"class":166,"line":167},[164,8512,1995],{"class":237},[164,8514,7524],{"class":189},[164,8516,1641],{"class":237},[164,8518,7529],{"class":173},[164,8520,3161],{"class":189},[164,8522,82],{"class":173},[164,8524,745],{"class":189},[164,8526,7540],{"class":173},[164,8528,8529,8531,8534,8536],{"class":166,"line":177},[164,8530,7545],{"class":173},[164,8532,8533],{"class":219},"toReversed",[164,8535,7611],{"class":173},[164,8537,8494],{"class":212},[164,8539,8540,8542],{"class":166,"line":186},[164,8541,7564],{"class":173},[164,8543,8544],{"class":212},"// [1, 2]\n",[16,8546,8547],{},"создает копию массива с замененным элементом по выбранному индексу",[155,8549,8551],{"className":7513,"code":8550,"language":7515,"meta":160,"style":160},"['a', 'b', 'c'].with(2, 'd'); // ['a', 'b', 'd']\n\n",[20,8552,8553],{"__ignoreMap":160},[164,8554,8555,8557,8559,8561,8563,8565,8567,8569,8572,8574,8576,8578,8580,8582],{"class":166,"line":167},[164,8556,918],{"class":173},[164,8558,7532],{"class":484},[164,8560,82],{"class":173},[164,8562,7537],{"class":484},[164,8564,82],{"class":173},[164,8566,7553],{"class":484},[164,8568,7750],{"class":173},[164,8570,8571],{"class":219},"with",[164,8573,1289],{"class":173},[164,8575,745],{"class":189},[164,8577,82],{"class":173},[164,8579,7767],{"class":484},[164,8581,7556],{"class":173},[164,8583,8584],{"class":212},"// ['a', 'b', 'd']\n",[16,8586,8587],{},"возвращает массив, где все элементы соответствуют переданному условию в коллбеке",[155,8589,8591],{"className":7513,"code":8590,"language":7515,"meta":160,"style":160},"['Mike', 'Timofey', 'Alexander'].map(name => name.length > 5); // ['Timofey', 'Alexander']\n",[20,8592,8593],{"__ignoreMap":160},[164,8594,8595,8597,8599,8601,8603,8605,8607,8609,8611,8613,8615,8617,8619,8621,8623,8625,8627],{"class":166,"line":167},[164,8596,918],{"class":173},[164,8598,8112],{"class":484},[164,8600,82],{"class":173},[164,8602,8126],{"class":484},[164,8604,82],{"class":173},[164,8606,8140],{"class":484},[164,8608,7750],{"class":173},[164,8610,7394],{"class":219},[164,8612,1289],{"class":173},[164,8614,3317],{"class":1648},[164,8616,2009],{"class":237},[164,8618,8282],{"class":173},[164,8620,7510],{"class":189},[164,8622,1002],{"class":237},[164,8624,8289],{"class":189},[164,8626,7556],{"class":173},[164,8628,8629],{"class":212},"// ['Timofey', 'Alexander']\n",[16,8631,8632],{},"обходит массив и аккумулирует значение.\nЗначение аккумулятора задается в коллбеке.",[155,8634,8636],{"className":7513,"code":8635,"language":7515,"meta":160,"style":160},"const employers = [\n  { age: 10, name: 'Mike' }, // Сын маминой подруги\n  { age: 19, name: 'Timofey' },\n  { age: 18, name: 'Alexander' }\n];\n\nconst totalAge = employers.reduce((acc, curr) => {\n  return acc + curr.age;\n}, 0); // 47\n\nconst averageAge = totalAge / employers.length; // 16.66\n",[20,8637,8638,8650,8666,8678,8690,8694,8698,8726,8739,8751,8755],{"__ignoreMap":160},[164,8639,8640,8642,8645,8647],{"class":166,"line":167},[164,8641,1995],{"class":237},[164,8643,8644],{"class":189}," employers",[164,8646,1641],{"class":237},[164,8648,8649],{"class":173}," [\n",[164,8651,8652,8654,8656,8658,8660,8663],{"class":166,"line":177},[164,8653,8104],{"class":173},[164,8655,851],{"class":189},[164,8657,8109],{"class":173},[164,8659,8112],{"class":484},[164,8661,8662],{"class":173}," }, ",[164,8664,8665],{"class":212},"// Сын маминой подруги\n",[164,8667,8668,8670,8672,8674,8676],{"class":166,"line":186},[164,8669,8104],{"class":173},[164,8671,8121],{"class":189},[164,8673,8109],{"class":173},[164,8675,8126],{"class":484},[164,8677,3193],{"class":173},[164,8679,8680,8682,8684,8686,8688],{"class":166,"line":196},[164,8681,8104],{"class":173},[164,8683,8135],{"class":189},[164,8685,8109],{"class":173},[164,8687,8140],{"class":484},[164,8689,3668],{"class":173},[164,8691,8692],{"class":166,"line":202},[164,8693,7540],{"class":173},[164,8695,8696],{"class":166,"line":209},[164,8697,206],{"emptyLinePlaceholder":205},[164,8699,8700,8702,8705,8707,8710,8712,8714,8716,8718,8720,8722,8724],{"class":166,"line":216},[164,8701,1995],{"class":237},[164,8703,8704],{"class":189}," totalAge",[164,8706,1641],{"class":237},[164,8708,8709],{"class":173}," employers.",[164,8711,3285],{"class":219},[164,8713,3288],{"class":173},[164,8715,3291],{"class":1648},[164,8717,82],{"class":173},[164,8719,3495],{"class":1648},[164,8721,1430],{"class":173},[164,8723,1799],{"class":237},[164,8725,183],{"class":173},[164,8727,8728,8730,8733,8736],{"class":166,"line":225},[164,8729,2615],{"class":237},[164,8731,8732],{"class":173}," acc ",[164,8734,8735],{"class":237},"+",[164,8737,8738],{"class":173}," curr.age;\n",[164,8740,8741,8744,8746,8748],{"class":166,"line":243},[164,8742,8743],{"class":173},"}, ",[164,8745,269],{"class":189},[164,8747,7556],{"class":173},[164,8749,8750],{"class":212},"// 47\n",[164,8752,8753],{"class":166,"line":631},[164,8754,206],{"emptyLinePlaceholder":205},[164,8756,8757,8759,8762,8764,8767,8769,8771,8773,8775],{"class":166,"line":645},[164,8758,1995],{"class":237},[164,8760,8761],{"class":189}," averageAge",[164,8763,1641],{"class":237},[164,8765,8766],{"class":173}," totalAge ",[164,8768,848],{"class":237},[164,8770,8709],{"class":173},[164,8772,7510],{"class":189},[164,8774,306],{"class":173},[164,8776,8777],{"class":212},"// 16.66\n",[16,8779,8780,8781,8783],{},"Метод ",[20,8782,3285],{}," очень полезен для агрегации:",[155,8785,8787],{"className":7513,"code":8786,"language":7515,"meta":160,"style":160},"const employers = [\n  { age: 10, name: 'Mike', position: 'son' },\n  { age: 19, name: 'Timofey', position: 'frontend' },\n  { age: 18, name: 'Alexander', position: 'frontend' }\n];\n\nconst employersByPosition = employers.reduce((acc, curr) => {\n  acc[curr.position] = (acc[curr.position] || []).concat(curr);\n  return acc;\n}, {}); // { son: [{ name: 'Mike',... }], frontend: [{ name: 'Timofey', ...}, { name: 'Alexander',...}] }\n\n",[20,8788,8789,8799,8817,8834,8850,8854,8858,8885,8906,8912],{"__ignoreMap":160},[164,8790,8791,8793,8795,8797],{"class":166,"line":167},[164,8792,1995],{"class":237},[164,8794,8644],{"class":189},[164,8796,1641],{"class":237},[164,8798,8649],{"class":173},[164,8800,8801,8803,8805,8807,8809,8812,8815],{"class":166,"line":177},[164,8802,8104],{"class":173},[164,8804,851],{"class":189},[164,8806,8109],{"class":173},[164,8808,8112],{"class":484},[164,8810,8811],{"class":173},", position: ",[164,8813,8814],{"class":484},"'son'",[164,8816,3193],{"class":173},[164,8818,8819,8821,8823,8825,8827,8829,8832],{"class":166,"line":186},[164,8820,8104],{"class":173},[164,8822,8121],{"class":189},[164,8824,8109],{"class":173},[164,8826,8126],{"class":484},[164,8828,8811],{"class":173},[164,8830,8831],{"class":484},"'frontend'",[164,8833,3193],{"class":173},[164,8835,8836,8838,8840,8842,8844,8846,8848],{"class":166,"line":196},[164,8837,8104],{"class":173},[164,8839,8135],{"class":189},[164,8841,8109],{"class":173},[164,8843,8140],{"class":484},[164,8845,8811],{"class":173},[164,8847,8831],{"class":484},[164,8849,3668],{"class":173},[164,8851,8852],{"class":166,"line":202},[164,8853,7540],{"class":173},[164,8855,8856],{"class":166,"line":209},[164,8857,206],{"emptyLinePlaceholder":205},[164,8859,8860,8862,8865,8867,8869,8871,8873,8875,8877,8879,8881,8883],{"class":166,"line":216},[164,8861,1995],{"class":237},[164,8863,8864],{"class":189}," employersByPosition",[164,8866,1641],{"class":237},[164,8868,8709],{"class":173},[164,8870,3285],{"class":219},[164,8872,3288],{"class":173},[164,8874,3291],{"class":1648},[164,8876,82],{"class":173},[164,8878,3495],{"class":1648},[164,8880,1430],{"class":173},[164,8882,1799],{"class":237},[164,8884,183],{"class":173},[164,8886,8887,8890,8892,8895,8898,8901,8903],{"class":166,"line":225},[164,8888,8889],{"class":173},"  acc[curr.position] ",[164,8891,481],{"class":237},[164,8893,8894],{"class":173}," (acc[curr.position] ",[164,8896,8897],{"class":237},"||",[164,8899,8900],{"class":173}," []).",[164,8902,7753],{"class":219},[164,8904,8905],{"class":173},"(curr);\n",[164,8907,8908,8910],{"class":166,"line":243},[164,8909,2615],{"class":237},[164,8911,3348],{"class":173},[164,8913,8914,8917],{"class":166,"line":631},[164,8915,8916],{"class":173},"}, {}); ",[164,8918,8919],{"class":212},"// { son: [{ name: 'Mike',... }], frontend: [{ name: 'Timofey', ...}, { name: 'Alexander',...}] }\n",[16,8921,8922,8923,8926],{},"Если не передать ",[20,8924,8925],{},"initAcc"," - итерация будет со 2-го элемента.",[16,8928,8929],{},"тоже самое, что и обычный reduce, но справа налево.",[29,8931,8933],{"id":8932},"sort-array","Сортировка массива",[16,8935,8936],{},"принимает коллбеком функцию, в которой принимаются два аргумента - элементы массива,\nа return должен определить их порядок. Мутирует исходный массив и возвращает ссылку на него.",[16,8938,8939],{},"идет первым\nбез изменений\nидет первым",[16,8941,8942],{},"Если коллбек не передан - сортирует в лексическом порядке по возрастанию, подойдет только для строк.",[155,8944,8946],{"className":7513,"code":8945,"language":7515,"meta":160,"style":160},"[4, 2, 3, 1].sort((a, b) => a - b); // [1, 2, 3, 4]\n[4, 2, 3, 1].sort((a, b) => b - a); // [4, 3, 2, 1]\n['b', 'c', 'a'].sort(); // ['a', 'b', 'c']\n",[20,8947,8948,8996,9041],{"__ignoreMap":160},[164,8949,8950,8952,8955,8957,8959,8961,8963,8965,8967,8969,8972,8974,8976,8978,8981,8983,8985,8988,8990,8993],{"class":166,"line":167},[164,8951,918],{"class":173},[164,8953,8954],{"class":189},"4",[164,8956,82],{"class":173},[164,8958,745],{"class":189},[164,8960,82],{"class":173},[164,8962,7900],{"class":189},[164,8964,82],{"class":173},[164,8966,3161],{"class":189},[164,8968,7750],{"class":173},[164,8970,8971],{"class":219},"sort",[164,8973,3288],{"class":173},[164,8975,1325],{"class":1648},[164,8977,82],{"class":173},[164,8979,8980],{"class":1648},"b",[164,8982,1430],{"class":173},[164,8984,1799],{"class":237},[164,8986,8987],{"class":173}," a ",[164,8989,7862],{"class":237},[164,8991,8992],{"class":173}," b); ",[164,8994,8995],{"class":212},"// [1, 2, 3, 4]\n",[164,8997,8998,9000,9002,9004,9006,9008,9010,9012,9014,9016,9018,9020,9022,9024,9026,9028,9030,9033,9035,9038],{"class":166,"line":177},[164,8999,918],{"class":173},[164,9001,8954],{"class":189},[164,9003,82],{"class":173},[164,9005,745],{"class":189},[164,9007,82],{"class":173},[164,9009,7900],{"class":189},[164,9011,82],{"class":173},[164,9013,3161],{"class":189},[164,9015,7750],{"class":173},[164,9017,8971],{"class":219},[164,9019,3288],{"class":173},[164,9021,1325],{"class":1648},[164,9023,82],{"class":173},[164,9025,8980],{"class":1648},[164,9027,1430],{"class":173},[164,9029,1799],{"class":237},[164,9031,9032],{"class":173}," b ",[164,9034,7862],{"class":237},[164,9036,9037],{"class":173}," a); ",[164,9039,9040],{"class":212},"// [4, 3, 2, 1]\n",[164,9042,9043,9045,9047,9049,9051,9053,9055,9057,9059,9061],{"class":166,"line":186},[164,9044,918],{"class":173},[164,9046,7537],{"class":484},[164,9048,82],{"class":173},[164,9050,7553],{"class":484},[164,9052,82],{"class":173},[164,9054,7532],{"class":484},[164,9056,7750],{"class":173},[164,9058,8971],{"class":219},[164,9060,7611],{"class":173},[164,9062,7567],{"class":212},[16,9064,9065,9066,9069],{},"тоже самое, что и метод ",[20,9067,9068],{},".sort",",\nно вместо мутации исходного массива создает новый отсортированный массив",[155,9071,9073],{"className":7513,"code":9072,"language":7515,"meta":160,"style":160},"const arr = [4, 2, 3, 1];\nconst sortedArray = arr.toSorted((a, b) => a - b);\n\narr; // [4, 2, 3, 1];\nsortedArray; // [1, 2, 3, 4]\n\n",[20,9074,9075,9101,9135,9139,9146],{"__ignoreMap":160},[164,9076,9077,9079,9081,9083,9085,9087,9089,9091,9093,9095,9097,9099],{"class":166,"line":167},[164,9078,1995],{"class":237},[164,9080,7524],{"class":189},[164,9082,1641],{"class":237},[164,9084,7529],{"class":173},[164,9086,8954],{"class":189},[164,9088,82],{"class":173},[164,9090,745],{"class":189},[164,9092,82],{"class":173},[164,9094,7900],{"class":189},[164,9096,82],{"class":173},[164,9098,3161],{"class":189},[164,9100,7540],{"class":173},[164,9102,9103,9105,9108,9110,9113,9116,9118,9120,9122,9124,9126,9128,9130,9132],{"class":166,"line":177},[164,9104,1995],{"class":237},[164,9106,9107],{"class":189}," sortedArray",[164,9109,1641],{"class":237},[164,9111,9112],{"class":173}," arr.",[164,9114,9115],{"class":219},"toSorted",[164,9117,3288],{"class":173},[164,9119,1325],{"class":1648},[164,9121,82],{"class":173},[164,9123,8980],{"class":1648},[164,9125,1430],{"class":173},[164,9127,1799],{"class":237},[164,9129,8987],{"class":173},[164,9131,7862],{"class":237},[164,9133,9134],{"class":173}," b);\n",[164,9136,9137],{"class":166,"line":186},[164,9138,206],{"emptyLinePlaceholder":205},[164,9140,9141,9143],{"class":166,"line":196},[164,9142,7564],{"class":173},[164,9144,9145],{"class":212},"// [4, 2, 3, 1];\n",[164,9147,9148,9151],{"class":166,"line":202},[164,9149,9150],{"class":173},"sortedArray; ",[164,9152,8995],{"class":212},[29,9154,9156],{"id":9155},"useful-methods","Полезные методы",[16,9158,9159],{},"возвращает элемент массива по указанному индексу.",[16,9161,9162,9163],{},"Основная фишка - можно легко достать последний элемент, передав ",[20,9164,9165],{},"-1",[155,9167,9169],{"className":7513,"code":9168,"language":7515,"meta":160,"style":160},"[1, 2, 3 ].at(0) // 1\n  [1, 2, 3 ].at(-1); // 3\n\n",[20,9170,9171,9200],{"__ignoreMap":160},[164,9172,9173,9175,9177,9179,9181,9183,9185,9188,9191,9193,9195,9197],{"class":166,"line":167},[164,9174,918],{"class":173},[164,9176,3161],{"class":189},[164,9178,82],{"class":173},[164,9180,745],{"class":189},[164,9182,82],{"class":173},[164,9184,7900],{"class":189},[164,9186,9187],{"class":173}," ].",[164,9189,9190],{"class":219},"at",[164,9192,1289],{"class":173},[164,9194,269],{"class":189},[164,9196,1430],{"class":173},[164,9198,9199],{"class":212},"// 1\n",[164,9201,9202,9205,9207,9209,9211,9213,9215,9217,9219,9221,9223,9225,9227],{"class":166,"line":177},[164,9203,9204],{"class":173},"  [",[164,9206,3161],{"class":189},[164,9208,82],{"class":173},[164,9210,745],{"class":189},[164,9212,82],{"class":173},[164,9214,7900],{"class":189},[164,9216,9187],{"class":173},[164,9218,9190],{"class":219},[164,9220,1289],{"class":173},[164,9222,7862],{"class":237},[164,9224,3161],{"class":189},[164,9226,7556],{"class":173},[164,9228,7559],{"class":212},[16,9230,9231],{},"позволяет создать массив из Iterable\nили ArrayLike сущностей.",[16,9233,9234],{},"Очень полезен, чтобы получить массив Element:",[155,9236,9238],{"className":7513,"code":9237,"language":7515,"meta":160,"style":160},"const linkElements = document.querySelectorAll('.myClass');\nconst arrLinks = Array.from(linkElements); // Element[]\n\n",[20,9239,9240,9263],{"__ignoreMap":160},[164,9241,9242,9244,9247,9249,9252,9255,9257,9260],{"class":166,"line":167},[164,9243,1995],{"class":237},[164,9245,9246],{"class":189}," linkElements",[164,9248,1641],{"class":237},[164,9250,9251],{"class":173}," document.",[164,9253,9254],{"class":219},"querySelectorAll",[164,9256,1289],{"class":173},[164,9258,9259],{"class":484},"'.myClass'",[164,9261,9262],{"class":173},");\n",[164,9264,9265,9267,9270,9272,9275,9277,9280],{"class":166,"line":177},[164,9266,1995],{"class":237},[164,9268,9269],{"class":189}," arrLinks",[164,9271,1641],{"class":237},[164,9273,9274],{"class":173}," Array.",[164,9276,4293],{"class":219},[164,9278,9279],{"class":173},"(linkElements); ",[164,9281,9282],{"class":212},"// Element[]\n",[16,9284,9285,9286],{},"Можно сразу же сделать ",[20,9287,9288],{},".map",[155,9290,9292],{"className":7513,"code":9291,"language":7515,"meta":160,"style":160},"const linkElements = document.getElementsByTagName('a');\nconst arrLinks = Array.from(linkElements, element => element.href); // string[]\n\n",[20,9293,9294,9313],{"__ignoreMap":160},[164,9295,9296,9298,9300,9302,9304,9307,9309,9311],{"class":166,"line":167},[164,9297,1995],{"class":237},[164,9299,9246],{"class":189},[164,9301,1641],{"class":237},[164,9303,9251],{"class":173},[164,9305,9306],{"class":219},"getElementsByTagName",[164,9308,1289],{"class":173},[164,9310,7532],{"class":484},[164,9312,9262],{"class":173},[164,9314,9315,9317,9319,9321,9323,9325,9328,9331,9333,9336],{"class":166,"line":177},[164,9316,1995],{"class":237},[164,9318,9269],{"class":189},[164,9320,1641],{"class":237},[164,9322,9274],{"class":173},[164,9324,4293],{"class":219},[164,9326,9327],{"class":173},"(linkElements, ",[164,9329,9330],{"class":1648},"element",[164,9332,2009],{"class":237},[164,9334,9335],{"class":173}," element.href); ",[164,9337,9338],{"class":212},"// string[]\n",[16,9340,9341,9342,9345],{},"Часто используется, чтобы превратить ",[20,9343,9344],{},"Set"," в массив",[155,9347,9349],{"className":7513,"code":9348,"language":7515,"meta":160,"style":160},"const mySet = newSet([1, 2]);\nmySet.add(3);\nArray.from(mySet); // [1, 2, 3]\n\n",[20,9350,9351,9375,9389],{"__ignoreMap":160},[164,9352,9353,9355,9358,9360,9363,9366,9368,9370,9372],{"class":166,"line":167},[164,9354,1995],{"class":237},[164,9356,9357],{"class":189}," mySet",[164,9359,1641],{"class":237},[164,9361,9362],{"class":219}," newSet",[164,9364,9365],{"class":173},"([",[164,9367,3161],{"class":189},[164,9369,82],{"class":173},[164,9371,745],{"class":189},[164,9373,9374],{"class":173},"]);\n",[164,9376,9377,9380,9383,9385,9387],{"class":166,"line":177},[164,9378,9379],{"class":173},"mySet.",[164,9381,9382],{"class":219},"add",[164,9384,1289],{"class":173},[164,9386,7900],{"class":189},[164,9388,9262],{"class":173},[164,9390,9391,9394,9396,9399],{"class":166,"line":186},[164,9392,9393],{"class":173},"Array.",[164,9395,4293],{"class":219},[164,9397,9398],{"class":173},"(mySet); ",[164,9400,9401],{"class":212},"// [1, 2, 3]\n",[16,9403,9404,9405,9345],{},"Или чтобы превратить ",[20,9406,9407],{},"Map",[155,9409,9411],{"className":7513,"code":9410,"language":7515,"meta":160,"style":160},"const myMap = new Map();\nmyMap.set('a', 1).set('b', 2);\n\nconst array = Array.from(myMap, ([name, value]) => ({ name, value }));\n",[20,9412,9413,9431,9462,9466],{"__ignoreMap":160},[164,9414,9415,9417,9420,9422,9425,9428],{"class":166,"line":167},[164,9416,1995],{"class":237},[164,9418,9419],{"class":189}," myMap",[164,9421,1641],{"class":237},[164,9423,9424],{"class":237}," new",[164,9426,9427],{"class":219}," Map",[164,9429,9430],{"class":173},"();\n",[164,9432,9433,9436,9439,9441,9443,9445,9447,9450,9452,9454,9456,9458,9460],{"class":166,"line":177},[164,9434,9435],{"class":173},"myMap.",[164,9437,9438],{"class":219},"set",[164,9440,1289],{"class":173},[164,9442,7532],{"class":484},[164,9444,82],{"class":173},[164,9446,3161],{"class":189},[164,9448,9449],{"class":173},").",[164,9451,9438],{"class":219},[164,9453,1289],{"class":173},[164,9455,7537],{"class":484},[164,9457,82],{"class":173},[164,9459,745],{"class":189},[164,9461,9262],{"class":173},[164,9463,9464],{"class":166,"line":186},[164,9465,206],{"emptyLinePlaceholder":205},[164,9467,9468,9470,9473,9475,9477,9479,9482,9484,9486,9489,9491,9493],{"class":166,"line":196},[164,9469,1995],{"class":237},[164,9471,9472],{"class":189}," array",[164,9474,1641],{"class":237},[164,9476,9274],{"class":173},[164,9478,4293],{"class":219},[164,9480,9481],{"class":173},"(myMap, ([",[164,9483,3317],{"class":1648},[164,9485,82],{"class":173},[164,9487,9488],{"class":1648},"value",[164,9490,3637],{"class":173},[164,9492,1799],{"class":237},[164,9494,9495],{"class":173}," ({ name, value }));\n",[16,9497,9498],{},"Можно использовать, чтобы создать пустой массив",[155,9500,9502],{"className":7513,"code":9501,"language":7515,"meta":160,"style":160},"Array.from(new Array(3)); // [undefined, undefined, undefined]\n\n",[20,9503,9504],{"__ignoreMap":160},[164,9505,9506,9508,9510,9512,9515,9518,9520,9522,9525],{"class":166,"line":167},[164,9507,9393],{"class":173},[164,9509,4293],{"class":219},[164,9511,1289],{"class":173},[164,9513,9514],{"class":237},"new",[164,9516,9517],{"class":219}," Array",[164,9519,1289],{"class":173},[164,9521,7900],{"class":189},[164,9523,9524],{"class":173},")); ",[164,9526,9527],{"class":212},"// [undefined, undefined, undefined]\n",[16,9529,9530,9531,1584],{},"создает новый массив, убирая вложенность на заданную ",[20,9532,9533],{},"depth",[155,9535,9537],{"className":7513,"code":9536,"language":7515,"meta":160,"style":160},"[1, [2, 3]].flat(); // [1, 2, 3]\n[1, [2, 3, [4, 5]]].flat(); // [1, 2, 3, [4, 5]]\n[1, [2, 3, [4, 5]]].flat(2); // [1, 2, 3, 4, 5]\n\n",[20,9538,9539,9563,9596],{"__ignoreMap":160},[164,9540,9541,9543,9545,9547,9549,9551,9553,9556,9559,9561],{"class":166,"line":167},[164,9542,918],{"class":173},[164,9544,3161],{"class":189},[164,9546,7764],{"class":173},[164,9548,745],{"class":189},[164,9550,82],{"class":173},[164,9552,7900],{"class":189},[164,9554,9555],{"class":173},"]].",[164,9557,9558],{"class":219},"flat",[164,9560,7611],{"class":173},[164,9562,9401],{"class":212},[164,9564,9565,9567,9569,9571,9573,9575,9577,9579,9581,9583,9586,9589,9591,9593],{"class":166,"line":177},[164,9566,918],{"class":173},[164,9568,3161],{"class":189},[164,9570,7764],{"class":173},[164,9572,745],{"class":189},[164,9574,82],{"class":173},[164,9576,7900],{"class":189},[164,9578,7764],{"class":173},[164,9580,8954],{"class":189},[164,9582,82],{"class":173},[164,9584,9585],{"class":189},"5",[164,9587,9588],{"class":173},"]]].",[164,9590,9558],{"class":219},[164,9592,7611],{"class":173},[164,9594,9595],{"class":212},"// [1, 2, 3, [4, 5]]\n",[164,9597,9598,9600,9602,9604,9606,9608,9610,9612,9614,9616,9618,9620,9622,9624,9626,9628],{"class":166,"line":186},[164,9599,918],{"class":173},[164,9601,3161],{"class":189},[164,9603,7764],{"class":173},[164,9605,745],{"class":189},[164,9607,82],{"class":173},[164,9609,7900],{"class":189},[164,9611,7764],{"class":173},[164,9613,8954],{"class":189},[164,9615,82],{"class":173},[164,9617,9585],{"class":189},[164,9619,9588],{"class":173},[164,9621,9558],{"class":219},[164,9623,1289],{"class":173},[164,9625,745],{"class":189},[164,9627,7556],{"class":173},[164,9629,9630],{"class":212},"// [1, 2, 3, 4, 5]\n",[11,9632,9634],{"id":9633},"objects","Object",[29,9636,9638],{"id":9637},"config-for-properties","Управление свойствами",[16,9640,9641],{},"метод создания объекта, который дает нам больше контроля\nнад свойствами и методами, позволяя задать для каждого:",[16,9643,9644,9645,9648,9649,9652],{},"writeable - можно ли перезаписывать\nenumerable - является ли перечисляемым, будет ли доступен ",[20,9646,9647],{},"for...in","\nconfigurable - можно ли удалять или менять при помощи ",[20,9650,9651],{},"defineProperty","\nset - функция для записи значения\nget - функция для чтения значения",[155,9654,9656],{"className":7513,"code":9655,"language":7515,"meta":160,"style":160},"const tom = Object.create(Object.prototype, {  \n  name: {    \n    value: \"Tim\",\n    enumerable: true, // доступно для перебора\n    writable: false  // не доступно для записи\n  },  \n  age: { \n    value: 20,\n    enumerable: true, // доступно для перебора\n    writable: true // доступно для записи\n  },  \n  print: {    \n    value: function() { console.log(`Name: ${this.name}  Age: ${this.age}`);},\n    enumerable: false, // не доступно для перебора\n    writable: false, // не доступно для записи\n  }  \n});\n\n",[20,9657,9658,9684,9689,9699,9711,9722,9727,9732,9741,9751,9760,9764,9769,9811,9822,9833,9838],{"__ignoreMap":160},[164,9659,9660,9662,9665,9667,9669,9672,9674,9676,9678,9681],{"class":166,"line":167},[164,9661,1995],{"class":237},[164,9663,9664],{"class":189}," tom",[164,9666,1641],{"class":237},[164,9668,3256],{"class":173},[164,9670,9671],{"class":219},"create",[164,9673,1289],{"class":173},[164,9675,9634],{"class":189},[164,9677,1584],{"class":173},[164,9679,9680],{"class":189},"prototype",[164,9682,9683],{"class":173},", {  \n",[164,9685,9686],{"class":166,"line":177},[164,9687,9688],{"class":173},"  name: {    \n",[164,9690,9691,9694,9697],{"class":166,"line":186},[164,9692,9693],{"class":173},"    value: ",[164,9695,9696],{"class":484},"\"Tim\"",[164,9698,174],{"class":173},[164,9700,9701,9704,9706,9708],{"class":166,"line":196},[164,9702,9703],{"class":173},"    enumerable: ",[164,9705,8248],{"class":189},[164,9707,82],{"class":173},[164,9709,9710],{"class":212},"// доступно для перебора\n",[164,9712,9713,9716,9719],{"class":166,"line":202},[164,9714,9715],{"class":173},"    writable: ",[164,9717,9718],{"class":189},"false",[164,9720,9721],{"class":212},"  // не доступно для записи\n",[164,9723,9724],{"class":166,"line":209},[164,9725,9726],{"class":173},"  },  \n",[164,9728,9729],{"class":166,"line":216},[164,9730,9731],{"class":173},"  age: { \n",[164,9733,9734,9736,9739],{"class":166,"line":225},[164,9735,9693],{"class":173},[164,9737,9738],{"class":189},"20",[164,9740,174],{"class":173},[164,9742,9743,9745,9747,9749],{"class":166,"line":243},[164,9744,9703],{"class":173},[164,9746,8248],{"class":189},[164,9748,82],{"class":173},[164,9750,9710],{"class":212},[164,9752,9753,9755,9757],{"class":166,"line":631},[164,9754,9715],{"class":173},[164,9756,8248],{"class":189},[164,9758,9759],{"class":212}," // доступно для записи\n",[164,9761,9762],{"class":166,"line":645},[164,9763,9726],{"class":173},[164,9765,9766],{"class":166,"line":650},[164,9767,9768],{"class":173},"  print: {    \n",[164,9770,9771,9774,9776,9779,9782,9784,9786,9789,9792,9794,9796,9799,9801,9803,9806,9808],{"class":166,"line":655},[164,9772,9773],{"class":219},"    value",[164,9775,231],{"class":173},[164,9777,9778],{"class":237},"function",[164,9780,9781],{"class":173},"() { console.",[164,9783,7243],{"class":219},[164,9785,1289],{"class":173},[164,9787,9788],{"class":484},"`Name: ${",[164,9790,9791],{"class":189},"this",[164,9793,1584],{"class":484},[164,9795,3317],{"class":173},[164,9797,9798],{"class":484},"}  Age: ${",[164,9800,9791],{"class":189},[164,9802,1584],{"class":484},[164,9804,9805],{"class":173},"age",[164,9807,3027],{"class":484},[164,9809,9810],{"class":173},");},\n",[164,9812,9813,9815,9817,9819],{"class":166,"line":662},[164,9814,9703],{"class":173},[164,9816,9718],{"class":189},[164,9818,82],{"class":173},[164,9820,9821],{"class":212},"// не доступно для перебора\n",[164,9823,9824,9826,9828,9830],{"class":166,"line":678},[164,9825,9715],{"class":173},[164,9827,9718],{"class":189},[164,9829,82],{"class":173},[164,9831,9832],{"class":212},"// не доступно для записи\n",[164,9834,9835],{"class":166,"line":692},[164,9836,9837],{"class":173},"  }  \n",[164,9839,9840],{"class":166,"line":704},[164,9841,1933],{"class":173},[16,9843,9844,9845],{},"позволяет настроить выбранное свойство объекта.\nНе сработает, если ",[20,9846,9847],{},"configurable = false ",[16,9849,9850],{},"запрещает добавление свойств",[16,9852,9853,9854,1584],{},"запрещает добавление и удаление свойств, все текущие свойства делает ",[20,9855,9856],{},"configurable: false",[16,9858,9859,9860,82,9862,1584],{},"запрещает добавление, удаление и изменение свойств,все текущие свойства делает ",[20,9861,9856],{},[20,9863,9864],{},"writable: false",[29,9866,9868],{"id":9867},"helpers-for-properties","Хелперы для свойств",[16,9870,9871,9872,9875,9876,9879],{},"копирует все ",[1597,9873,9874],{},"перечисляемые"," ",[20,9877,9878],{},"enumerable: true"," свойства из одного или\nболее объектов в целевой объект. Копирование неглубокое, для объектов, массивов, функций будет скопирована ссылка.",[16,9881,9882,9883,1584],{},"проверяет, является ли свойство собственным(не унаследованным).\nЧтобы проверить унаследованное свойство можно воспользоваться ",[20,9884,9885],{},"in",[155,9887,9889],{"className":7513,"code":9888,"language":7515,"meta":160,"style":160},"const person = {\n  name: \"Zhenya\"\n};\n\nObject.hasOwn(person, \"name\"); // true\nObject.hasOwn(person, \"toString\"); // false\n\n",[20,9890,9891,9902,9909,9913,9917,9935],{"__ignoreMap":160},[164,9892,9893,9895,9898,9900],{"class":166,"line":167},[164,9894,1995],{"class":237},[164,9896,9897],{"class":189}," person",[164,9899,1641],{"class":237},[164,9901,183],{"class":173},[164,9903,9904,9906],{"class":166,"line":177},[164,9905,1711],{"class":173},[164,9907,9908],{"class":484},"\"Zhenya\"\n",[164,9910,9911],{"class":166,"line":186},[164,9912,2428],{"class":173},[164,9914,9915],{"class":166,"line":196},[164,9916,206],{"emptyLinePlaceholder":205},[164,9918,9919,9922,9925,9928,9931,9933],{"class":166,"line":202},[164,9920,9921],{"class":173},"Object.",[164,9923,9924],{"class":219},"hasOwn",[164,9926,9927],{"class":173},"(person, ",[164,9929,9930],{"class":484},"\"name\"",[164,9932,7556],{"class":173},[164,9934,8294],{"class":212},[164,9936,9937,9939,9941,9943,9946,9948],{"class":166,"line":209},[164,9938,9921],{"class":173},[164,9940,9924],{"class":219},[164,9942,9927],{"class":173},[164,9944,9945],{"class":484},"\"toString\"",[164,9947,7556],{"class":173},[164,9949,8342],{"class":212},[16,9951,9952,9953],{},"проверяет, был ли вызван ",[20,9954,9955],{},"preventExtensions",[16,9957,9952,9958],{},[20,9959,9960],{},"seal",[16,9962,9952,9963],{},[20,9964,9965],{},"freeze",[29,9967,9969],{"id":9968},"keys-and-values","Ключи и значения",[16,9971,9972,9973,9975],{},"вернет ",[1597,9974,9874],{}," свойства в виде массива",[155,9977,9979],{"className":7513,"code":9978,"language":7515,"meta":160,"style":160},"Object.entries({\n  name: 'Zhenya',\n  age: 27,\n}); // [['name', 'Zhenya'], ['age', 27]]\n\n",[20,9980,9981,9990,9999,10009],{"__ignoreMap":160},[164,9982,9983,9985,9988],{"class":166,"line":167},[164,9984,9921],{"class":173},[164,9986,9987],{"class":219},"entries",[164,9989,1706],{"class":173},[164,9991,9992,9994,9997],{"class":166,"line":177},[164,9993,1711],{"class":173},[164,9995,9996],{"class":484},"'Zhenya'",[164,9998,174],{"class":173},[164,10000,10001,10004,10007],{"class":166,"line":186},[164,10002,10003],{"class":173},"  age: ",[164,10005,10006],{"class":189},"27",[164,10008,174],{"class":173},[164,10010,10011,10014],{"class":166,"line":196},[164,10012,10013],{"class":173},"}); ",[164,10015,10016],{"class":212},"// [['name', 'Zhenya'], ['age', 27]]\n",[16,10018,10019],{},"обратно превратит массив в объект",[155,10021,10023],{"className":7513,"code":10022,"language":7515,"meta":160,"style":160},"Object.fromEntries([['name', 'Zhenya'], ['age', 27]]); // { name: 'Zhenya', age: 27 }\n\n",[20,10024,10025],{"__ignoreMap":160},[164,10026,10027,10029,10032,10035,10038,10040,10042,10044,10047,10049,10051,10054],{"class":166,"line":167},[164,10028,9921],{"class":173},[164,10030,10031],{"class":219},"fromEntries",[164,10033,10034],{"class":173},"([[",[164,10036,10037],{"class":484},"'name'",[164,10039,82],{"class":173},[164,10041,9996],{"class":484},[164,10043,7775],{"class":173},[164,10045,10046],{"class":484},"'age'",[164,10048,82],{"class":173},[164,10050,10006],{"class":189},[164,10052,10053],{"class":173},"]]); ",[164,10055,10056],{"class":212},"// { name: 'Zhenya', age: 27 }\n",[16,10058,10059],{},"по простому - получить массив ключей.\nВернет только собственные(без прототипа) и перечисляемые(for...in) свойства.",[155,10061,10063],{"className":7513,"code":10062,"language":7515,"meta":160,"style":160},"Object.keys({\n  name: 'Zhenya',\n  age: 27,\n}); // ['name', 'age']\n\n",[20,10064,10065,10073,10081,10089],{"__ignoreMap":160},[164,10066,10067,10069,10071],{"class":166,"line":167},[164,10068,9921],{"class":173},[164,10070,3259],{"class":219},[164,10072,1706],{"class":173},[164,10074,10075,10077,10079],{"class":166,"line":177},[164,10076,1711],{"class":173},[164,10078,9996],{"class":484},[164,10080,174],{"class":173},[164,10082,10083,10085,10087],{"class":166,"line":186},[164,10084,10003],{"class":173},[164,10086,10006],{"class":189},[164,10088,174],{"class":173},[164,10090,10091,10093],{"class":166,"line":196},[164,10092,10013],{"class":173},[164,10094,10095],{"class":212},"// ['name', 'age']\n",[16,10097,10098],{},"вернет массив значений",[155,10100,10102],{"className":7513,"code":10101,"language":7515,"meta":160,"style":160},"Object.values({\n  name: 'Zhenya',\n  age: 27,\n}); // ['Zhenya', 27]\n\n",[20,10103,10104,10112,10120,10128],{"__ignoreMap":160},[164,10105,10106,10108,10110],{"class":166,"line":167},[164,10107,9921],{"class":173},[164,10109,7094],{"class":219},[164,10111,1706],{"class":173},[164,10113,10114,10116,10118],{"class":166,"line":177},[164,10115,1711],{"class":173},[164,10117,9996],{"class":484},[164,10119,174],{"class":173},[164,10121,10122,10124,10126],{"class":166,"line":186},[164,10123,10003],{"class":173},[164,10125,10006],{"class":189},[164,10127,174],{"class":173},[164,10129,10130,10132],{"class":166,"line":196},[164,10131,10013],{"class":173},[164,10133,10134],{"class":212},"// ['Zhenya', 27]\n",[11,10136,10138],{"id":10137},"functions","Function",[16,10140,10141,10142,10144],{},"вызывает функцию с указанным значением ",[20,10143,9791],{}," и аргументами.",[155,10146,10148],{"className":1622,"code":10147,"language":1625,"meta":160,"style":160},"\nfunction multiply(a, b) {\n  this.logger(a * b);\n  return aa * b;\n}\n\nmultiply.call({ logger: console.log }, 2, 2); // 4\n\n// Мы не можем указать контекст для стрелочной функции\nconst addArrowFn = (a, b) => {\n  this.logger(a + b);\n  return a + b;\n};\n\nmultiply.call({ logger: console.log }, 2, 2); // TypeError: this.logger is not a function\n\n\n",[20,10149,10150,10154,10171,10189,10201,10205,10209,10231,10235,10240,10263,10277,10287,10291,10295],{"__ignoreMap":160},[164,10151,10152],{"class":166,"line":167},[164,10153,206],{"emptyLinePlaceholder":205},[164,10155,10156,10158,10161,10163,10165,10167,10169],{"class":166,"line":177},[164,10157,9778],{"class":237},[164,10159,10160],{"class":219}," multiply",[164,10162,1289],{"class":173},[164,10164,1325],{"class":1648},[164,10166,82],{"class":173},[164,10168,8980],{"class":1648},[164,10170,854],{"class":173},[164,10172,10173,10176,10178,10181,10184,10187],{"class":166,"line":186},[164,10174,10175],{"class":189},"  this",[164,10177,1584],{"class":173},[164,10179,10180],{"class":219},"logger",[164,10182,10183],{"class":173},"(a ",[164,10185,10186],{"class":237},"*",[164,10188,9134],{"class":173},[164,10190,10191,10193,10196,10198],{"class":166,"line":196},[164,10192,2615],{"class":237},[164,10194,10195],{"class":173}," aa ",[164,10197,10186],{"class":237},[164,10199,10200],{"class":173}," b;\n",[164,10202,10203],{"class":166,"line":202},[164,10204,199],{"class":173},[164,10206,10207],{"class":166,"line":209},[164,10208,206],{"emptyLinePlaceholder":205},[164,10210,10211,10214,10217,10220,10222,10224,10226,10228],{"class":166,"line":216},[164,10212,10213],{"class":173},"multiply.",[164,10215,10216],{"class":219},"call",[164,10218,10219],{"class":173},"({ logger: console.log }, ",[164,10221,745],{"class":189},[164,10223,82],{"class":173},[164,10225,745],{"class":189},[164,10227,7556],{"class":173},[164,10229,10230],{"class":212},"// 4\n",[164,10232,10233],{"class":166,"line":225},[164,10234,206],{"emptyLinePlaceholder":205},[164,10236,10237],{"class":166,"line":243},[164,10238,10239],{"class":212},"// Мы не можем указать контекст для стрелочной функции\n",[164,10241,10242,10244,10247,10249,10251,10253,10255,10257,10259,10261],{"class":166,"line":631},[164,10243,1995],{"class":237},[164,10245,10246],{"class":219}," addArrowFn",[164,10248,1641],{"class":237},[164,10250,838],{"class":173},[164,10252,1325],{"class":1648},[164,10254,82],{"class":173},[164,10256,8980],{"class":1648},[164,10258,1430],{"class":173},[164,10260,1799],{"class":237},[164,10262,183],{"class":173},[164,10264,10265,10267,10269,10271,10273,10275],{"class":166,"line":645},[164,10266,10175],{"class":189},[164,10268,1584],{"class":173},[164,10270,10180],{"class":219},[164,10272,10183],{"class":173},[164,10274,8735],{"class":237},[164,10276,9134],{"class":173},[164,10278,10279,10281,10283,10285],{"class":166,"line":650},[164,10280,2615],{"class":237},[164,10282,8987],{"class":173},[164,10284,8735],{"class":237},[164,10286,10200],{"class":173},[164,10288,10289],{"class":166,"line":655},[164,10290,2428],{"class":173},[164,10292,10293],{"class":166,"line":662},[164,10294,206],{"emptyLinePlaceholder":205},[164,10296,10297,10299,10301,10303,10305,10307,10309,10311],{"class":166,"line":678},[164,10298,10213],{"class":173},[164,10300,10216],{"class":219},[164,10302,10219],{"class":173},[164,10304,745],{"class":189},[164,10306,82],{"class":173},[164,10308,745],{"class":189},[164,10310,7556],{"class":173},[164,10312,10313],{"class":212},"// TypeError: this.logger is not a function\n",[16,10315,8014,10316,10318],{},[20,10317,10216],{},", но аргументы передаются в виде массива",[155,10320,10322],{"className":1622,"code":10321,"language":1625,"meta":160,"style":160},"multiply.apply({ logger: console.log }, [2, 3]); // 6\n",[20,10323,10324],{"__ignoreMap":160},[164,10325,10326,10328,10331,10334,10336,10338,10340,10342],{"class":166,"line":167},[164,10327,10213],{"class":173},[164,10329,10330],{"class":219},"apply",[164,10332,10333],{"class":173},"({ logger: console.log }, [",[164,10335,745],{"class":189},[164,10337,82],{"class":173},[164,10339,7900],{"class":189},[164,10341,7781],{"class":173},[164,10343,10344],{"class":212},"// 6\n",[16,10346,10347,10348],{},"создает новую функцию, привязывая ей переданный ",[20,10349,9791],{},[155,10351,10353],{"className":1622,"code":10352,"language":1625,"meta":160,"style":160},"\nconst multiplyTwo = add.bind({ logger: console.log }, 2);\n\nmultiplyTwo(4); // 8\n\n",[20,10354,10355,10359,10380,10384],{"__ignoreMap":160},[164,10356,10357],{"class":166,"line":167},[164,10358,206],{"emptyLinePlaceholder":205},[164,10360,10361,10363,10366,10368,10371,10374,10376,10378],{"class":166,"line":177},[164,10362,1995],{"class":237},[164,10364,10365],{"class":189}," multiplyTwo",[164,10367,1641],{"class":237},[164,10369,10370],{"class":173}," add.",[164,10372,10373],{"class":219},"bind",[164,10375,10219],{"class":173},[164,10377,745],{"class":189},[164,10379,9262],{"class":173},[164,10381,10382],{"class":166,"line":186},[164,10383,206],{"emptyLinePlaceholder":205},[164,10385,10386,10389,10391,10393,10395],{"class":166,"line":196},[164,10387,10388],{"class":219},"multiplyTwo",[164,10390,1289],{"class":173},[164,10392,8954],{"class":189},[164,10394,7556],{"class":173},[164,10396,10397],{"class":212},"// 8\n",[1530,10399,10400],{},"html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s4XuR, html code.shiki .s4XuR{--shiki-default:#E36209;--shiki-dark:#FFAB70}",{"title":160,"searchDepth":177,"depth":177,"links":10402},[10403,10410,10415],{"id":13,"depth":177,"text":7496,"children":10404},[10405,10406,10407,10408,10409],{"id":7499,"depth":186,"text":7500},{"id":8085,"depth":186,"text":8086},{"id":8410,"depth":186,"text":8411},{"id":8932,"depth":186,"text":8933},{"id":9155,"depth":186,"text":9156},{"id":9633,"depth":177,"text":9634,"children":10411},[10412,10413,10414],{"id":9637,"depth":186,"text":9638},{"id":9867,"depth":186,"text":9868},{"id":9968,"depth":186,"text":9969},{"id":10137,"depth":177,"text":10138},"2024-02-26","Методы массивов, объектов и функций, которые полезно знать",{},"/blog/js-built-in-methods","/images/js-methods-preview.jpg",{"title":7491,"description":10417},"blog/js-built-in-methods",[10424,1553,1554],"javascript","_bGMRXaznUGP2MjaGbSPahHCUXjfLaUYUdPN_3-xtjY",{"id":10427,"title":10428,"body":10429,"date":13053,"description":13054,"extension":1546,"meta":13055,"navigation":205,"path":13056,"previewImg":13057,"seo":13058,"stem":13059,"topics":13060,"__hash__":13063},"articles/blog/progressive-images-using-thumbhash.md","Progressive images при помощи base64 миниатюр",{"type":8,"value":10430,"toc":13045},[10431,10435,10438,10448,10451,10457,10464,10467,10473,10476,10482,10489,10493,10496,10503,10971,10974,10979,11086,11092,11270,11284,11295,11589,11592,11603,11606,11629,11632,11699,11702,11806,11809,12087,12091,12102,12348,12352,12359,12704,12708,12714,13042],[11,10432,10434],{"id":10433},"why","Зачем оно вообще нужно",[16,10436,10437],{},"Для начала поговорим про цифры. Если вы когда-нибудь делали аналитику сайта - то вы в курсе, что изображения весьма прожорливые. Скорее всего даже более прожорливые, чем ваш бандл.\nПеред тем, как пытаться оптимизировать что-либо еще - лучше начать именно с картинок.",[16,10439,10440,10441,1128,10444,10447],{},"Однако даже если использовать ",[20,10442,10443],{},"WEBP",[20,10445,10446],{},"AVIF"," - картинки все равно будут весить неприлично много.\nОсобенно если их много.\nПри этом всегда стоит держать в голове, что среднестатистический пользователь вашего сайта скорее всего зайдет с мобильного телефона.\nИ у него вряд ли будет быстрый мобильный интернет. А медленный интернет накладывает свои ограничения:",[16,10449,10450],{},"UI может прыгать, пока все картинки не загрузятся (сделаем допущение, что вы не хотите или не можете привести все картинки к одному размеру)\nПри медленном интернете или если сервер слишком далеко от пользователя, он будет видеть огрызки картинок, что прямо скажем не красиво.",[16,10452,10453],{},[386,10454],{"alt":10455,"src":10456},"Раздражает, правда?","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXJtZTh4dGJ2bDBiMnVuZHJkMmc2cWQxZzFkdGdzOXJxYjdhbGYzbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QIQTfximd3AuQ/giphy.gif",[16,10458,10459,10460,10463],{},"А еще пользователь у нас очень привередливый и если мы не покажем ему хоть что-то в течении первых пары секунд - скорее всего мы его потеряем.\nИменно проблему ",[1597,10461,10462],{},"показать хоть что-то"," и призвана решить прогрессивная загрузка изображений.",[16,10465,10466],{},"Идея заключается в том, что мы показываем пользователю миниатюру в низком разрешении, пока грузим оригинальную картинку.",[16,10468,10469],{},[386,10470],{"alt":10471,"src":10472},"Пример из telegram","/images/progressive-images-using-thumbhash/telegram-example.png",[16,10474,10475],{},"Для реализации такого подхода я выбрал либу thumbhash, она весит \u003C 4kb и позволяет хранить хеш весом всего 30-40 байт.",[10477,10478],"code-example",{"height":10479,"open-file":10480,"project-id":10481},600,"ProgressiveImageExample.tsx","react-ts-c9v55cdz",[16,10483,10484,10485],{},"Еще примеры можно найти на официальном сайте: ",[1325,10486,10487],{"href":10487,"rel":10488},"https://evanw.github.io/thumbhash/",[1592],[11,10490,10492],{"id":10491},"generate-thumbhash-on-client-side","Генерация thumbhash на клиенте",[16,10494,10495],{},"Рассмотрим кейс, когда пользователь создает новый пост и сам загружает изображение. В этом случае сгенерировать thumb можно прямо на клиенте.",[16,10497,10498,10499,10502],{},"Для начала загрузка изображения - тут все стандартно, подписываемся на ",[20,10500,10501],{},"onChange"," у инпута и достаем оттуда файл",[155,10504,10506],{"className":7185,"code":10505,"language":7188,"meta":160,"style":160},"import { useCallback, useState } from \"react\";\n\nconst loadImage = (imageUrl: string) => {\n  return new Promise\u003CHTMLImageElement>((resolve) => {\n    const img = new Image();\n\n    img.src = imageUrl;\n\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n};\n\nconst getImageUrl = (file: File) => {\n  // You can implement your own upload logic here\n  // For example we just create url on client-side\n  const url = URL.createObjectURL(file); \n  return url;\n};\n\nexport default function App() {\n  const [originalImageSrc, setOriginalImageSrc] = useState(\"\");\n\n  const handleFileUpload = useCallback(\n    async (event: React.ChangeEvent\u003CHTMLInputElement>) => {\n      if (!event.target.files?.length) {\n        return;\n      }\n      const file = event.target.files[0];\n      const url = await getImageUrl(file);\n      setOriginalImageSrc(url);\n    },\n    []\n  );\n\n  return (\n    \u003Cdiv className=\"App\">\n      \u003Cinput type=\"file\" onChange={handleFileUpload} />\n      \u003Cimg src={originalImageSrc} />\n    \u003C/div>\n  );\n}\n",[20,10507,10508,10522,10526,10550,10576,10592,10596,10606,10610,10626,10634,10638,10642,10646,10650,10675,10680,10685,10705,10712,10716,10720,10736,10765,10769,10782,10813,10830,10837,10842,10858,10874,10882,10886,10891,10895,10899,10905,10920,10941,10955,10963,10967],{"__ignoreMap":160},[164,10509,10510,10512,10515,10517,10520],{"class":166,"line":167},[164,10511,4279],{"class":237},[164,10513,10514],{"class":173}," { useCallback, useState } ",[164,10516,4293],{"class":237},[164,10518,10519],{"class":484}," \"react\"",[164,10521,240],{"class":173},[164,10523,10524],{"class":166,"line":177},[164,10525,206],{"emptyLinePlaceholder":205},[164,10527,10528,10530,10533,10535,10537,10540,10542,10544,10546,10548],{"class":166,"line":186},[164,10529,1995],{"class":237},[164,10531,10532],{"class":219}," loadImage",[164,10534,1641],{"class":237},[164,10536,838],{"class":173},[164,10538,10539],{"class":1648},"imageUrl",[164,10541,1652],{"class":237},[164,10543,1655],{"class":189},[164,10545,1430],{"class":173},[164,10547,1799],{"class":237},[164,10549,183],{"class":173},[164,10551,10552,10554,10556,10559,10561,10564,10567,10570,10572,10574],{"class":166,"line":196},[164,10553,2615],{"class":237},[164,10555,9424],{"class":237},[164,10557,10558],{"class":189}," Promise",[164,10560,472],{"class":173},[164,10562,10563],{"class":219},"HTMLImageElement",[164,10565,10566],{"class":173},">((",[164,10568,10569],{"class":1648},"resolve",[164,10571,1430],{"class":173},[164,10573,1799],{"class":237},[164,10575,183],{"class":173},[164,10577,10578,10580,10583,10585,10587,10590],{"class":166,"line":202},[164,10579,3307],{"class":237},[164,10581,10582],{"class":189}," img",[164,10584,1641],{"class":237},[164,10586,9424],{"class":237},[164,10588,10589],{"class":219}," Image",[164,10591,9430],{"class":173},[164,10593,10594],{"class":166,"line":209},[164,10595,206],{"emptyLinePlaceholder":205},[164,10597,10598,10601,10603],{"class":166,"line":216},[164,10599,10600],{"class":173},"    img.src ",[164,10602,481],{"class":237},[164,10604,10605],{"class":173}," imageUrl;\n",[164,10607,10608],{"class":166,"line":225},[164,10609,206],{"emptyLinePlaceholder":205},[164,10611,10612,10615,10618,10620,10622,10624],{"class":166,"line":243},[164,10613,10614],{"class":173},"    img.",[164,10616,10617],{"class":219},"onload",[164,10619,1641],{"class":237},[164,10621,4161],{"class":173},[164,10623,1799],{"class":237},[164,10625,183],{"class":173},[164,10627,10628,10631],{"class":166,"line":631},[164,10629,10630],{"class":219},"      resolve",[164,10632,10633],{"class":173},"(img);\n",[164,10635,10636],{"class":166,"line":645},[164,10637,3573],{"class":173},[164,10639,10640],{"class":166,"line":650},[164,10641,3673],{"class":173},[164,10643,10644],{"class":166,"line":655},[164,10645,2428],{"class":173},[164,10647,10648],{"class":166,"line":662},[164,10649,206],{"emptyLinePlaceholder":205},[164,10651,10652,10654,10657,10659,10661,10664,10666,10669,10671,10673],{"class":166,"line":678},[164,10653,1995],{"class":237},[164,10655,10656],{"class":219}," getImageUrl",[164,10658,1641],{"class":237},[164,10660,838],{"class":173},[164,10662,10663],{"class":1648},"file",[164,10665,1652],{"class":237},[164,10667,10668],{"class":219}," File",[164,10670,1430],{"class":173},[164,10672,1799],{"class":237},[164,10674,183],{"class":173},[164,10676,10677],{"class":166,"line":692},[164,10678,10679],{"class":212},"  // You can implement your own upload logic here\n",[164,10681,10682],{"class":166,"line":704},[164,10683,10684],{"class":212},"  // For example we just create url on client-side\n",[164,10686,10687,10689,10692,10694,10697,10699,10702],{"class":166,"line":986},[164,10688,3248],{"class":237},[164,10690,10691],{"class":189}," url",[164,10693,1641],{"class":237},[164,10695,10696],{"class":189}," URL",[164,10698,1584],{"class":173},[164,10700,10701],{"class":219},"createObjectURL",[164,10703,10704],{"class":173},"(file); \n",[164,10706,10707,10709],{"class":166,"line":991},[164,10708,2615],{"class":237},[164,10710,10711],{"class":173}," url;\n",[164,10713,10714],{"class":166,"line":997},[164,10715,2428],{"class":173},[164,10717,10718],{"class":166,"line":1009},[164,10719,206],{"emptyLinePlaceholder":205},[164,10721,10722,10724,10727,10730,10733],{"class":166,"line":1014},[164,10723,1692],{"class":237},[164,10725,10726],{"class":237}," default",[164,10728,10729],{"class":237}," function",[164,10731,10732],{"class":219}," App",[164,10734,10735],{"class":173},"() {\n",[164,10737,10738,10740,10742,10745,10747,10750,10753,10755,10758,10760,10763],{"class":166,"line":1020},[164,10739,3248],{"class":237},[164,10741,7529],{"class":173},[164,10743,10744],{"class":189},"originalImageSrc",[164,10746,82],{"class":173},[164,10748,10749],{"class":189},"setOriginalImageSrc",[164,10751,10752],{"class":173},"] ",[164,10754,481],{"class":237},[164,10756,10757],{"class":219}," useState",[164,10759,1289],{"class":173},[164,10761,10762],{"class":484},"\"\"",[164,10764,9262],{"class":173},[164,10766,10767],{"class":166,"line":1032},[164,10768,206],{"emptyLinePlaceholder":205},[164,10770,10771,10773,10776,10778,10780],{"class":166,"line":1037},[164,10772,3248],{"class":237},[164,10774,10775],{"class":189}," handleFileUpload",[164,10777,1641],{"class":237},[164,10779,2042],{"class":219},[164,10781,2058],{"class":173},[164,10783,10784,10787,10789,10792,10794,10797,10799,10802,10804,10807,10809,10811],{"class":166,"line":1043},[164,10785,10786],{"class":237},"    async",[164,10788,838],{"class":173},[164,10790,10791],{"class":1648},"event",[164,10793,1652],{"class":237},[164,10795,10796],{"class":219}," React",[164,10798,1584],{"class":173},[164,10800,10801],{"class":219},"ChangeEvent",[164,10803,472],{"class":173},[164,10805,10806],{"class":219},"HTMLInputElement",[164,10808,2573],{"class":173},[164,10810,1799],{"class":237},[164,10812,183],{"class":173},[164,10814,10815,10818,10820,10823,10826,10828],{"class":166,"line":1899},[164,10816,10817],{"class":237},"      if",[164,10819,838],{"class":173},[164,10821,10822],{"class":237},"!",[164,10824,10825],{"class":173},"event.target.files?.",[164,10827,7510],{"class":189},[164,10829,854],{"class":173},[164,10831,10832,10835],{"class":166,"line":1925},[164,10833,10834],{"class":237},"        return",[164,10836,240],{"class":173},[164,10838,10839],{"class":166,"line":1930},[164,10840,10841],{"class":173},"      }\n",[164,10843,10844,10846,10849,10851,10854,10856],{"class":166,"line":1936},[164,10845,1860],{"class":237},[164,10847,10848],{"class":189}," file",[164,10850,1641],{"class":237},[164,10852,10853],{"class":173}," event.target.files[",[164,10855,269],{"class":189},[164,10857,7540],{"class":173},[164,10859,10860,10862,10864,10866,10869,10871],{"class":166,"line":1941},[164,10861,1860],{"class":237},[164,10863,10691],{"class":189},[164,10865,1641],{"class":237},[164,10867,10868],{"class":237}," await",[164,10870,10656],{"class":219},[164,10872,10873],{"class":173},"(file);\n",[164,10875,10876,10879],{"class":166,"line":1950},[164,10877,10878],{"class":219},"      setOriginalImageSrc",[164,10880,10881],{"class":173},"(url);\n",[164,10883,10884],{"class":166,"line":1959},[164,10885,1831],{"class":173},[164,10887,10888],{"class":166,"line":1964},[164,10889,10890],{"class":173},"    []\n",[164,10892,10893],{"class":166,"line":1970},[164,10894,2120],{"class":173},[164,10896,10897],{"class":166,"line":1975},[164,10898,206],{"emptyLinePlaceholder":205},[164,10900,10901,10903],{"class":166,"line":1981},[164,10902,2615],{"class":237},[164,10904,2171],{"class":173},[164,10906,10907,10909,10911,10913,10915,10918],{"class":166,"line":1986},[164,10908,509],{"class":173},[164,10910,475],{"class":170},[164,10912,478],{"class":219},[164,10914,481],{"class":237},[164,10916,10917],{"class":484},"\"App\"",[164,10919,488],{"class":173},[164,10921,10922,10924,10926,10928,10930,10933,10936,10938],{"class":166,"line":1992},[164,10923,7419],{"class":173},[164,10925,1424],{"class":170},[164,10927,4282],{"class":219},[164,10929,481],{"class":237},[164,10931,10932],{"class":484},"\"file\"",[164,10934,10935],{"class":219}," onChange",[164,10937,481],{"class":237},[164,10939,10940],{"class":173},"{handleFileUpload} />\n",[164,10942,10943,10945,10947,10950,10952],{"class":166,"line":2027},[164,10944,7419],{"class":173},[164,10946,386],{"class":170},[164,10948,10949],{"class":219}," src",[164,10951,481],{"class":237},[164,10953,10954],{"class":173},"{originalImageSrc} />\n",[164,10956,10957,10959,10961],{"class":166,"line":2032},[164,10958,530],{"class":173},[164,10960,475],{"class":170},[164,10962,488],{"class":173},[164,10964,10965],{"class":166,"line":2052},[164,10966,2120],{"class":173},[164,10968,10969],{"class":166,"line":2061},[164,10970,199],{"class":173},[16,10972,10973],{},"Теперь нам необходимо считать файл как картинку, чтобы создать миниатюру.",[16,10975,10976,10977],{},"Для этого напишем небольшой хелпер, который загружает картинку по переданному url и возвращает ",[20,10978,10563],{},[155,10980,10982],{"className":1622,"code":10981,"language":1625,"meta":160,"style":160},"const loadImage = (imageUrl: string) => {\n  return new Promise\u003CHTMLImageElement>((resolve) => {\n    const img = new Image();\n    img.src = imageUrl;\n\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n};\n",[20,10983,10984,11006,11028,11042,11050,11054,11068,11074,11078,11082],{"__ignoreMap":160},[164,10985,10986,10988,10990,10992,10994,10996,10998,11000,11002,11004],{"class":166,"line":167},[164,10987,1995],{"class":237},[164,10989,10532],{"class":219},[164,10991,1641],{"class":237},[164,10993,838],{"class":173},[164,10995,10539],{"class":1648},[164,10997,1652],{"class":237},[164,10999,1655],{"class":189},[164,11001,1430],{"class":173},[164,11003,1799],{"class":237},[164,11005,183],{"class":173},[164,11007,11008,11010,11012,11014,11016,11018,11020,11022,11024,11026],{"class":166,"line":177},[164,11009,2615],{"class":237},[164,11011,9424],{"class":237},[164,11013,10558],{"class":189},[164,11015,472],{"class":173},[164,11017,10563],{"class":219},[164,11019,10566],{"class":173},[164,11021,10569],{"class":1648},[164,11023,1430],{"class":173},[164,11025,1799],{"class":237},[164,11027,183],{"class":173},[164,11029,11030,11032,11034,11036,11038,11040],{"class":166,"line":186},[164,11031,3307],{"class":237},[164,11033,10582],{"class":189},[164,11035,1641],{"class":237},[164,11037,9424],{"class":237},[164,11039,10589],{"class":219},[164,11041,9430],{"class":173},[164,11043,11044,11046,11048],{"class":166,"line":196},[164,11045,10600],{"class":173},[164,11047,481],{"class":237},[164,11049,10605],{"class":173},[164,11051,11052],{"class":166,"line":202},[164,11053,206],{"emptyLinePlaceholder":205},[164,11055,11056,11058,11060,11062,11064,11066],{"class":166,"line":209},[164,11057,10614],{"class":173},[164,11059,10617],{"class":219},[164,11061,1641],{"class":237},[164,11063,4161],{"class":173},[164,11065,1799],{"class":237},[164,11067,183],{"class":173},[164,11069,11070,11072],{"class":166,"line":216},[164,11071,10630],{"class":219},[164,11073,10633],{"class":173},[164,11075,11076],{"class":166,"line":225},[164,11077,3573],{"class":173},[164,11079,11080],{"class":166,"line":243},[164,11081,3673],{"class":173},[164,11083,11084],{"class":166,"line":631},[164,11085,2428],{"class":173},[16,11087,11088,11089,1652],{},"Теперь необходимо создать миниатюру изображения, для этого воспользуемся ",[20,11090,11091],{},"canvas",[155,11093,11095],{"className":1622,"code":11094,"language":1625,"meta":160,"style":160},"const size = Math.max(img.width, img.height);\nconst w = img.width = Math.round(100 * img.width / size);\nconst h = img.height = Math.round(100 * img.height / size);\n\n// Create image thumb (100x100 maximum size)\nconst canvas = document.createElement('canvas');\nconst c = canvas.getContext('2d');\ncanvas.width = w;\ncanvas.height = h;\nc.drawImage(img, 0, 0, w, h);\n",[20,11096,11097,11115,11148,11178,11182,11187,11208,11230,11240,11250],{"__ignoreMap":160},[164,11098,11099,11101,11104,11106,11109,11112],{"class":166,"line":167},[164,11100,1995],{"class":237},[164,11102,11103],{"class":189}," size",[164,11105,1641],{"class":237},[164,11107,11108],{"class":173}," Math.",[164,11110,11111],{"class":219},"max",[164,11113,11114],{"class":173},"(img.width, img.height);\n",[164,11116,11117,11119,11122,11124,11127,11129,11131,11134,11136,11138,11141,11143,11145],{"class":166,"line":177},[164,11118,1995],{"class":237},[164,11120,11121],{"class":189}," w",[164,11123,1641],{"class":237},[164,11125,11126],{"class":173}," img.width ",[164,11128,481],{"class":237},[164,11130,11108],{"class":173},[164,11132,11133],{"class":219},"round",[164,11135,1289],{"class":173},[164,11137,234],{"class":189},[164,11139,11140],{"class":237}," *",[164,11142,11126],{"class":173},[164,11144,848],{"class":237},[164,11146,11147],{"class":173}," size);\n",[164,11149,11150,11152,11155,11157,11160,11162,11164,11166,11168,11170,11172,11174,11176],{"class":166,"line":186},[164,11151,1995],{"class":237},[164,11153,11154],{"class":189}," h",[164,11156,1641],{"class":237},[164,11158,11159],{"class":173}," img.height ",[164,11161,481],{"class":237},[164,11163,11108],{"class":173},[164,11165,11133],{"class":219},[164,11167,1289],{"class":173},[164,11169,234],{"class":189},[164,11171,11140],{"class":237},[164,11173,11159],{"class":173},[164,11175,848],{"class":237},[164,11177,11147],{"class":173},[164,11179,11180],{"class":166,"line":196},[164,11181,206],{"emptyLinePlaceholder":205},[164,11183,11184],{"class":166,"line":202},[164,11185,11186],{"class":212},"// Create image thumb (100x100 maximum size)\n",[164,11188,11189,11191,11194,11196,11198,11201,11203,11206],{"class":166,"line":209},[164,11190,1995],{"class":237},[164,11192,11193],{"class":189}," canvas",[164,11195,1641],{"class":237},[164,11197,9251],{"class":173},[164,11199,11200],{"class":219},"createElement",[164,11202,1289],{"class":173},[164,11204,11205],{"class":484},"'canvas'",[164,11207,9262],{"class":173},[164,11209,11210,11212,11215,11217,11220,11223,11225,11228],{"class":166,"line":216},[164,11211,1995],{"class":237},[164,11213,11214],{"class":189}," c",[164,11216,1641],{"class":237},[164,11218,11219],{"class":173}," canvas.",[164,11221,11222],{"class":219},"getContext",[164,11224,1289],{"class":173},[164,11226,11227],{"class":484},"'2d'",[164,11229,9262],{"class":173},[164,11231,11232,11235,11237],{"class":166,"line":225},[164,11233,11234],{"class":173},"canvas.width ",[164,11236,481],{"class":237},[164,11238,11239],{"class":173}," w;\n",[164,11241,11242,11245,11247],{"class":166,"line":243},[164,11243,11244],{"class":173},"canvas.height ",[164,11246,481],{"class":237},[164,11248,11249],{"class":173}," h;\n",[164,11251,11252,11255,11258,11261,11263,11265,11267],{"class":166,"line":631},[164,11253,11254],{"class":173},"c.",[164,11256,11257],{"class":219},"drawImage",[164,11259,11260],{"class":173},"(img, ",[164,11262,269],{"class":189},[164,11264,82],{"class":173},[164,11266,269],{"class":189},[164,11268,11269],{"class":173},", w, h);\n",[16,11271,11272,11273,11280,11281,1584],{},"После чего достаем из полученной миниатюры ",[1325,11274,11277],{"href":11275,"rel":11276},"https://developer.mozilla.org/en-US/docs/Web/API/ImageData",[1592],[20,11278,11279],{},"ImageData"," и скармливаем полученный массив пикселей методу ",[20,11282,11283],{},"rgbaToThumbHash",[16,11285,11286,11287,11290,11291,11294],{},"Полученный ",[1597,11288,11289],{},"Uint8Array"," я конвертирую в ",[1597,11292,11293],{},"base64"," строку, которую мы затем можем сохранить на сервере.",[155,11296,11299],{"className":1622,"code":11297,"highlights":11298,"language":1625,"meta":160,"style":160},"import { rgbaToThumbHash } from 'thumbhash';\n\nasync function generateImageThumb(img: HTMLImageElement) {\n  const size = Math.max(img.width, img.height);\n  const w = img.width = Math.round(100 * img.width / size);\n  const h = img.height = Math.round(100 * img.height / size);\n\n  // // Create image thumb (100x100 maximum size)\n  const canvas = document.createElement('canvas');\n  const c = canvas.getContext('2d');\n  canvas.width = w;\n  canvas.height = h;\n  c.drawImage(img, 0, 0, w, h);\n  // Get pixels array\n  const pixels = c.getImageData(0, 0, w, h);\n  // Get thumbhash (Uint8Array)\n  const hash = rgbaToThumbHash(w, h, pixels.data);\n  // convert Uint8Array to base64 string\n  const binString = String.fromCodePoint(...hash);\n  return btoa(binString);\n}\n",[678,704,991],[20,11300,11301,11315,11319,11340,11354,11382,11410,11414,11422,11440,11458,11467,11476,11493,11498,11525,11530,11546,11551,11575,11585],{"__ignoreMap":160},[164,11302,11303,11305,11308,11310,11313],{"class":166,"line":167},[164,11304,4279],{"class":237},[164,11306,11307],{"class":173}," { rgbaToThumbHash } ",[164,11309,4293],{"class":237},[164,11311,11312],{"class":484}," 'thumbhash'",[164,11314,240],{"class":173},[164,11316,11317],{"class":166,"line":177},[164,11318,206],{"emptyLinePlaceholder":205},[164,11320,11321,11324,11326,11329,11331,11333,11335,11338],{"class":166,"line":186},[164,11322,11323],{"class":237},"async",[164,11325,10729],{"class":237},[164,11327,11328],{"class":219}," generateImageThumb",[164,11330,1289],{"class":173},[164,11332,386],{"class":1648},[164,11334,1652],{"class":237},[164,11336,11337],{"class":219}," HTMLImageElement",[164,11339,854],{"class":173},[164,11341,11342,11344,11346,11348,11350,11352],{"class":166,"line":196},[164,11343,3248],{"class":237},[164,11345,11103],{"class":189},[164,11347,1641],{"class":237},[164,11349,11108],{"class":173},[164,11351,11111],{"class":219},[164,11353,11114],{"class":173},[164,11355,11356,11358,11360,11362,11364,11366,11368,11370,11372,11374,11376,11378,11380],{"class":166,"line":202},[164,11357,3248],{"class":237},[164,11359,11121],{"class":189},[164,11361,1641],{"class":237},[164,11363,11126],{"class":173},[164,11365,481],{"class":237},[164,11367,11108],{"class":173},[164,11369,11133],{"class":219},[164,11371,1289],{"class":173},[164,11373,234],{"class":189},[164,11375,11140],{"class":237},[164,11377,11126],{"class":173},[164,11379,848],{"class":237},[164,11381,11147],{"class":173},[164,11383,11384,11386,11388,11390,11392,11394,11396,11398,11400,11402,11404,11406,11408],{"class":166,"line":209},[164,11385,3248],{"class":237},[164,11387,11154],{"class":189},[164,11389,1641],{"class":237},[164,11391,11159],{"class":173},[164,11393,481],{"class":237},[164,11395,11108],{"class":173},[164,11397,11133],{"class":219},[164,11399,1289],{"class":173},[164,11401,234],{"class":189},[164,11403,11140],{"class":237},[164,11405,11159],{"class":173},[164,11407,848],{"class":237},[164,11409,11147],{"class":173},[164,11411,11412],{"class":166,"line":216},[164,11413,206],{"emptyLinePlaceholder":205},[164,11415,11416,11419],{"class":166,"line":225},[164,11417,11418],{"class":212},"  //",[164,11420,11421],{"class":212}," // Create image thumb (100x100 maximum size)\n",[164,11423,11424,11426,11428,11430,11432,11434,11436,11438],{"class":166,"line":243},[164,11425,3248],{"class":237},[164,11427,11193],{"class":189},[164,11429,1641],{"class":237},[164,11431,9251],{"class":173},[164,11433,11200],{"class":219},[164,11435,1289],{"class":173},[164,11437,11205],{"class":484},[164,11439,9262],{"class":173},[164,11441,11442,11444,11446,11448,11450,11452,11454,11456],{"class":166,"line":631},[164,11443,3248],{"class":237},[164,11445,11214],{"class":189},[164,11447,1641],{"class":237},[164,11449,11219],{"class":173},[164,11451,11222],{"class":219},[164,11453,1289],{"class":173},[164,11455,11227],{"class":484},[164,11457,9262],{"class":173},[164,11459,11460,11463,11465],{"class":166,"line":645},[164,11461,11462],{"class":173},"  canvas.width ",[164,11464,481],{"class":237},[164,11466,11239],{"class":173},[164,11468,11469,11472,11474],{"class":166,"line":650},[164,11470,11471],{"class":173},"  canvas.height ",[164,11473,481],{"class":237},[164,11475,11249],{"class":173},[164,11477,11478,11481,11483,11485,11487,11489,11491],{"class":166,"line":655},[164,11479,11480],{"class":173},"  c.",[164,11482,11257],{"class":219},[164,11484,11260],{"class":173},[164,11486,269],{"class":189},[164,11488,82],{"class":173},[164,11490,269],{"class":189},[164,11492,11269],{"class":173},[164,11494,11495],{"class":166,"line":662},[164,11496,11497],{"class":212},"  // Get pixels array\n",[164,11499,11502,11504,11507,11509,11512,11515,11517,11519,11521,11523],{"class":11500,"line":678},[166,11501],"highlight",[164,11503,3248],{"class":237},[164,11505,11506],{"class":189}," pixels",[164,11508,1641],{"class":237},[164,11510,11511],{"class":173}," c.",[164,11513,11514],{"class":219},"getImageData",[164,11516,1289],{"class":173},[164,11518,269],{"class":189},[164,11520,82],{"class":173},[164,11522,269],{"class":189},[164,11524,11269],{"class":173},[164,11526,11527],{"class":166,"line":692},[164,11528,11529],{"class":212},"  // Get thumbhash (Uint8Array)\n",[164,11531,11533,11535,11538,11540,11543],{"class":11532,"line":704},[166,11501],[164,11534,3248],{"class":237},[164,11536,11537],{"class":189}," hash",[164,11539,1641],{"class":237},[164,11541,11542],{"class":219}," rgbaToThumbHash",[164,11544,11545],{"class":173},"(w, h, pixels.data);\n",[164,11547,11548],{"class":166,"line":986},[164,11549,11550],{"class":212},"  // convert Uint8Array to base64 string\n",[164,11552,11554,11556,11559,11561,11564,11567,11569,11572],{"class":11553,"line":991},[166,11501],[164,11555,3248],{"class":237},[164,11557,11558],{"class":189}," binString",[164,11560,1641],{"class":237},[164,11562,11563],{"class":173}," String.",[164,11565,11566],{"class":219},"fromCodePoint",[164,11568,1289],{"class":173},[164,11570,11571],{"class":237},"...",[164,11573,11574],{"class":173},"hash);\n",[164,11576,11577,11579,11582],{"class":166,"line":997},[164,11578,2615],{"class":237},[164,11580,11581],{"class":219}," btoa",[164,11583,11584],{"class":173},"(binString);\n",[164,11586,11587],{"class":166,"line":1009},[164,11588,199],{"class":173},[16,11590,11591],{},"В результате этих махинаций мы получаем такую строку",[155,11593,11597],{"className":11594,"code":11595,"language":11596,"meta":160,"style":160},"language-txt shiki shiki-themes github-light github-dark","0ucJJgoHiHeId5eYV4d3hneYiHiPiPc=\n","txt",[20,11598,11599],{"__ignoreMap":160},[164,11600,11601],{"class":166,"line":167},[164,11602,11595],{},[16,11604,11605],{},"Весит она всего 32 байта",[155,11607,11609],{"className":1622,"code":11608,"language":1625,"meta":160,"style":160},"new Blob([\"0ucJJgoHiHeId5eYV4d3hneYiHiPiPc=\"]).size; // 32\n",[20,11610,11611],{"__ignoreMap":160},[164,11612,11613,11615,11618,11620,11623,11626],{"class":166,"line":167},[164,11614,9514],{"class":237},[164,11616,11617],{"class":219}," Blob",[164,11619,9365],{"class":173},[164,11621,11622],{"class":484},"\"0ucJJgoHiHeId5eYV4d3hneYiHiPiPc=\"",[164,11624,11625],{"class":173},"]).size; ",[164,11627,11628],{"class":212},"// 32\n",[16,11630,11631],{},"Ее можно сохранить на сервере и присылать вместе с объектом поста",[155,11633,11635],{"className":1622,"code":11634,"language":1625,"meta":160,"style":160},"[\n  {\n    id: '1',\n    title: 'Post title',\n    image: '/path/to/image1.png',\n    thumbhash: '0ucJJgoHiHeId5eYV4d3hneYiHiPiPc=',\n  },\n  // ...\n];\n",[20,11636,11637,11641,11646,11656,11666,11676,11686,11690,11695],{"__ignoreMap":160},[164,11638,11639],{"class":166,"line":167},[164,11640,8099],{"class":173},[164,11642,11643],{"class":166,"line":177},[164,11644,11645],{"class":173},"  {\n",[164,11647,11648,11651,11654],{"class":166,"line":186},[164,11649,11650],{"class":173},"    id: ",[164,11652,11653],{"class":484},"'1'",[164,11655,174],{"class":173},[164,11657,11658,11661,11664],{"class":166,"line":196},[164,11659,11660],{"class":173},"    title: ",[164,11662,11663],{"class":484},"'Post title'",[164,11665,174],{"class":173},[164,11667,11668,11671,11674],{"class":166,"line":202},[164,11669,11670],{"class":173},"    image: ",[164,11672,11673],{"class":484},"'/path/to/image1.png'",[164,11675,174],{"class":173},[164,11677,11678,11681,11684],{"class":166,"line":209},[164,11679,11680],{"class":173},"    thumbhash: ",[164,11682,11683],{"class":484},"'0ucJJgoHiHeId5eYV4d3hneYiHiPiPc='",[164,11685,174],{"class":173},[164,11687,11688],{"class":166,"line":216},[164,11689,1769],{"class":173},[164,11691,11692],{"class":166,"line":225},[164,11693,11694],{"class":212},"  // ...\n",[164,11696,11697],{"class":166,"line":243},[164,11698,7540],{"class":173},[16,11700,11701],{},"Далее на клиенте нужно преобразовать ее сначала в Uint8Array, а затем в base64 картинку",[155,11703,11705],{"className":1622,"code":11704,"language":1625,"meta":160,"style":160},"const thumbToImageSrc = (thumb: string) => {\n  const binString = atob(thumb);\n  const data = Uint8Array.from(binString, (m) => m.codePointAt(0));\n  const src = thumbHashToDataURL(data);\n  return src;\n};\n",[20,11706,11707,11731,11745,11781,11795,11802],{"__ignoreMap":160},[164,11708,11709,11711,11714,11716,11718,11721,11723,11725,11727,11729],{"class":166,"line":167},[164,11710,1995],{"class":237},[164,11712,11713],{"class":219}," thumbToImageSrc",[164,11715,1641],{"class":237},[164,11717,838],{"class":173},[164,11719,11720],{"class":1648},"thumb",[164,11722,1652],{"class":237},[164,11724,1655],{"class":189},[164,11726,1430],{"class":173},[164,11728,1799],{"class":237},[164,11730,183],{"class":173},[164,11732,11733,11735,11737,11739,11742],{"class":166,"line":177},[164,11734,3248],{"class":237},[164,11736,11558],{"class":189},[164,11738,1641],{"class":237},[164,11740,11741],{"class":219}," atob",[164,11743,11744],{"class":173},"(thumb);\n",[164,11746,11747,11749,11752,11754,11757,11759,11762,11765,11767,11769,11772,11775,11777,11779],{"class":166,"line":186},[164,11748,3248],{"class":237},[164,11750,11751],{"class":189}," data",[164,11753,1641],{"class":237},[164,11755,11756],{"class":173}," Uint8Array.",[164,11758,4293],{"class":219},[164,11760,11761],{"class":173},"(binString, (",[164,11763,11764],{"class":1648},"m",[164,11766,1430],{"class":173},[164,11768,1799],{"class":237},[164,11770,11771],{"class":173}," m.",[164,11773,11774],{"class":219},"codePointAt",[164,11776,1289],{"class":173},[164,11778,269],{"class":189},[164,11780,2024],{"class":173},[164,11782,11783,11785,11787,11789,11792],{"class":166,"line":196},[164,11784,3248],{"class":237},[164,11786,10949],{"class":189},[164,11788,1641],{"class":237},[164,11790,11791],{"class":219}," thumbHashToDataURL",[164,11793,11794],{"class":173},"(data);\n",[164,11796,11797,11799],{"class":166,"line":202},[164,11798,2615],{"class":237},[164,11800,11801],{"class":173}," src;\n",[164,11803,11804],{"class":166,"line":209},[164,11805,2428],{"class":173},[16,11807,11808],{},"Наконец нам нужен компонент, который будет запускать загрузку оригинальной картинки и отображать thumbhash миниатюру на время загрузки",[155,11810,11812],{"className":7185,"code":11811,"language":7188,"meta":160,"style":160},"type ProgressiveImageProps = {\n    src: string;\n    thumbHash: string;\n}\n\nconst ProgressiveImage: React.FC\u003CProgressiveImageProps> = ({ src: originalImageSrc, thumbHash }) => {\n  const thumb = useMemo(() => thumbHash ? thumbToImageSrc(thumbHash) : null, [thumbHash]);\n  const [imgSrc, setImgSrc] = useState(thumb ? thumb : originalImageSrc);\n\n  const loadOriginalImage = useCallback(async () => {\n    await loadImage(originalImageSrc);\n    setImgSrc(originalImageSrc);\n  }, [originalImageSrc]);\n\n  useEffect(() => {\n    if (thumbHash ) {\n      loadOriginalImage();\n    };\n  }, [loadOriginalImage, thumbHash]);\n\n  return (\n    \u003Cimg src={imgSrc} />\n  );\n};\n",[20,11813,11814,11825,11836,11847,11851,11855,11902,11937,11970,11974,11995,12005,12012,12017,12021,12032,12040,12047,12051,12056,12060,12066,12079,12083],{"__ignoreMap":160},[164,11815,11816,11818,11821,11823],{"class":166,"line":167},[164,11817,921],{"class":237},[164,11819,11820],{"class":219}," ProgressiveImageProps",[164,11822,1641],{"class":237},[164,11824,183],{"class":173},[164,11826,11827,11830,11832,11834],{"class":166,"line":177},[164,11828,11829],{"class":1648},"    src",[164,11831,1652],{"class":237},[164,11833,1655],{"class":189},[164,11835,240],{"class":173},[164,11837,11838,11841,11843,11845],{"class":166,"line":186},[164,11839,11840],{"class":1648},"    thumbHash",[164,11842,1652],{"class":237},[164,11844,1655],{"class":189},[164,11846,240],{"class":173},[164,11848,11849],{"class":166,"line":196},[164,11850,199],{"class":173},[164,11852,11853],{"class":166,"line":202},[164,11854,206],{"emptyLinePlaceholder":205},[164,11856,11857,11859,11862,11864,11866,11868,11871,11873,11876,11878,11880,11883,11886,11888,11890,11892,11895,11898,11900],{"class":166,"line":209},[164,11858,1995],{"class":237},[164,11860,11861],{"class":219}," ProgressiveImage",[164,11863,1652],{"class":237},[164,11865,10796],{"class":219},[164,11867,1584],{"class":173},[164,11869,11870],{"class":219},"FC",[164,11872,472],{"class":173},[164,11874,11875],{"class":219},"ProgressiveImageProps",[164,11877,2166],{"class":173},[164,11879,481],{"class":237},[164,11881,11882],{"class":173}," ({ ",[164,11884,11885],{"class":1648},"src",[164,11887,231],{"class":173},[164,11889,10744],{"class":1648},[164,11891,82],{"class":173},[164,11893,11894],{"class":1648},"thumbHash",[164,11896,11897],{"class":173}," }) ",[164,11899,1799],{"class":237},[164,11901,183],{"class":173},[164,11903,11904,11906,11909,11911,11914,11916,11918,11921,11924,11926,11929,11931,11934],{"class":166,"line":216},[164,11905,3248],{"class":237},[164,11907,11908],{"class":189}," thumb",[164,11910,1641],{"class":237},[164,11912,11913],{"class":219}," useMemo",[164,11915,2045],{"class":173},[164,11917,1799],{"class":237},[164,11919,11920],{"class":173}," thumbHash ",[164,11922,11923],{"class":237},"?",[164,11925,11713],{"class":219},[164,11927,11928],{"class":173},"(thumbHash) ",[164,11930,1652],{"class":237},[164,11932,11933],{"class":189}," null",[164,11935,11936],{"class":173},", [thumbHash]);\n",[164,11938,11939,11941,11943,11946,11948,11951,11953,11955,11957,11960,11962,11965,11967],{"class":166,"line":225},[164,11940,3248],{"class":237},[164,11942,7529],{"class":173},[164,11944,11945],{"class":189},"imgSrc",[164,11947,82],{"class":173},[164,11949,11950],{"class":189},"setImgSrc",[164,11952,10752],{"class":173},[164,11954,481],{"class":237},[164,11956,10757],{"class":219},[164,11958,11959],{"class":173},"(thumb ",[164,11961,11923],{"class":237},[164,11963,11964],{"class":173}," thumb ",[164,11966,1652],{"class":237},[164,11968,11969],{"class":173}," originalImageSrc);\n",[164,11971,11972],{"class":166,"line":243},[164,11973,206],{"emptyLinePlaceholder":205},[164,11975,11976,11978,11981,11983,11985,11987,11989,11991,11993],{"class":166,"line":631},[164,11977,3248],{"class":237},[164,11979,11980],{"class":189}," loadOriginalImage",[164,11982,1641],{"class":237},[164,11984,2042],{"class":219},[164,11986,1289],{"class":173},[164,11988,11323],{"class":237},[164,11990,4161],{"class":173},[164,11992,1799],{"class":237},[164,11994,183],{"class":173},[164,11996,11997,12000,12002],{"class":166,"line":645},[164,11998,11999],{"class":237},"    await",[164,12001,10532],{"class":219},[164,12003,12004],{"class":173},"(originalImageSrc);\n",[164,12006,12007,12010],{"class":166,"line":650},[164,12008,12009],{"class":219},"    setImgSrc",[164,12011,12004],{"class":173},[164,12013,12014],{"class":166,"line":655},[164,12015,12016],{"class":173},"  }, [originalImageSrc]);\n",[164,12018,12019],{"class":166,"line":662},[164,12020,206],{"emptyLinePlaceholder":205},[164,12022,12023,12026,12028,12030],{"class":166,"line":678},[164,12024,12025],{"class":219},"  useEffect",[164,12027,2045],{"class":173},[164,12029,1799],{"class":237},[164,12031,183],{"class":173},[164,12033,12034,12037],{"class":166,"line":692},[164,12035,12036],{"class":237},"    if",[164,12038,12039],{"class":173}," (thumbHash ) {\n",[164,12041,12042,12045],{"class":166,"line":704},[164,12043,12044],{"class":219},"      loadOriginalImage",[164,12046,9430],{"class":173},[164,12048,12049],{"class":166,"line":986},[164,12050,3573],{"class":173},[164,12052,12053],{"class":166,"line":991},[164,12054,12055],{"class":173},"  }, [loadOriginalImage, thumbHash]);\n",[164,12057,12058],{"class":166,"line":997},[164,12059,206],{"emptyLinePlaceholder":205},[164,12061,12062,12064],{"class":166,"line":1009},[164,12063,2615],{"class":237},[164,12065,2171],{"class":173},[164,12067,12068,12070,12072,12074,12076],{"class":166,"line":1014},[164,12069,509],{"class":173},[164,12071,386],{"class":170},[164,12073,10949],{"class":219},[164,12075,481],{"class":237},[164,12077,12078],{"class":173},"{imgSrc} />\n",[164,12080,12081],{"class":166,"line":1020},[164,12082,2120],{"class":173},[164,12084,12085],{"class":166,"line":1032},[164,12086,2428],{"class":173},[11,12088,12090],{"id":12089},"generate-thumbhash-on-server-side","Генерация thumbhash на сервере",[16,12092,12093,12094,12101],{},"Скорее всего будет использоваться ",[1325,12095,12098],{"href":12096,"rel":12097},"https://developer.mozilla.org/ru/docs/Web/API/FormData",[1592],[20,12099,12100],{},"FormData",", чтобы загрузить файл на сервер.",[155,12103,12105],{"className":1622,"code":12104,"language":1625,"meta":160,"style":160},"export async function POST(request: NextRequest) {\n  const formData = await request.formData();\n  const file = formData.get('file') as File;\n\n  if (!file) {\n    return NextResponse.json({\n      code: 'FILE_NOT_FOUND'\n    }, {\n      status: 404\n    });\n  }\n\n  const arrayBuffer = await file.arrayBuffer();\n  const buffer = Buffer.from(arrayBuffer);\n\n  const url = await uploadFile(buffer); // save file on your server somehow\n  const thumbhash = await generateThumbhash(buffer); // We need to implement this\n\n  return NextResponse.json({\n    url,\n    thumbhash\n  });\n}\n",[20,12106,12107,12131,12150,12177,12181,12193,12205,12213,12218,12226,12230,12234,12238,12257,12274,12278,12297,12316,12320,12330,12335,12340,12344],{"__ignoreMap":160},[164,12108,12109,12111,12114,12116,12119,12121,12124,12126,12129],{"class":166,"line":167},[164,12110,1692],{"class":237},[164,12112,12113],{"class":237}," async",[164,12115,10729],{"class":237},[164,12117,12118],{"class":219}," POST",[164,12120,1289],{"class":173},[164,12122,12123],{"class":1648},"request",[164,12125,1652],{"class":237},[164,12127,12128],{"class":219}," NextRequest",[164,12130,854],{"class":173},[164,12132,12133,12135,12138,12140,12142,12145,12148],{"class":166,"line":177},[164,12134,3248],{"class":237},[164,12136,12137],{"class":189}," formData",[164,12139,1641],{"class":237},[164,12141,10868],{"class":237},[164,12143,12144],{"class":173}," request.",[164,12146,12147],{"class":219},"formData",[164,12149,9430],{"class":173},[164,12151,12152,12154,12156,12158,12161,12164,12166,12169,12171,12173,12175],{"class":166,"line":186},[164,12153,3248],{"class":237},[164,12155,10848],{"class":189},[164,12157,1641],{"class":237},[164,12159,12160],{"class":173}," formData.",[164,12162,12163],{"class":219},"get",[164,12165,1289],{"class":173},[164,12167,12168],{"class":484},"'file'",[164,12170,1430],{"class":173},[164,12172,1729],{"class":237},[164,12174,10668],{"class":219},[164,12176,240],{"class":173},[164,12178,12179],{"class":166,"line":196},[164,12180,206],{"emptyLinePlaceholder":205},[164,12182,12183,12186,12188,12190],{"class":166,"line":202},[164,12184,12185],{"class":237},"  if",[164,12187,838],{"class":173},[164,12189,10822],{"class":237},[164,12191,12192],{"class":173},"file) {\n",[164,12194,12195,12197,12200,12203],{"class":166,"line":209},[164,12196,3345],{"class":237},[164,12198,12199],{"class":173}," NextResponse.",[164,12201,12202],{"class":219},"json",[164,12204,1706],{"class":173},[164,12206,12207,12210],{"class":166,"line":216},[164,12208,12209],{"class":173},"      code: ",[164,12211,12212],{"class":484},"'FILE_NOT_FOUND'\n",[164,12214,12215],{"class":166,"line":225},[164,12216,12217],{"class":173},"    }, {\n",[164,12219,12220,12223],{"class":166,"line":243},[164,12221,12222],{"class":173},"      status: ",[164,12224,12225],{"class":189},"404\n",[164,12227,12228],{"class":166,"line":631},[164,12229,3458],{"class":173},[164,12231,12232],{"class":166,"line":645},[164,12233,754],{"class":173},[164,12235,12236],{"class":166,"line":650},[164,12237,206],{"emptyLinePlaceholder":205},[164,12239,12240,12242,12245,12247,12249,12252,12255],{"class":166,"line":655},[164,12241,3248],{"class":237},[164,12243,12244],{"class":189}," arrayBuffer",[164,12246,1641],{"class":237},[164,12248,10868],{"class":237},[164,12250,12251],{"class":173}," file.",[164,12253,12254],{"class":219},"arrayBuffer",[164,12256,9430],{"class":173},[164,12258,12259,12261,12264,12266,12269,12271],{"class":166,"line":662},[164,12260,3248],{"class":237},[164,12262,12263],{"class":189}," buffer",[164,12265,1641],{"class":237},[164,12267,12268],{"class":173}," Buffer.",[164,12270,4293],{"class":219},[164,12272,12273],{"class":173},"(arrayBuffer);\n",[164,12275,12276],{"class":166,"line":678},[164,12277,206],{"emptyLinePlaceholder":205},[164,12279,12280,12282,12284,12286,12288,12291,12294],{"class":166,"line":692},[164,12281,3248],{"class":237},[164,12283,10691],{"class":189},[164,12285,1641],{"class":237},[164,12287,10868],{"class":237},[164,12289,12290],{"class":219}," uploadFile",[164,12292,12293],{"class":173},"(buffer); ",[164,12295,12296],{"class":212},"// save file on your server somehow\n",[164,12298,12299,12301,12304,12306,12308,12311,12313],{"class":166,"line":704},[164,12300,3248],{"class":237},[164,12302,12303],{"class":189}," thumbhash",[164,12305,1641],{"class":237},[164,12307,10868],{"class":237},[164,12309,12310],{"class":219}," generateThumbhash",[164,12312,12293],{"class":173},[164,12314,12315],{"class":212},"// We need to implement this\n",[164,12317,12318],{"class":166,"line":986},[164,12319,206],{"emptyLinePlaceholder":205},[164,12321,12322,12324,12326,12328],{"class":166,"line":991},[164,12323,2615],{"class":237},[164,12325,12199],{"class":173},[164,12327,12202],{"class":219},[164,12329,1706],{"class":173},[164,12331,12332],{"class":166,"line":997},[164,12333,12334],{"class":173},"    url,\n",[164,12336,12337],{"class":166,"line":1009},[164,12338,12339],{"class":173},"    thumbhash\n",[164,12341,12342],{"class":166,"line":1014},[164,12343,3673],{"class":173},[164,12345,12346],{"class":166,"line":1020},[164,12347,199],{"class":173},[29,12349,12351],{"id":12350},"generate-thumbhash-on-server-side-using-canvas","При помощи canvas",[16,12353,12354,12355],{},"Чтобы сгенерировать thumbhash, нужно считать данные изображения, только вот сервере у нас нет нативной поддержки canvas и нужно будет воспользоваться сторонней библиотекой, например ",[1325,12356,12357],{"href":12357,"rel":12358},"https://www.npmjs.com/package/canvas",[1592],[155,12360,12362],{"className":1622,"code":12361,"language":1625,"meta":160,"style":160},"import { createCanvas, loadImage } from \"canvas\";\n\nasync function loadImageAndConvertToHashWithCanvas(\n  buffer: Buffer\n) {\n  const maxSize = 100;\n  // load image\n  const image = await loadImage(buffer);\n  const width = image.width;\n  const height = image.height;\n  // calculate new size\n  const scale = Math.min(maxSize / width, maxSize / height);\n  const resizedWidth = Math.floor(width * scale);\n  const resizedHeight = Math.floor(height * scale);\n  // create thumb with new size\n  const canvas = createCanvas(resizedWidth, resizedHeight);\n  const ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(image, 0, 0, resizedWidth, resizedHeight);\n  // get pixels array\n  const imageData = ctx.getImageData(0, 0, resizedWidth, resizedHeight);\n  const rgba = new Uint8Array(imageData.data.buffer);\n  // generate thumbhash\n  const hash = rgbaToThumbHash(resizedWidth, resizedHeight, rgba);\n  // convert it to base64\n  const base64 = Buffer.from(hash).toString('base64');\n  return base64;\n}\n",[20,12363,12364,12378,12382,12393,12403,12407,12421,12426,12442,12454,12466,12471,12498,12520,12540,12545,12559,12579,12598,12603,12627,12644,12649,12662,12667,12693,12700],{"__ignoreMap":160},[164,12365,12366,12368,12371,12373,12376],{"class":166,"line":167},[164,12367,4279],{"class":237},[164,12369,12370],{"class":173}," { createCanvas, loadImage } ",[164,12372,4293],{"class":237},[164,12374,12375],{"class":484}," \"canvas\"",[164,12377,240],{"class":173},[164,12379,12380],{"class":166,"line":177},[164,12381,206],{"emptyLinePlaceholder":205},[164,12383,12384,12386,12388,12391],{"class":166,"line":186},[164,12385,11323],{"class":237},[164,12387,10729],{"class":237},[164,12389,12390],{"class":219}," loadImageAndConvertToHashWithCanvas",[164,12392,2058],{"class":173},[164,12394,12395,12398,12400],{"class":166,"line":196},[164,12396,12397],{"class":1648},"  buffer",[164,12399,1652],{"class":237},[164,12401,12402],{"class":219}," Buffer\n",[164,12404,12405],{"class":166,"line":202},[164,12406,854],{"class":173},[164,12408,12409,12411,12414,12416,12419],{"class":166,"line":209},[164,12410,3248],{"class":237},[164,12412,12413],{"class":189}," maxSize",[164,12415,1641],{"class":237},[164,12417,12418],{"class":189}," 100",[164,12420,240],{"class":173},[164,12422,12423],{"class":166,"line":216},[164,12424,12425],{"class":212},"  // load image\n",[164,12427,12428,12430,12433,12435,12437,12439],{"class":166,"line":225},[164,12429,3248],{"class":237},[164,12431,12432],{"class":189}," image",[164,12434,1641],{"class":237},[164,12436,10868],{"class":237},[164,12438,10532],{"class":219},[164,12440,12441],{"class":173},"(buffer);\n",[164,12443,12444,12446,12449,12451],{"class":166,"line":243},[164,12445,3248],{"class":237},[164,12447,12448],{"class":189}," width",[164,12450,1641],{"class":237},[164,12452,12453],{"class":173}," image.width;\n",[164,12455,12456,12458,12461,12463],{"class":166,"line":631},[164,12457,3248],{"class":237},[164,12459,12460],{"class":189}," height",[164,12462,1641],{"class":237},[164,12464,12465],{"class":173}," image.height;\n",[164,12467,12468],{"class":166,"line":645},[164,12469,12470],{"class":212},"  // calculate new size\n",[164,12472,12473,12475,12478,12480,12482,12485,12488,12490,12493,12495],{"class":166,"line":650},[164,12474,3248],{"class":237},[164,12476,12477],{"class":189}," scale",[164,12479,1641],{"class":237},[164,12481,11108],{"class":173},[164,12483,12484],{"class":219},"min",[164,12486,12487],{"class":173},"(maxSize ",[164,12489,848],{"class":237},[164,12491,12492],{"class":173}," width, maxSize ",[164,12494,848],{"class":237},[164,12496,12497],{"class":173}," height);\n",[164,12499,12500,12502,12505,12507,12509,12512,12515,12517],{"class":166,"line":655},[164,12501,3248],{"class":237},[164,12503,12504],{"class":189}," resizedWidth",[164,12506,1641],{"class":237},[164,12508,11108],{"class":173},[164,12510,12511],{"class":219},"floor",[164,12513,12514],{"class":173},"(width ",[164,12516,10186],{"class":237},[164,12518,12519],{"class":173}," scale);\n",[164,12521,12522,12524,12527,12529,12531,12533,12536,12538],{"class":166,"line":662},[164,12523,3248],{"class":237},[164,12525,12526],{"class":189}," resizedHeight",[164,12528,1641],{"class":237},[164,12530,11108],{"class":173},[164,12532,12511],{"class":219},[164,12534,12535],{"class":173},"(height ",[164,12537,10186],{"class":237},[164,12539,12519],{"class":173},[164,12541,12542],{"class":166,"line":678},[164,12543,12544],{"class":212},"  // create thumb with new size\n",[164,12546,12547,12549,12551,12553,12556],{"class":166,"line":692},[164,12548,3248],{"class":237},[164,12550,11193],{"class":189},[164,12552,1641],{"class":237},[164,12554,12555],{"class":219}," createCanvas",[164,12557,12558],{"class":173},"(resizedWidth, resizedHeight);\n",[164,12560,12561,12563,12566,12568,12570,12572,12574,12577],{"class":166,"line":704},[164,12562,3248],{"class":237},[164,12564,12565],{"class":189}," ctx",[164,12567,1641],{"class":237},[164,12569,11219],{"class":173},[164,12571,11222],{"class":219},[164,12573,1289],{"class":173},[164,12575,12576],{"class":484},"\"2d\"",[164,12578,9262],{"class":173},[164,12580,12581,12584,12586,12589,12591,12593,12595],{"class":166,"line":986},[164,12582,12583],{"class":173},"  ctx.",[164,12585,11257],{"class":219},[164,12587,12588],{"class":173},"(image, ",[164,12590,269],{"class":189},[164,12592,82],{"class":173},[164,12594,269],{"class":189},[164,12596,12597],{"class":173},", resizedWidth, resizedHeight);\n",[164,12599,12600],{"class":166,"line":991},[164,12601,12602],{"class":212},"  // get pixels array\n",[164,12604,12605,12607,12610,12612,12615,12617,12619,12621,12623,12625],{"class":166,"line":997},[164,12606,3248],{"class":237},[164,12608,12609],{"class":189}," imageData",[164,12611,1641],{"class":237},[164,12613,12614],{"class":173}," ctx.",[164,12616,11514],{"class":219},[164,12618,1289],{"class":173},[164,12620,269],{"class":189},[164,12622,82],{"class":173},[164,12624,269],{"class":189},[164,12626,12597],{"class":173},[164,12628,12629,12631,12634,12636,12638,12641],{"class":166,"line":1009},[164,12630,3248],{"class":237},[164,12632,12633],{"class":189}," rgba",[164,12635,1641],{"class":237},[164,12637,9424],{"class":237},[164,12639,12640],{"class":219}," Uint8Array",[164,12642,12643],{"class":173},"(imageData.data.buffer);\n",[164,12645,12646],{"class":166,"line":1014},[164,12647,12648],{"class":212},"  // generate thumbhash\n",[164,12650,12651,12653,12655,12657,12659],{"class":166,"line":1020},[164,12652,3248],{"class":237},[164,12654,11537],{"class":189},[164,12656,1641],{"class":237},[164,12658,11542],{"class":219},[164,12660,12661],{"class":173},"(resizedWidth, resizedHeight, rgba);\n",[164,12663,12664],{"class":166,"line":1032},[164,12665,12666],{"class":212},"  // convert it to base64\n",[164,12668,12669,12671,12674,12676,12678,12680,12683,12686,12688,12691],{"class":166,"line":1037},[164,12670,3248],{"class":237},[164,12672,12673],{"class":189}," base64",[164,12675,1641],{"class":237},[164,12677,12268],{"class":173},[164,12679,4293],{"class":219},[164,12681,12682],{"class":173},"(hash).",[164,12684,12685],{"class":219},"toString",[164,12687,1289],{"class":173},[164,12689,12690],{"class":484},"'base64'",[164,12692,9262],{"class":173},[164,12694,12695,12697],{"class":166,"line":1043},[164,12696,2615],{"class":237},[164,12698,12699],{"class":173}," base64;\n",[164,12701,12702],{"class":166,"line":1899},[164,12703,199],{"class":173},[29,12705,12707],{"id":12706},"generate-thumbhash-on-server-side-using-sharp","При помощи sharp",[16,12709,12710,12711],{},"Так же можно воспользоваться библиотекой ",[20,12712,12713],{},"sharp",[155,12715,12717],{"className":1622,"code":12716,"language":1625,"meta":160,"style":160},"import sharp from \"sharp\";\n\nconst loadImageAndConvertToHashWithSharp = async (buffer: Buffer) => {\n  // load image\n  const sharpImage = sharp(buffer);\n  const imageMetadata = await sharpImage.metadata();\n  // calculate new size\n  const size = Math.max(imageMetadata.width || 1, imageMetadata.height || 1);\n  const w = Math.round(100 * (imageMetadata.width || 1) / size);\n  const h = Math.round(100 * (imageMetadata.height || 1) / size);\n  // create thumb with new size\n  const { data } = await sharpImage\n    .resize({\n      withoutEnlargement: true,\n      width: w,\n      height: h,\n    })\n    .ensureAlpha() // rgbaToThumbHash require 4 channals\n    .raw()\n    .toBuffer({ resolveWithObject: true });\n  // generate thumbhash\n  const hash = rgbaToThumbHash(w, h, data);\n  // convert it to base64\n  const base64 = Buffer.from(hash).toString('base64');\n  return base64;\n};\n",[20,12718,12719,12733,12737,12764,12768,12782,12801,12805,12834,12865,12896,12900,12918,12928,12937,12942,12947,12951,12964,12974,12989,12993,13006,13010,13032,13038],{"__ignoreMap":160},[164,12720,12721,12723,12726,12728,12731],{"class":166,"line":167},[164,12722,4279],{"class":237},[164,12724,12725],{"class":173}," sharp ",[164,12727,4293],{"class":237},[164,12729,12730],{"class":484}," \"sharp\"",[164,12732,240],{"class":173},[164,12734,12735],{"class":166,"line":177},[164,12736,206],{"emptyLinePlaceholder":205},[164,12738,12739,12741,12744,12746,12748,12750,12753,12755,12758,12760,12762],{"class":166,"line":186},[164,12740,1995],{"class":237},[164,12742,12743],{"class":219}," loadImageAndConvertToHashWithSharp",[164,12745,1641],{"class":237},[164,12747,12113],{"class":237},[164,12749,838],{"class":173},[164,12751,12752],{"class":1648},"buffer",[164,12754,1652],{"class":237},[164,12756,12757],{"class":219}," Buffer",[164,12759,1430],{"class":173},[164,12761,1799],{"class":237},[164,12763,183],{"class":173},[164,12765,12766],{"class":166,"line":196},[164,12767,12425],{"class":212},[164,12769,12770,12772,12775,12777,12780],{"class":166,"line":202},[164,12771,3248],{"class":237},[164,12773,12774],{"class":189}," sharpImage",[164,12776,1641],{"class":237},[164,12778,12779],{"class":219}," sharp",[164,12781,12441],{"class":173},[164,12783,12784,12786,12789,12791,12793,12796,12799],{"class":166,"line":209},[164,12785,3248],{"class":237},[164,12787,12788],{"class":189}," imageMetadata",[164,12790,1641],{"class":237},[164,12792,10868],{"class":237},[164,12794,12795],{"class":173}," sharpImage.",[164,12797,12798],{"class":219},"metadata",[164,12800,9430],{"class":173},[164,12802,12803],{"class":166,"line":216},[164,12804,12470],{"class":212},[164,12806,12807,12809,12811,12813,12815,12817,12820,12822,12825,12828,12830,12832],{"class":166,"line":225},[164,12808,3248],{"class":237},[164,12810,11103],{"class":189},[164,12812,1641],{"class":237},[164,12814,11108],{"class":173},[164,12816,11111],{"class":219},[164,12818,12819],{"class":173},"(imageMetadata.width ",[164,12821,8897],{"class":237},[164,12823,12824],{"class":189}," 1",[164,12826,12827],{"class":173},", imageMetadata.height ",[164,12829,8897],{"class":237},[164,12831,12824],{"class":189},[164,12833,9262],{"class":173},[164,12835,12836,12838,12840,12842,12844,12846,12848,12850,12852,12855,12857,12859,12861,12863],{"class":166,"line":243},[164,12837,3248],{"class":237},[164,12839,11121],{"class":189},[164,12841,1641],{"class":237},[164,12843,11108],{"class":173},[164,12845,11133],{"class":219},[164,12847,1289],{"class":173},[164,12849,234],{"class":189},[164,12851,11140],{"class":237},[164,12853,12854],{"class":173}," (imageMetadata.width ",[164,12856,8897],{"class":237},[164,12858,12824],{"class":189},[164,12860,1430],{"class":173},[164,12862,848],{"class":237},[164,12864,11147],{"class":173},[164,12866,12867,12869,12871,12873,12875,12877,12879,12881,12883,12886,12888,12890,12892,12894],{"class":166,"line":631},[164,12868,3248],{"class":237},[164,12870,11154],{"class":189},[164,12872,1641],{"class":237},[164,12874,11108],{"class":173},[164,12876,11133],{"class":219},[164,12878,1289],{"class":173},[164,12880,234],{"class":189},[164,12882,11140],{"class":237},[164,12884,12885],{"class":173}," (imageMetadata.height ",[164,12887,8897],{"class":237},[164,12889,12824],{"class":189},[164,12891,1430],{"class":173},[164,12893,848],{"class":237},[164,12895,11147],{"class":173},[164,12897,12898],{"class":166,"line":645},[164,12899,12544],{"class":212},[164,12901,12902,12904,12906,12909,12911,12913,12915],{"class":166,"line":650},[164,12903,3248],{"class":237},[164,12905,3174],{"class":173},[164,12907,12908],{"class":189},"data",[164,12910,7156],{"class":173},[164,12912,481],{"class":237},[164,12914,10868],{"class":237},[164,12916,12917],{"class":173}," sharpImage\n",[164,12919,12920,12923,12926],{"class":166,"line":655},[164,12921,12922],{"class":173},"    .",[164,12924,12925],{"class":219},"resize",[164,12927,1706],{"class":173},[164,12929,12930,12933,12935],{"class":166,"line":662},[164,12931,12932],{"class":173},"      withoutEnlargement: ",[164,12934,8248],{"class":189},[164,12936,174],{"class":173},[164,12938,12939],{"class":166,"line":678},[164,12940,12941],{"class":173},"      width: w,\n",[164,12943,12944],{"class":166,"line":692},[164,12945,12946],{"class":173},"      height: h,\n",[164,12948,12949],{"class":166,"line":704},[164,12950,2114],{"class":173},[164,12952,12953,12955,12958,12961],{"class":166,"line":986},[164,12954,12922],{"class":173},[164,12956,12957],{"class":219},"ensureAlpha",[164,12959,12960],{"class":173},"() ",[164,12962,12963],{"class":212},"// rgbaToThumbHash require 4 channals\n",[164,12965,12966,12968,12971],{"class":166,"line":991},[164,12967,12922],{"class":173},[164,12969,12970],{"class":219},"raw",[164,12972,12973],{"class":173},"()\n",[164,12975,12976,12978,12981,12984,12986],{"class":166,"line":997},[164,12977,12922],{"class":173},[164,12979,12980],{"class":219},"toBuffer",[164,12982,12983],{"class":173},"({ resolveWithObject: ",[164,12985,8248],{"class":189},[164,12987,12988],{"class":173}," });\n",[164,12990,12991],{"class":166,"line":1009},[164,12992,12648],{"class":212},[164,12994,12995,12997,12999,13001,13003],{"class":166,"line":1014},[164,12996,3248],{"class":237},[164,12998,11537],{"class":189},[164,13000,1641],{"class":237},[164,13002,11542],{"class":219},[164,13004,13005],{"class":173},"(w, h, data);\n",[164,13007,13008],{"class":166,"line":1020},[164,13009,12666],{"class":212},[164,13011,13012,13014,13016,13018,13020,13022,13024,13026,13028,13030],{"class":166,"line":1032},[164,13013,3248],{"class":237},[164,13015,12673],{"class":189},[164,13017,1641],{"class":237},[164,13019,12268],{"class":173},[164,13021,4293],{"class":219},[164,13023,12682],{"class":173},[164,13025,12685],{"class":219},[164,13027,1289],{"class":173},[164,13029,12690],{"class":484},[164,13031,9262],{"class":173},[164,13033,13034,13036],{"class":166,"line":1037},[164,13035,2615],{"class":237},[164,13037,12699],{"class":173},[164,13039,13040],{"class":166,"line":1043},[164,13041,2428],{"class":173},[1530,13043,13044],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .s4XuR, html code.shiki .s4XuR{--shiki-default:#E36209;--shiki-dark:#FFAB70}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .s9eBZ, html code.shiki .s9eBZ{--shiki-default:#22863A;--shiki-dark:#85E89D}",{"title":160,"searchDepth":177,"depth":177,"links":13046},[13047,13048,13049],{"id":10433,"depth":177,"text":10434},{"id":10491,"depth":177,"text":10492},{"id":12089,"depth":177,"text":12090,"children":13050},[13051,13052],{"id":12350,"depth":186,"text":12351},{"id":12706,"depth":186,"text":12707},"2024-01-22","Прогрессивная загрузка изображений при помощи создания миниатюр в thumbhash и их использование в React",{},"/blog/progressive-images-using-thumbhash","/images/image-thumb-preview.webp",{"title":10428,"description":13054},"blog/progressive-images-using-thumbhash",[13061,7484,13062],"images","node.js","3LPPKEE8XZT4UIR2vkmVIVrk9_jr5rlo_-Di3FuX-KE",{"id":13065,"title":13066,"body":13067,"date":13185,"description":13186,"extension":1546,"meta":13187,"navigation":205,"path":13188,"previewImg":13189,"seo":13190,"stem":13191,"topics":13192,"__hash__":13194},"articles/blog/why-sloth.md","Почему ленивец?",{"type":8,"value":13068,"toc":13183},[13069,13072,13075,13113,13134,13147,13150,13164,13167,13170,13173,13176,13179],[16,13070,13071],{},"Все мы знаем, что лень - двигатель прогресса. В веб-разработке ленью пропитано буквально все,\nбольшинство прекрасных библиотек появились в том числе из-за лени - а именно из-за желания облегчить себе жизнь.",[16,13073,13074],{},"Мы очень любим облегчать себе жизнь",[16,13076,13077,13078,82,13081,13084,13085,13088,13089,23,13091,13093,13094,13097,13098,13101,13102,13105,13106,82,13109,13112],{},"Очень наглядный пример - фавикон. Когда я только пришел в веб-разработку, мне приходилось запускать photoshop,\nвручную ресайзить картинку и конвертировать ее в ",[20,13079,13080],{},".ico",[20,13082,13083],{},".png",", после чего гуглить,\nкакие мне нужно прописать метатеги для поддержки ",[20,13086,13087],{},"32х32",". Сейчас есть замечательные сайты,\nкуда можно одним кликом загрузить картинку любого размера/формата и они тебе сгенерируют\nи ",[20,13090,13080],{},[20,13092,13083],{}," всех нужных размеров и код для ",[20,13095,13096],{},"\u003Chead>"," дадут вместе с ",[20,13099,13100],{},"minifest.json",".\nА, например ",[20,13103,13104],{},"next.js"," даже сам сгенерирует тебе все мета теги, достаточно лишь кинуть картинки в папку /app.\nВсе ради того, чтобы тебе не пришлось лишний раз нажимать ",[1597,13107,13108],{},"ctrl + c",[1597,13110,13111],{},"ctrl + v",". Это ли не кульминация лени?\nНо ведь круто! Но ведь удобно!",[16,13114,13115,13116,1128,13119,13122,13123,13126,13127,9875,13130,13133],{},"Или скажем бандлеры. Настроить ",[20,13117,13118],{},"gulp",[20,13120,13121],{},"grunt"," для сборки сайта было делом хоть и не хитростным,\nно требующим определенного опыта и знаний. Сейчас же фреймворки имеют встроенный конфиг бандлера под капотом,\nчтобы просто начать что-то делать тебе вообще не нужно ничего настраивать,\nа если и придется - вся настройка в 99% случаев сведется к тому, чтобы сделать ",[20,13124,13125],{},"npm i"," с нужным плагином/лоадером.\nДля какого-нибудь ",[20,13128,13129],{},"CRA",[20,13131,13132],{},"eject"," конфига вообще считается плохим тоном,\nи ощущается как \"ай ай ай, плохой разработчик, зачем ты лезешь в настройки вебпака, все уже и так за тебя настроили\".",[16,13135,13136,13137,82,13140,1128,13143,13146],{},"А сколько есть библиотек вроде ",[1597,13138,13139],{},"lodash",[1597,13141,13142],{},"underscore",[1597,13144,13145],{},"react-hooks",", на все случаи жизни,\nбери себе да импортируй готовые методы.",[16,13148,13149],{},"Почему лень - это хорошо?\nЯ убежден, что все эти удобства были созданы в том числе из лени. Не только из-за желания сделать мир лучше, но в том числа\nиз-за стремления облегчить самому себе жизнь.",[16,13151,13152,13153,13158,13159,1584],{},"Ленивый разработчик, в самом хорошем смысле этого слова, обязательно напишет свой велосипед,\nкоторый будет пусть на 5%, но удобнее существующего решения.\nСоздаст свой кастомный конфиг для бандлера, где все будет настроено именно так, как ему удобно.\nСделает свой темплейт для быстрого старта проекта на react + typescript.\nНапишет какой-нибудь ",[1325,13154,13157],{"href":13155,"rel":13156},"https://marketplace.visualstudio.com/items?itemName=cipchk.cssrem",[1592],"cssrem"," или\n",[1325,13160,13163],{"href":13161,"rel":13162},"https://marketplace.visualstudio.com/items?itemName=YounesHenni.rename-extensions",[1592],"rename",[16,13165,13166],{},"Истинная сила лени раскрывается в автоматизации, оптимизации и сокращении времени работы.\nЕсли ты инвестировал в это свое время и силы и теперь можешь выполнять ту же работу за куда меньшее время\nпочему бы не побыть ленивым и не отдохнуть? Поработать, чтобы потом работать меньше.",[16,13168,13169],{},"А почему плохо?",[16,13171,13172],{},"Конечно, у всех этих удобств есть и негативная сторона. Мне кажется, мы слишком культивируем лень.\nПривыкаем к тому, что все уже написано за нас. Понижаем порог входа до неприлично низкого уровня.\nЯ не говорю о том, что простота - это плохо, скорее призываю разбираться в том, как эта простота устроена\nи создавать ее самому. Зона комфорта - это прекрасно, но когда она создана руками других людей,\nто выйти за ее пределы бывает крайне болезненно. И даже страшно подумать, куда будет двигаться разработка\nс развитием нейросетей, в частности помощников вроде github copilot.",[16,13174,13175],{},"Так почему же ленивец?",[16,13177,13178],{},"Я считаю, что этому миру нужны ленивые разработчики, которым не лень создавать вещи,\nкоторые сильно облегчают им(и нам) жизнь.\nРазработчики, которые инвестируют свои силы в то, чтобы работать было эффективнее и быстрее.\nЯ сам стремлюсь стать именно таким разработчиком. А еще ленивцы милые.",[386,13180],{"alt":13181,"src":13182},"А еще Блиц - скорость без границ","https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNTdlOWIxemZ3OXNpbWpudHI1a3R3MjdrZ3N2aG8wd296YjM2N3VodSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xUA7b5OQjivd4cl3j2/giphy.gif",{"title":160,"searchDepth":177,"depth":177,"links":13184},[],"2024-01-01","Мысли вслух о лени, в частности о ее пользе и вреде в разрезе веб-разработки.",{},"/blog/why-sloth","/images/why-sloth-preview.webp",{"title":13066,"description":13186},"blog/why-sloth",[13193],"thoughts","gD5P_RwHBHqxp1RAxemBvDI82eJLtuluhqOWHdTkG28",1751114697167]