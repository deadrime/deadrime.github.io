{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 3bc347fa92a2c015564d","webpack:///./src/app.js","webpack:///./src/functions/generateGameField.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_generateGameField","obj","default","ws","WebSocket","gameBoard","document","getElementById","gameFields","getElementsByClassName","onmessage","msg","msgBody","JSON","parse","data","console","log","type","row","col","elNum","el","createElement","classList","add","player","appendChild","modal","style","display","winnerText","innerText","onclick","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","innerHTML","err","return","addEventListener","event","target","hasAttribute","getAttribute","send","stringify","generateGameField","gameFieldSize","length","Math","sqrt","column","setAttribute","toString"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(1);\n\nvar _generateGameField = __webpack_require__(2);\n\nvar _generateGameField2 = _interopRequireDefault(_generateGameField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _generateGameField2.default)();\n\nvar ws = new WebSocket('ws://192.168.1.145:9001');\n\nvar gameBoard = document.getElementById('game');\nvar gameFields = gameBoard.getElementsByClassName('game-field');\nvar gameSize = 3;\n\nws.onmessage = function (msg) {\n    //TODO и эту херню тоже в контроллер\n    var msgBody = JSON.parse(msg.data);\n    console.log(msgBody);\n    if (msgBody.type === 'side') {\n        console.log(msgBody.data);\n    }\n    if (msgBody.type === 'turn') {\n        var row = msgBody.data.col;\n        var col = msgBody.data.row;\n        console.log('\\u0421\\u0442\\u0440\\u043E\\u043A\\u0430 ' + row + '; \\u0441\\u0442\\u043E\\u043B\\u0431\\u0435\\u0446 ' + col);\n        var elNum = row !== 0 ? row * gameSize + col : col;\n        var el = document.createElement('span');\n        el.classList.add('turn');\n        if (msgBody.data.player === 'x') {\n            el.classList.add('turn-cross');\n        } else {\n            el.classList.add('turn-nought');\n        }\n        gameFields[elNum].appendChild(el);\n    }\n\n    if (msgBody.type === 'win') {\n        var modal = document.getElementById('modal_win');\n        modal.style.display = 'flex';\n        var winnerText = msgBody.data === 'Ничья' ? 'Ничья!' : '\\u041F\\u043E\\u0431\\u0435\\u0434\\u0438\\u043B\\u0438 ' + msgBody.data;\n        var winnerTextDiv = document.getElementById('winner-text');\n        winnerTextDiv.innerText = winnerText;\n        var rerun = document.getElementById('rerun');\n        rerun.onclick = function () {\n            modal.style.display = 'none';\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = gameFields[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var _el = _step.value;\n\n                    _el.innerHTML = '';\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        };\n    }\n};\n\nvar game = document.getElementById('game');\n\ngame.addEventListener('click', function (event) {\n    if (event.target.hasAttribute('data-row') && event.target.hasAttribute('data-column')) {\n        var data = {\n            type: 'turn',\n            data: {\n                row: event.target.getAttribute('data-row'),\n                col: event.target.getAttribute('data-column')\n            }\n        };\n        ws.send(JSON.stringify(data));\n    }\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar generateGameField = function generateGameField() {\n    var gameFields = document.getElementsByClassName('game-field');\n    var gameFieldSize = gameFields.length;\n    var rowSize = Math.sqrt(gameFields.length);\n\n    for (var i = 0, row = -1, column = -1; i < gameFieldSize; ++i, column++) {\n        if (i % 3 === 0) {\n            row++;\n            column = 0;\n        }\n        gameFields[i].setAttribute('data-row', row.toString());\n        gameFields[i].setAttribute('data-column', column.toString());\n    }\n};\n\nexports.default = generateGameField;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3bc347fa92a2c015564d","import './index.pcss';\nimport generateGameField from './functions/generateGameField';\n\ngenerateGameField();\n\nlet ws = new WebSocket ('ws://192.168.1.145:9001');\n\nlet gameBoard = document.getElementById('game');\nlet gameFields = gameBoard.getElementsByClassName('game-field');\nlet gameSize = 3;\n\nws.onmessage = (msg) => {\n    //TODO и эту херню тоже в контроллер\n    let msgBody = JSON.parse(msg.data);\n    console.log(msgBody);\n    if (msgBody.type === 'side') {\n        console.log(msgBody.data);\n    }\n    if (msgBody.type === 'turn') {\n        let row = msgBody.data.col;\n        let col = msgBody.data.row;\n        console.log(`Строка ${row}; столбец ${col}`);\n        let elNum = row!==0 ? (row*gameSize) + col : col;\n        let el = document.createElement('span');\n        el.classList.add('turn');\n        if (msgBody.data.player ==='x') {\n            el.classList.add('turn-cross');\n        }\n        else {\n            el.classList.add('turn-nought');\n        }\n        gameFields[elNum].appendChild(el);\n    }\n\n    if (msgBody.type === 'win') {\n        let modal = document.getElementById('modal_win');\n        modal.style.display = 'flex';\n        let winnerText = msgBody.data ==='Ничья' ? 'Ничья!' : `Победили ${msgBody.data}`;\n        let winnerTextDiv = document.getElementById('winner-text');\n        winnerTextDiv.innerText = winnerText;\n        let rerun = document.getElementById('rerun');\n        rerun.onclick = () => {\n            modal.style.display = 'none';\n            for (let el of gameFields) {\n                el.innerHTML = '';\n            }\n        }\n    }\n};\n\nconst game = document.getElementById('game');\n\ngame.addEventListener('click', (event) => {\n    if (event.target.hasAttribute('data-row') && event.target.hasAttribute('data-column')) {\n        let data = {\n            type: 'turn',\n            data: {\n                row: event.target.getAttribute('data-row'),\n                col: event.target.getAttribute('data-column'),\n            }\n        };\n        ws.send(JSON.stringify(data));\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","let generateGameField = () => {\r\n    let gameFields = document.getElementsByClassName('game-field');\r\n    let gameFieldSize = gameFields.length;\r\n    let rowSize = Math.sqrt(gameFields.length);\r\n\r\n    for (let i=0,row=-1,column=-1;i<gameFieldSize;++i, column++) {\r\n        if (i%3 === 0) {\r\n            row++;\r\n            column = 0;\r\n        }\r\n        gameFields[i].setAttribute('data-row',row.toString());\r\n        gameFields[i].setAttribute('data-column',column.toString())\r\n    }\r\n};\r\n\r\nexport default generateGameField;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/functions/generateGameField.js"],"sourceRoot":""}