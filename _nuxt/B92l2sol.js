import{e as H,aq as E,J as I,ar as M,R as L,c as g,I as B,i as k,h as b,f as a,F as C,r as $,o as d,b as v,w as y,d as x,t as _,ac as N,a as i,n as S,l as T,H as V,k as Y,as as F}from"./Dic0N_Gf.js";import{_ as w}from"./CNbWpHhK.js";import{a as q}from"./jehr1J6B.js";import{u as z}from"./C6wMo448.js";import{_ as A}from"./BAHtHdIS.js";import{u as D}from"./DEQwvMiY.js";import"./D7vSz1kn.js";const j=["data-id"],R=H({__name:"HeadingList",props:{links:{},activeHeadingId:{},inner:{type:Boolean}},setup(l){const o=E("wrapper"),e=I({height:0,top:0}),n=()=>{if(!l.activeHeadingId){e.value.top=e.value.height/2,e.value.height=0;return}const t=o.value.querySelector(`a[href="#${l.activeHeadingId}"]`);if(!t)return;const{top:f}=t.getBoundingClientRect(),{top:c}=o.value.getBoundingClientRect();e.value.top=f-c,e.value.height=t.clientHeight};return M(()=>{n()}),L(()=>{n()}),(t,f)=>{const c=w,h=R;return d(),g("ol",{ref:"wrapper",class:B(["headingList flex flex-col gap-3 relative [&*>li]:-ml-px [&*>li>*:not(ol)]:pl-3 border-l-2 border-gray-200/30 dark:border-gray-600/50",{"border-none ml-3":t.inner}])},[t.inner?b("",!0):(d(),k(a(q).div,{key:0,class:"absolute w-[2px] left-0 bg-primary rounded-[2px] -translate-x-[2px]",animate:{top:a(e).top,height:a(e).height},transition:{duration:.3,delay:0,ease:"easeOut"}},null,8,["animate"])),(d(!0),g(C,null,$(t.links,r=>{var u;return d(),g("li",{ref_for:!0,ref:"item",key:r.id,"data-id":r.id,class:"flex flex-col gap-3 relative"},[v(c,{href:`#${r.id}`,class:B(["text-body2 border-l-2 border-transparent",{"text-text":t.activeHeadingId!==r.id,"text-primary":t.activeHeadingId===r.id}])},{default:y(()=>[x(_(r.text),1)]),_:2},1032,["href","class"]),(u=r.children)!=null&&u.length?(d(),k(h,{key:0,links:r.children||[],"active-heading-id":t.activeHeadingId,inner:""},null,8,["links","active-heading-id"])):b("",!0)],8,j)}),128))],2)}}}),J=l=>{const o=[],e=n=>{o.push(n),n.children&&n.children.forEach(e)};return l.forEach(e),o};function O(l,o,e=400){const n=I(o),t=J(l),f={},c=()=>{const u=t.map(s=>{const p=f[s.id]||document.getElementById(s.id);return{...s,element:p}}).filter(({element:s})=>!!s).map(({id:s,element:p})=>({id:s,box:p.getBoundingClientRect()}));let m=u.find(({box:s})=>s.bottom>0&&s.bottom<e&&s.bottom<=window.innerHeight);m||(m=u.toReversed().find(({box:s})=>s.bottom<e)),m?m.id!==n.value&&(n.value=m.id):n.value=void 0},h=z(c,150);return L(()=>{window.addEventListener("scroll",h),c()}),N(()=>{window.removeEventListener("scroll",h)}),n}const P={key:0,class:"mt-4 mb-4"},U=H({__name:"TableOfContent",props:{links:{}},setup(l){const e=O(l.links);return(n,t)=>n.links.length>0?(d(),g("div",P,[t[0]||(t[0]=i("span",{class:"block mb-3 font-semibold text-lg md:text-body2"},"СОДЕРЖАНИЕ",-1)),v(R,{links:n.links,"active-heading-id":a(e)},null,8,["links","active-heading-id"])])):b("",!0)}}),G={class:"flex flex-col"},K={class:"patternBg overflow-hidden"},Q={class:"py-8 border-t-[6px] border-b-2 border-details md:mb-10"},W={class:"text-2xl font-primary block mb-4"},X={class:"font-primary text-md font-normal block mb-8 text-secondary"},Z={class:"flex gap-2 flex-wrap gap-y-1"},ee={class:"text-body2 text-secondary block mt-4"},te={class:"flex flex-col md:grid md:grid-cols-12 gap-5"},ne={class:"md:col-start-10 md:col-end-13 md:sticky top-4 self-start shrink-0 md:order-last"},se={id:"content",class:"blogContent md:col-span-8"},ue=H({__name:"post",async setup(l){let o,e;const n=S(),t=([o,e]=T(()=>D(n.path)),o=await o,e(),o),f=t.value.body.toc,{title:c,description:h,topics:r,date:u}=t.value;return(m,s)=>(d(),g("div",G,[v(a(w),{href:"/blog",class:"mb-8 block self-start"},{default:y(()=>s[0]||(s[0]=[x(" ← Блог ")])),_:1,__:[0]}),i("div",null,[i("section",K,[i("header",Q,[i("h1",W,_(a(c)),1),i("h2",X,_(a(h)),1),i("div",Z,[(d(!0),g(C,null,$(a(r),p=>(d(),k(A,{is:a(w),key:p,variant:"outlined",href:`/blog/topics/${p}`},{default:y(()=>[x(_(Y(p)),1)]),_:2},1032,["is","href"]))),128))]),i("time",ee,_(a(F)(a(u)).format("D MMMM YYYY")),1)])]),i("div",te,[i("aside",ne,[v(U,{class:"md:col-start-10 md:col-end-13 md:sticky top-4 self-start shrink-0 md:order-last",links:a(f).links},null,8,["links"])]),i("div",se,[V(m.$slots,"default")])])])]))}});export{ue as default};
